/*!
 * `rbroker` The DeployR RBroker Library v7.4.0
 * http://deployr.revolutionanalytics.com/documents/dev/rbroker-jsdoc
 *
 * Copyright (C) 2010-2015 by Revolution Analytics Inc.
 *
 * This program is licensed to you under the terms of Version 2.0 of the
 * Apache License. This program is distributed WITHOUT ANY EXPRESS OR
 * IMPLIED WARRANTY, INCLUDING THOSE OF NON-INFRINGEMENT, MERCHANTABILITY
 * OR FITNESS FOR A PARTICULAR PURPOSE. Please refer to the
 * Apache License 2.0 (http://www.apache.org/licenses/LICENSE-2.0) for
 * more details.
 *
 * Includes:
 *   - D.js: http://malko.github.io/D.js
 *   - deploy: https://www.npmjs.com/package/deployr
 *   - enum: https://www.npmjs.org/package/enum
 *   - merge: https://www.npmjs.org/package/merge
 *   - selfish: https://www.npmjs.org/package/selfish
 *
 * D
 *
 * Copyright (C) 2013 Jonathan Gotti <jgotti at jgotti dot net>
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * deployr
 *
 * Copyright (C) 2010-2015 by Revolution Analytics Inc.
 *
 * This program is licensed to you under the terms of Version 2.0 of the
 * Apache License. This program is distributed WITHOUT ANY EXPRESS OR
 * IMPLIED WARRANTY, INCLUDING THOSE OF NON-INFRINGEMENT, MERCHANTABILITY
 * OR FITNESS FOR A PARTICULAR PURPOSE. Please refer to the
 * Apache License 2.0 (http://www.apache.org/licenses/LICENSE-2.0) for
 * more details.
 *
 * enum
 *
 * Copyright (c) 2015 Adriano Raiano
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining 
 * a copy of this software and associated documentation files 
 * (the "Software"), to deal in the Software without restriction, 
 * including without limitation the rights to use, copy, modify, merge
 * publish, distribute, sublicense, and/or sell copies of the Software, 
 * and to permit persons to whom the Software is furnished to do so, 
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, 
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY 
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * merge
 *
 * Copyright (c) 2014 yeikos - http://www.yeikos.com
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * selfish
 *
 * Copyright 2011 Irakli Gozalishvili. All rights reserved
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Date: 2015-04-03
 */
(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.rbroker=e()}})(function(){var e,t,r;return function n(e,t,r){function i(s,a){if(!t[s]){if(!e[s]){var u=typeof require=="function"&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r?r:t)},l,l.exports,n,e,t,r)}return t[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,r){var n=e("./lib/task/discreate-task"),i=e("./lib/task/pooled-task"),o=e("./lib/task/background-task"),s=e("./lib/engine/discrete-task-broker"),a=e("./lib/engine/pooled-task-broker"),u=e("./lib/engine/background-task-broker");if(typeof window!=="undefined"&&!window.deployr){window.deployr=e("deployr")}t.exports={discreteTaskBroker:function(e){return s.new(e)},pooledTaskBroker:function(e){return a.new(e)},backgroundTaskBroker:function(e){return u.new(e)},discreteTask:function(e){return n.new(e)},pooledTask:function(e){return i.new(e)},backgroundTask:function(e){return o.new(e)}}},{"./lib/engine/background-task-broker":2,"./lib/engine/discrete-task-broker":3,"./lib/engine/pooled-task-broker":4,"./lib/task/background-task":8,"./lib/task/discreate-task":9,"./lib/task/pooled-task":10,deployr:21}],2:[function(e,t,r){var n=e("merge"),i=e("./rbroker-engine"),o=e("../worker/background-task-worker");t.exports=i.extend({initialize:function(e){var t=10;i.initialize.call(this,n(e,{maxConcurrentTaskLimit:t}));for(var r=0;r<this.parallelTaskLimit;r++){this.resourceTokenPool.offer(r)}this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(e){this.emit("ready")})},refresh:function(e){throw new Error("BackgroundTaskBroker refresh not supported.")},shutdown:function(){this.flush();return this.ruser.release()},createWorker:function(e){return o.new(e,this.ruser)}})},{"../worker/background-task-worker":13,"./rbroker-engine":5,merge:41}],3:[function(e,t,r){var n=e("d.js"),i=e("./rbroker-engine"),o=e("../worker/discrete-task-worker");t.exports=i.extend({initialize:function(e){i.initialize.call(this,e);for(var t=0;t<this.parallelTaskLimit;t++){this.resourceTokenPool.offer(t)}if(e.credentials){this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(e){this.emit("ready")})}else{this.validateEndpoint(function(){this.ruser=null;this.emit("ready")})}},refresh:function(e){throw new Error("DiscreteTaskBroker refresh not supported.")},createWorker:function(e){return o.new(e,this.ruser)},shutdown:function(){this.flush();return this.ruser?this.ruser.release():n.promisify(true)}})},{"../worker/discrete-task-worker":14,"./rbroker-engine":5,"d.js":19}],4:[function(e,t,r){var n=e("deployr");var i=e("d.js"),o=e("merge"),s=e("./rbroker-engine"),a=e("../worker/pooled-task-worker");t.exports=s.extend({initialize:function(e){s.initialize.call(this,e);if(!e.credentials){throw new Error("Broker failed to initialize, user credentials required.")}var t=this,r=this.parallelTaskLimit,i=o({poolsize:r},e.pool||{});this.httpKeepAlive={id:null,PING_INTERVAL:6e4,start:function(e){this.stop();this.id=setInterval(function(){n.io("/r/user/about").share(e.getCookies()).end()},this.PING_INTERVAL)},stop:function(){clearInterval(this.id)}};function a(e){var r=e.get("projects");if(r.length>0){var n=e.get("error");if(n){t.emit("warning",n)}r.forEach(function(e){t.resourceTokenPool.offer(e.project)});t.parallelTaskLimit=t.resourceTokenPool.size();t.httpKeepAlive.start(t.ruser);t.emit("ready")}else{t.emit("error",e.get("error"))}}this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(){if(e.releaseGridResources){this.ruser.io("/r/user/release").end().io("/r/project/pool").data(i).end(a)}else{this.ruser.io("/r/project/pool").data(i).end(a)}})},refresh:function(e){var t=[],r={},s=this.ruser;if(!this.isIdle()){return i.rejected(new Error("RBroker is not idle, refresh not permitted."))}e=e||{};r={code:"# Refresh project on PooledTaskBroker.",preloadfilename:e.preloadfilename,preloaddirectory:e.preloaddirectory,preloadfileauthor:e.preloadfileauthor,preloadfileversion:e.preloadfileversion};this.resourceTokenPool.q.forEach(function(e){t.push(n.io("/r/project/recycle").share(s.getCookies()).delay().data({project:e}).end().io("/r/project/execute/code").share(s.getCookies()).delay().data(o(r,{project:e})).end())});return n.pipeline(t)},shutdown:function(){var e=this.resourceTokenPool.q.slice();this.resourceTokenPool.q=[];this.httpKeepAlive.stop();this.flush();return this.ruser.release(e)},createWorker:function(e){return a.new(e,this.ruser)}})},{"../worker/pooled-task-worker":15,"./rbroker-engine":5,"d.js":19,deployr:21,merge:41}],5:[function(e,t,r){var n=e("deployr"),i=e("merge"),o=e("selfish").Base,s=e("deployr/lib/emitter"),a=e("../rtask-token"),u=e("../util/rtask-queue"),c=999;t.exports=o.extend(s,{initialize:function(e){s.initialize.call(this);var t=this;this.config=e;this.scope=this.config.ctx||this;this.engineStarted=false;this.parallelTaskLimit=this.config.maxConcurrentTaskLimit||1;this.pendingLow=u.new(c);this.pendingHigh=u.new(c);this.resourceTokenPool=u.new(c);n.configure({host:e.host,cors:e.cors,logging:e.logging,allowSelfSignedSSLCert:e.allowSelfSignedSSLCert,events:{error:function(e,t){this.emit("error",t)}.bind(this)}});this.runtime={runningTasks:0,totals:{success:0,failure:0},stats:function(e){return{maxConcurrency:t.maxConcurrency(),totalTasksRun:this.totals.success+this.totals.failure,totalTasksRunToSuccess:this.totals.success,totalTasksRunToFailure:this.totals.failure,totalTimeTasksOnCode:e.result.timeOnCode,totalTimeTasksOnServer:e.result.timeOnServer,totalTimeTasksOnCall:e.result.timeOnCall,task:e.task}},calibrate:function(e){this.runningTasks=this.runningTasks+e;if(this.runningTasks<0){this.runningTasks=0}return this.runningTasks}};this.on("ready",function(){this.engineStarted=true;for(var e=0;e<this.parallelTaskLimit;e++){if(!this.isIdle()){this.run()}else{break}}})},validateEndpoint:function(e){return n.io("/r/server/info").ctx(this).timeout(1e3*10).end(e)},owner:function(){return this.ruser},simulateApp:function(e){if(e){if(typeof e.simulateApp==="function"){e.simulateApp(this)}else{throw new Error('ReferenceError: "simulateApp" is not defined')}}},submit:function(e,t){var r=this.createWorker(e),n=a.new(r);if(t){this.pendingHigh.offer(r)}else{this.pendingLow.offer(r)}this.run();return n},maxConcurrency:function(){return this.parallelTaskLimit},flush:function(){this.pendingHigh.clear();this.pendingLow.clear();return this.status()},isConnected:function(){var e=this.ruser?this.ruser.io("/r/user/about"):n.io("/r/server/info");return e.global(false).promise().success(function(){return true}).error(function(){return false})},status:function(){var e=this.pendingHigh.size()+this.pendingLow.size(),t=this.parallelTaskLimit-this.runtime.runningTasks,r=this.isIdle();return{pending:e,executing:t,idle:r,toString:function(){return'\nRBrokerStatus: [ pending = "'+e+'" ] '+'[ executing = "'+t+'" ] '+'[ idle = "'+r+'" ]\n'}}},isIdle:function(){return this.runtime.runningTasks===0&&this.pendingLow.isEmpty()&&this.pendingHigh.isEmpty()},ready:function(e){this.on("ready",e);return this},error:function(e){this.on("error",e);return this},warning:function(e){this.on("warning",e);return this},complete:function(e){this.on("complete",e);return this},idle:function(e){this.on("idle",e);return this},progress:function(e){this.on("progress",e);return this},start:function(e){this.on("start",e);return this},run:function(){var e=this,t,r;if(this.engineStarted&&!this.resourceTokenPool.isEmpty()&&(!this.pendingLow.isEmpty()||!this.pendingHigh.isEmpty())){t=this.pendingHigh.take()||this.pendingLow.take();this.runtime.calibrate(+1);this.emit("start",t.task);t.work(this.resourceTokenPool.take()).then(function(t){e.runtime.totals.success++;e.emit("progress",e.runtime.stats(t));e.emit("complete",t.task,t.result);this.resolve(t)}.bind(t),function(t){var r={task:this.task,result:{id:null,type:this.task.type,success:false,timeOnCode:0,timeOnServer:0,timeOnCall:0,failure:t}};e.runtime.totals.failure++;e.emit("progress",e.runtime.stats(r));e.emit("error",i(t,{task:this.task}));e.emit("complete",r.task,r.result);this.reject(i(t,{task:this.task}))}.bind(t)).ensure(function(t){e.runtime.calibrate(-1);e.resourceTokenPool.offer(this.resourceToken);e.run();if(e.isIdle()){e.emit("idle")}}.bind(t))}}})},{"../rtask-token":6,"../util/rtask-queue":12,deployr:21,"deployr/lib/emitter":23,merge:41,selfish:42}],6:[function(e,t,r){var n=e("selfish").Base;t.exports=n.extend({initialize:function i(e){this.worker=e;this.cancelled=false},cancel:function(e){this.cancelled=this.worker.terminate(e);return this.cancelled},getTask:function(){return this.worker.task},isDone:function(){return!this.isPending()},isPending:function(){return this.worker.isPending()},isCancelled:function(){return this.cancelled},promise:function(){return this.worker.defer.promise}})},{selfish:42}],7:[function(e,t,r){var n=e("selfish").Base,i=e("enum"),o=new i(["DISCRETE","POOLED","BACKGROUND"],"RTaskType");t.exports=n.extend({DISCRETE:o.DISCRETE,POOLED:o.POOLED,BACKGROUND:o.BACKGROUND})},{"enum":39,selfish:42}],8:[function(e,t,r){var n=e("selfish").Base,i=e("../rtask-type"),o=e("./rtask");t.exports=n.extend(o,{initialize:function(e){o.initialize.call(this,e,i.BACKGROUND)},toString:function(){return"BackgroundTask: "+o.toString.call(this)}})},{"../rtask-type":7,"./rtask":11,selfish:42}],9:[function(e,t,r){var n=e("selfish").Base,i=e("../rtask-type"),o=e("./rtask");t.exports=n.extend(o,{initialize:function(e){o.initialize.call(this,e,i.DISCRETE)},toString:function(){return"DiscreteTask: "+o.toString.call(this)}})},{"../rtask-type":7,"./rtask":11,selfish:42}],10:[function(e,t,r){var n=e("selfish").Base,i=e("../rtask-type"),o=e("./rtask");t.exports=n.extend(o,{initialize:function(e){o.initialize.call(this,e,i.POOLED)},toString:function(){return"PooledTask: "+o.toString.call(this)}})},{"../rtask-type":7,"./rtask":11,selfish:42}],11:[function(e,t,r){var n=e("selfish").Base;t.exports=n.extend({initialize:function i(e,t){var r=this;e=e||{};this.type=t;this.propKeys=Object.keys(e);this.token=null;for(var n in e){(function(t){Object.defineProperty(r,t,{get:function(){return e[t]},set:function(r){e[t]=r}})})(n)}},serialize:function(){var e={};for(var t=this.propKeys,r=t.length;r;--r){e[t[r-1]]=this[t[r-1]]}return e},toString:function(){var e="",t=this.propKeys;for(var r in t){e+=" [ "+t[r]+' = "'+this[t[r]]+'" ]'}if(this.token){e+=' [ token = "'+this.token+'" ]'}return e}})},{selfish:42}],12:[function(e,t,r){var n=e("selfish").Base;var i=n.extend({initialize:function(e){this.capacity=e;this.q=[]},offer:function(e){var t=this.size()<this.capacity;if(t){this.q.push(e)}return t},take:function(){return this.q.shift()},peek:function(){return this.q[0]},size:function(){return this.q.length},isEmpty:function(){return this.size()===0},clear:function(){this.q.length=0},iter:function(e){this.q.forEach(e)}});t.exports=i},{selfish:42}],13:[function(e,t,r){var n=e("selfish").Base,i=e("deployr"),o=e("d.js"),s=e("../rtask-type"),a=e("./rbroker-worker");t.exports=a.extend({initialize:function(e,t){a.initialize.call(this,e);this.ruser=t;this.job=null},work:function(e){var t=this,r=(new Date).getTime(),n=this.task.serialize(),o=n.rinputs||[],a=n.routputs||[];delete n.rinputs;delete n.routputs;this.resourceToken=e;return i.io("/r/job/submit").share(this.ruser.getCookies()).data(n).global(false).rinputs(o).routputs(a).promise().then(function(e){var n=e.get("job");t.job=n.job;return{task:t.task,result:{id:n.job,type:s.BACKGROUND,timeOnCode:0,timeOnServer:0,timeOnCall:(new Date).getTime()-r,success:true,failure:null}}})},terminate:function(e){if(e&&this.job){this.ruser.io("/r/job/cancel").data({job:this.job}).end();return true}else{return false}}})},{"../rtask-type":7,"./rbroker-worker":16,"d.js":19,deployr:21,selfish:42}],14:[function(e,t,r){var n=e("selfish").Base,i=e("deployr"),o=e("d.js"),s=e("../rtask-type"),a=e("./rbroker-worker");t.exports=a.extend({initialize:function(e,t){a.initialize.call(this,e);this.ruser=t;this.io=null},work:function(e){var t=this.task,r=(new Date).getTime(),n=this.task.serialize(),o=n.rinputs||[],a=n.routputs||[];delete n.rinputs;delete n.routputs;this.resourceToken=e;this.io=i.io("/r/repository/script/execute").share(this.ruser?this.ruser.getCookies():null).data(n).rinputs(o).routputs(a).global(false);return this.io.promise().then(function(e){e=e.deployr.response;var n=e.execution.timeTotal,i=e.project.project,o=e.execution.console,a=e.execution.results,u=e.execution.artifacts,c=e.workspace.objects,l=e.repository.files;return{task:t,result:{id:i,type:s.DISCRETE,success:true,timeOnCode:e.execution.timeCode,timeOnServer:n,timeOnCall:(new Date).getTime()-r,failure:null,interrupted:false,generatedConsole:o,generatedPlots:a,generatedFiles:u,generatedObjects:c,storedFiles:l}}})},terminate:function(e){if(e&&this.io&&this.isPending()){this.io.abort();this.io.destroy();this.io=null;return true}else{return false}}})},{"../rtask-type":7,"./rbroker-worker":16,"d.js":19,deployr:21,selfish:42}],15:[function(e,t,r){var n=e("selfish").Base,i=e("d.js"),o=e("merge"),s=e("deployr"),a=e("../rtask-type"),u=e("./rbroker-worker");t.exports=u.extend({initialize:function(e,t){u.initialize.call(this,e);this.ruser=t},work:function(e){var t=this.task,r=o({project:e,phantom:true},this.task.serialize()),n="/r/project/execute/"+(r.code?"code":"script"),i=r.rinputs||[],u=r.routputs||[],c=(new Date).getTime();delete r.rinputs;delete r.routputs;this.resourceToken=e;return s.io(n).share(this.ruser.getCookies()).data(r).rinputs(i).routputs(u).global(false).promise().then(function(e){e=e.deployr.response;var r=e.execution.console,n=e.execution.results,i=e.execution.artifacts,o=e.workspace.objects,s=e.repository.files;return{task:t,result:{id:e.project.project,type:a.POOLED,success:true,timeOnCode:e.execution.timeCode,timeOnServer:e.execution.timeTotal,timeOnCall:(new Date).getTime()-c,failure:null,interrupted:false,generatedConsole:r,generatedPlots:n,generatedFiles:i,generatedObjects:o,storedFiles:s}}})},terminate:function(e){if(e&&this.resourceToken&&this.isPending()){this.ruser.io("/r/project/execute/interrupt").data({project:this.resourceToken}).end();return true}else{return false}}})},{"../rtask-type":7,"./rbroker-worker":16,"d.js":19,deployr:21,merge:41,selfish:42}],16:[function(e,t,r){var n=e("selfish").Base,i=e("d.js");t.exports=n.extend({initialize:function o(e){this.task=e;this.defer=i()},work:function(e){},terminate:function(e){},isPending:function(){return this.defer.promise.isPending()},resolve:function(e){this.defer.resolve(e)},reject:function(e){this.defer.reject(e)}})},{"d.js":19,selfish:42}],17:[function(e,t,r){},{}],18:[function(e,t,r){var n=t.exports={};var i=[];var o=false;function s(){if(o){return}o=true;var e;var t=i.length;while(t){e=i;i=[];var r=-1;while(++r<t){e[r]()}t=i.length}o=false}n.nextTick=function(e){i.push(e);if(!o){setTimeout(s,0)}};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function a(){}n.on=a;n.addListener=a;n.once=a;n.off=a;n.removeListener=a;n.removeAllListeners=a;n.emit=a;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],19:[function(e,t,r){(function(e){(function(r){"use strict";var n,i=function(e){return typeof e==="function"},o=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},s=function(e){return!!(e&&(typeof e).match(/function|object/))},a=function(e){return e===false||e===r||e===null},u=function(e,t){return[].slice.call(e,t)},c="undefined",l=typeof TypeError===c?Error:TypeError;if(typeof e!==c&&e.nextTick){n=e.nextTick}else if(typeof MessageChannel!==c){var f=new MessageChannel,h=[];f.port1.onmessage=function(){h.length&&h.shift()()};n=function(e){h.push(e);f.port2.postMessage(0)}}else{n=function(e){setTimeout(e,0)}}function p(e){n(function(){throw e})}function d(e){return this.then(e,r)}function y(e){return this.then(r,e)}function m(e,t){return this.then(function(t){return i(e)?e.apply(null,o(t)?t:[t]):R.onlyFuncs?t:e},t||r)}function v(e){function t(){e()}this.then(t,t);return this}function g(e){return this.then(function(t){return i(e)?e.apply(null,o(t)?t.splice(0,0,undefined)&&t:[undefined,t]):R.onlyFuncs?t:e},function(t){return e(t)})}function j(e){return this.then(r,e?function(t){e(t);throw t}:p)}var R=function(e){var t=(r!==e?e:R.alwaysAsync)?n:function(e){e()},o=0,u=[],c,f={then:function(e,r){var n=R();u.push([function(t){try{if(a(e)){n.resolve(t)}else{n.resolve(i(e)?e(t):R.onlyFuncs?t:e)}}catch(r){n.reject(r)}},function(e){if(a(r)||!i(r)&&R.onlyFuncs){n.reject(e)}if(r){try{n.resolve(i(r)?r(e):r)}catch(t){n.reject(t)}}}]);o!==0&&t(h);return n.promise},success:d,error:y,otherwise:y,apply:m,spread:m,ensure:v,nodify:g,rethrow:j,isPending:function(){return!!(o===0)},getStatus:function(){return o}};f.toSource=f.toString=f.valueOf=function(){return c===r?this:c};function h(){if(o===0){return}var e=u,t=0,r=e.length,n=~o?0:1,i;u=[];for(;t<r;t++){(i=e[t][n])&&i(c)}}function p(e){var r=false;function n(e){return function(t){if(r){return undefined}else{r=true;return e(t)}}}if(o){return this}try{var a=s(e)&&e.then;if(i(a)){if(e===f){throw new l("Promise can't resolve itself")}a.call(e,n(p),n(T));return this}}catch(u){n(T)(u);return this}t(function(){c=e;o=1;h()});return this}function T(e){o||t(function(){try{throw e}catch(t){c=t}o=-1;h()});return this}return{promise:f,resolve:p,fulfill:p,reject:T}};R.deferred=R.defer=R;R.nextTick=n;R.alwaysAsync=true;R.onlyFuncs=true;R.resolved=R.fulfilled=function(e){return R(true).resolve(e).promise};R.rejected=function(e){return R(true).reject(e).promise};R.wait=function(e){var t=R();setTimeout(t.resolve,e||0);return t.promise};R.delay=function(e,t){var r=R();setTimeout(function(){try{r.resolve(e.apply(null))}catch(t){r.reject(t)}},t||0);return r.promise};R.promisify=function(e){if(e&&i(e.then)){return e}return R.resolved(e)};function T(e,t){var r=u(e);if(r.length===1&&o(r[0])){if(!r[0].length){return R.fulfilled([])}r=r[0]}var n=[],i=R(),s=r.length;if(!s){i.resolve(n)}else{var a=function(e){r[e]=R.promisify(r[e]);r[e].then(function(o){if(!(e in n)){n[e]=t?r[e]:o;--s||i.resolve(n)}},function(o){if(!(e in n)){if(!t){i.reject(o)}else{n[e]=r[e];--s||i.resolve(n)}}})};for(var c=0,l=s;c<l;c++){a(c)}}return i.promise}R.all=function(){return T(arguments,false)};R.resolveAll=function(){return T(arguments,true)};R.nodeCapsule=function(e,t){if(!t){t=e;e=void 0}return function(){var r=R(),n=u(arguments);n.push(function(e,t){e?r.reject(e):r.resolve(arguments.length>2?u(arguments,1):t)});try{t.apply(e,n)}catch(i){r.reject(i)}return r.promise}};typeof window!==c&&(window.D=R);typeof t!==c&&t.exports&&(t.exports=R)})()}).call(this,e("_process"))},{_process:18}],20:[function(e,t,r){t.exports={"/r/user/login":{method:"POST",format:"json"},"/r/user/logout":{method:"POST",format:"json"},"/r/user/about":{method:"POST",format:"json"},"/r/user/autosave":{method:"POST",format:"json"},"/r/user/release":{method:"POST",format:"json"},"/r/project/create":{method:"POST",format:"json"},"/r/project/pool":{method:"POST",format:"json"},"/r/project/recycle":{method:"POST",format:"json"},"/r/project/list":{method:"POST",format:"json"},"/r/project/ping":{method:"POST",format:"json"},"/r/project/about":{method:"POST",format:"json"},"/r/project/about/update":{method:"POST",format:"json"},"/r/project/save":{method:"POST",format:"json"},"/r/project/saveas":{method:"POST",format:"json"},"/r/project/close":{method:"POST",format:"json"},"/r/project/grant":{method:"POST",format:"json"},"/r/project/import":{method:"POST",format:"json",upload:true},"/r/project/export":{method:"POST",format:"json"},"/r/project/delete":{method:"POST",format:"json"},"/r/project/execute/code":{method:"POST",format:"json"},"/r/project/execute/script":{method:"POST",format:"json"},"/r/project/execute/interrupt":{method:"POST",format:"json"},"/r/project/execute/console":{method:"POST",format:"json"},"/r/project/execute/history":{method:"POST",format:"json"},"/r/project/execute/flush":{method:"POST",format:"json"},"/r/project/execute/result/list":{method:"POST",format:"json"},"/r/project/execute/result/download":{method:"POST",format:"json"},"/r/project/execute/result/delete":{method:"POST",format:"json"},"/r/project/workspace/list":{method:"POST",format:"json"},"/r/project/workspace/get":{method:"POST",format:"json"},"/r/project/workspace/upload":{method:"POST",format:"json",upload:true},"/r/project/workspace/transfer":{method:"POST",format:"json"},"/r/project/workspace/push":{method:"POST",format:"json"},"/r/project/workspace/save":{method:"POST",format:"json"},"/r/project/workspace/store":{method:"POST",format:"json"},"/r/project/workspace/load":{method:"POST",format:"json"},"/r/project/workspace/delete":{method:"POST",format:"json"},"/r/project/directory/list":{method:"POST",format:"json"},"/r/project/directory/upload":{method:"POST",format:"json",upload:true},"/r/project/directory/transfer":{method:"POST",format:"json"},"/r/project/directory/write":{method:"POST",format:"json"},"/r/project/directory/update":{method:"POST",format:"json"},"/r/project/directory/store":{method:"POST",format:"json"},"/r/project/directory/load":{method:"POST",format:"json"},"/r/project/directory/download":{method:"POST",format:"json"},"/r/project/directory/delete":{method:"POST",format:"json"},"/r/project/package/list":{method:"POST",format:"json"},"/r/project/package/attach":{method:"POST",format:"json"},"/r/project/package/detach":{method:"POST",format:"json"},"/r/job/list":{method:"POST",format:"json"},"/r/job/submit":{method:"POST",format:"json"},"/r/job/schedule":{method:"POST",format:"json"},"/r/job/query":{method:"POST",format:"json"},"/r/job/cancel":{method:"POST",format:"json"},"/r/job/delete":{method:"POST",format:"json"},"/r/repository/directory/list":{method:"POST",format:"json"},"/r/repository/directory/create":{method:"POST",format:"json"},"/r/repository/directory/rename":{method:"POST",format:"json"},"/r/repository/directory/copy":{method:"POST",format:"json"},"/r/repository/directory/move":{method:"POST",format:"json"},"/r/repository/directory/update":{method:"POST",format:"json"},"/r/repository/script/list":{method:"POST",format:"json"},"/r/repository/script/execute":{method:"POST",format:"json"},"/r/repository/script/render":{method:"POST",format:"json"},"/r/repository/script/interrupt":{method:"POST",format:"json"},"/r/repository/shell/execute":{method:"POST",format:"json"},"/r/repository/directory/archive":{method:"POST",format:"json"},"/r/repository/directory/upload":{method:"POST",format:"json",upload:true},"/r/repository/directory/download":{method:"POST",format:"json"},"/r/repository/directory/delete":{method:"POST",format:"json"},"/r/repository/file/list":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/upload":{method:"POST",format:"json",upload:true},"/r/repository/file/transfer":{method:"POST",format:"json"},"/r/repository/file/write":{method:"POST",format:"json"},"/r/repository/file/update":{method:"POST",format:"json"},"/r/repository/file/diff":{method:"POST",format:"json"},"/r/repository/file/revert":{method:"POST",format:"json"},"/r/repository/file/grant":{method:"POST",format:"json"},"/r/repository/file/download":{method:"POST",format:"json"},"/r/repository/file/delete":{method:"POST",format:"json"},"/r/repository/file/copy":{method:"POST",format:"json"},"/r/repository/file/move":{method:"POST",format:"json"},"/r/server/info":{method:"GET",format:"json"}}},{}],21:[function(e,t,r){(function(r){var n=typeof window!=="undefined",i=e("superagent"),o=e("d.js"),s=e("fs"),a=e("./apis.json"),u=e("./lib/es"),c=e("./lib/utils"),l=e("./lib/lang"),f=e("./lib/logger"),h=e("./lib/queue"),p=e("./lib/emitter"),d=e("./lib/encoder"),y=e("./lib/selfish").Base,m=e("./lib/rinput"),v=e("./lib/rinputs"),g=c.merge;f.setLevel(f.OFF);var j={cors:false,logging:false,sticky:false,cookies:null,host:"",allowSelfSignedSSLCert:false,maxRequests:null,events:{},set:function(e,t){if(e!=="set"){if(e==="host"&&t){t=t.replace(/\/*$|\/*deployr\/*$/,"");t=new RegExp("^(http|https)://","i").test(t)?t:"http://"+t}this[e]=t}}};var R=["user","project","workspace","execution","directory","repository","packages"];function T(e,t){var r=t.deployr?t.deployr.response.errorCode:t.status,n=this;if(j.events){if(!t.deployr){t=t.text}n=j.events.ctx||n;if(j.events.error){j.events.error.apply(n,[e,t])}if(j.events[r]){j.events[r].apply(n,[e,t])}}}var b=y.extend(p,v,{initialize:function w(e,t){p.initialize.call(this,{});var s=j;if(!a[e]){throw new Error('Invalid API "'+e+'"')}this.api=g({call:e},a[e]);this.link=t||{};this.q=this.link.queue||new h;this.deferred=this.link.deferred||o();this.cookies=this.link.cookies;this.logger=f.get(e,f.OFF);this.params={};this.inputs=[];this.outputs=[];this.rstream=false;this.delayed=false;this.globalEvts=true;this.file=null;this.filter=null;this.data({format:this.api.format});this.req=i[this.api.method.toLowerCase()](s.host+"/deployr"+e);this.req.timeout(20*60*1e3);if(n&&j.cors){this.req.withCredentials()}if(!n&&j.allowSelfSignedSSLCert){r.env.NODE_TLS_REJECT_UNAUTHORIZED="0"}},ctx:function(e){this.scope=e||this;return this},global:function(e){this.globalEvts=l.isBoolean(e)?e:this.globalEvts;return this},about:function(){var e=this.req.res;return this.api["call"]==="/r/user/login"&&e?e.body.get("user"):null},share:function(e){if(j.sticky){if(j.cookies){this.cookies=j.cookies.slice(0)}else{if(e){this.cookies=e.slice(0);j.set("cookies",this.cookies)}}}else{this.cookies=e?e.slice(0):this.cookies}return this},getCookies:function(){return this.cookies},delay:function(e){this.delayed=!isNaN(parseFloat(e))&&isFinite(e)?e:true;return this},drain:function(){this.delayed=false;this.q.flush();return this.deferred.promise},promise:function(){this.end();return this.deferred.promise},abort:function(){this.req.abort();this.emit("abort");this.deferred.reject(this._handleError({status:"abort",text:"DeployR request aborted."}));return this},timeout:function(e){this.req.timeout(e);return this},log:function(e){this.logger.setLevel(e||f.DEBUG);return this},entity:function(e){this.filter=c.inArray(R,e);return this},data:function(e){e=e||{};if(e.rinput||e.rinputs){this.rinput(e.rinput);this.rinputs(e.rinputs)}var t=["rinput","rinputs","__cookies__"];t.forEach(function(t){delete e[t]});this.params=g(this.params,e);return this},attach:function(e,t){if(this.api.upload){this.file=e;if(t){this.data({filename:t})}}return this},stream:function(){this.rstream=!n&&this.api.upload;return this},ensure:function(e){this.deferred.promise.ensure(e);return this.deferred.promise},error:function(e){this.on("error",e);return this},pipe:function(e){var t=this.q,r=this.api;t.add(function(n,i,o){if(i){this.deferred.reject(i);t.flush(n,i,o);this._clear();return}this._prepRequest(n,o);f.info("pipe()",r,this.req);this.logger.info("pipe()",r,this.req);var s=this.req.pipe(e);t.yield(true);s.on("error",function(){});s.on("end",function(){});s.on("data",function(){})},this);if(t.size()<=1){t.flush()}return e},end:function(e){var t=this,r=this.q,n=this.api,i=null,o=this.filter;r.add(function(s,a,u){if(a){this.deferred.reject(a);r.flush(s,a,u);this._clear();return}this._prepRequest(s,u);f.info("io()",n,this.req);this.logger.info("io()",n,this.req);this.req.end(function(u){t.share(t.cookies||u.headers["set-cookie"]);if(t.cookies){f.info("cookies",n,t.cookies);t.logger.info("cookies",n,t.cookies)}a=t._handleError(u);var l=u.body&&u.body.deployr?u.body:u;t.inputs=[];t.outputs=[];if(!a){f.info("end()",n,l,u);t.logger.info("end()",n,l,u);if(o){l=l.deployr.response[o]||l}l.get=function(e){return c.get(l.deployr.response,e)};l.workspace=function(e){return c.workspace(l.deployr.response,e)};if(e){i=e.apply(t.scope,[l,s])}if(r.size()===0){t._clear();t.deferred.resolve(s||l)}i=g(i,{__cookies__:t.cookies})}r.yield(false);r.flush(l,a,i)});r.yield(true)},this,this.delayed);if(!this.delayed&&r.size()<=1){r.flush()}return this},io:function(e){return b.new(e,{cookies:this.cookies,queue:this.q,deferred:this.deferred})},script:function(){var e=c.signature(arguments),t=e.opts,r=e.api,n={cookies:this.cookies,queue:this.q,deferred:this.deferred};if(e.create){return b.new("/r/project/create",n).end(function(e){return{project:e.get("project").project}}).io(r).data(t)}else{return b.new(r,n).data(t)}},shell:function(e,t){var r={cookies:this.cookies,queue:this.q,deferred:this.deferred},n=l.isString(e)?e.split("/"):[];if(n.length>3){n=n.slice(1)}return b.new("/r/repository/shell/execute",r).data({author:n[0],directory:n[1],filename:n[2],args:t})},code:function(e,t){var r={cookies:this.cookies,queue:this.q,deferred:this.deferred},n="/r/project/execute/code";if(!t){return b.new("/r/project/create",r).end(function(e){return{project:e.get("project").project}}).io(n).data({code:e})}else{return b.new(n,r).data({code:e,project:t})}},release:function(e,t){e=l.isArray(e)?e:[e];var r=this,n=o(),i=!e||!e[0],s=0,a=!i?e.length-1:s,u=this.getCookies();function c(e){if(e===a){if(!t){b.new("/r/user/logout").share(u).error(function(){n.reject(false)}).end(function(){n.resolve(true)}).ensure(function(){r.destroy()})}else{n.resolve(true);r.destroy()}}}if(!i){e.forEach(function(e){b.new("/r/project/close").data({project:e}).share(u).end().ensure(function(){c(s);s++})})}else{c(s)}return n.promise},routputs:function(e){if(e){this.outputs=this.outputs.concat(e)}return this},routput:function(e){if(e){this.routputs([e])}return this},rinputs:function(e){if(e){this.inputs=this.inputs.concat(e)}return this},rinput:function(e){if(e){this.inputs.push(e)}return this},destroy:function(){try{this.emit("destroy");this.offAll();for(var e in this){if(this.hasOwnProperty(e)){this[e]=null;delete this[e]}}}catch(t){}},_clear:function(){this.params={};this.inputs=[];this.outputs=[];this.rstream=false;this.delayed=false;this.api=null;this.file=null;this.filter=null},_prepRequest:function(e,t){var r=this.req,i=this.file;if(this.api.upload){if(!n){this.req.type("multipart/form-data")}}else{r.type("form")}r.on("error",function(e){e=e||{code:"UNKNOWN CODE",text:"UNKNOWN ERROR"};this._handleError({status:e.code||"UNKNOWN CODE",text:e})}.bind(this));this.share(t?t.__cookies__:null);if(t){this.data(t)}if(this.inputs.length>0){this.data({inputs:d.encode(this.inputs)})}if(this.outputs.length>0){this.data({robjects:this.outputs.join()})}if(this.cookies){this.cookies.forEach(function(e){r.set("Cookie",e)})}if(this.api.upload){for(var o in this.params){r.field(o,this.params[o]?this.params[o]+"":"")}r.attach("file",this.rstream?s.createReadStream(i):i)}else{r[this.api.method==="GET"?"query":"send"](this.params)}},_handleError:function(e){var t=e.status,r=e.body&&e.body.deployr?e.body:e,n=t!==200||r.deployr&&!r.deployr.response.success;if(n){r={get:function(e){return c.get(this.deployr.response,e)},deployr:{response:{success:false,call:this.api["call"],errorCode:r.deployr?r.deployr.response.errorCode:t,error:r.deployr?r.deployr.response.error:r.text}}};f.error("error()",this.api,r,e);this.logger.error("error()",this.api,r,e);if(this.globalEvts){T(this.api["call"],r)}this.emit("error",r);this.emit("deployr-io:"+r.deployr.response.errorCode,r);this.deferred.reject(r)}return n}});if(n){window.Revolution=window.Revolution||e("./lib/deprecated")}t.exports={DeployR:b,
apis:function(e){return e?Object.keys(a):a},configure:function(e){e=e||{};for(var t in e){j.set(t,e[t])}if(!j.sticky){j.set("cookies",null)}f.setLevel(j.logging?f.DEBUG:f.OFF);return this},io:function(e){return b.new(e)},auth:function(e,t){var r={username:e,password:t};return b.new("/r/user/login").data(r).end()},script:function(){var e=c.signature(arguments),t=e.opts,r=e.api;if(e.create){return b.new("/r/project/create").end(function(e){return{project:e.get("project").project}}).io(r).data(t)}else{return b.new(r).data(t)}},pipeline:function(e){var t=this,r=o(),n=new h,i=[],s=[],a=null,u={sticky:j.sticky,cookies:j.cookies};e=e.slice(0);t.configure({sticky:true});function c(){n.add(function(){e.shift().drain().then(function(e){i.push(e);s.push(a);if(n.isEmpty()){t.configure(u);r.resolve({results:i,errors:s})}n.take()},function(e){i.push(a);s.push(e);if(n.isEmpty()&&i.length===0){t.configure(u);r.reject(s)}n.take()})},null,true)}for(var l=0;l<e.length;l++){c()}n.take();return r.promise},es:function(e){var t=u.new(j.host,e);if(e&&e.username&&e.password){var r=this.auth(e.username,e.password);r.ensure(function(){t.share(r.getCookies());t.flush()})}return t},RInput:{numeric:function(e,t){return m.new(e,t).numeric()},integer:function(e,t){return m.new(e,t).integer()},logical:function(e,t){return m.new(e,t).logical()},character:function(e,t){return m.new(e,t).character()},date:function(e,t){return m.new(e,t).date()},posixct:function(e,t){return m.new(e,t).posixct()},numericVector:function(e,t){return m.new(e,t).numericVector()},integerVector:function(e,t){return m.new(e,t).integerVector()},logicalVector:function(e,t){return m.new(e,t).logicalVector()},characterVector:function(e,t){return m.new(e,t).characterVector()},dateVector:function(e,t){return m.new(e,t).dateVector()},posixctVector:function(e,t){return m.new(e,t).posixctVector()},list:function(e,t){return m.new(e,t).list()},dataframe:function(e,t){return m.new(e,t).dataframe()},factor:function(e,t,r,n){var i={levels:r,labels:n};return m.new(e,t,i).factor()},ordered:function(e,t,r,n){var i={levels:r,labels:n};return m.new(e,t,i).ordered()},numericMatrix:function(e,t){return m.new(e,t).numericMatrix()},integerMatrix:function(e,t){return m.new(e,t).integerMatrix()},logicalMatrix:function(e,t){return m.new(e,t).logicalMatrix()},characterMatrix:function(e,t){return m.new(e,t).characterMatrix()}}}}).call(this,e("_process"))},{"./apis.json":20,"./lib/deprecated":22,"./lib/emitter":23,"./lib/encoder":24,"./lib/es":25,"./lib/lang":26,"./lib/logger":27,"./lib/queue":29,"./lib/rinput":30,"./lib/rinputs":31,"./lib/selfish":33,"./lib/utils":34,_process:18,"d.js":19,fs:17,superagent:35}],22:[function(e,t,r){var n=e("./lang"),i=e("./selfish").Base,o=e("./rinput");var s,a,u={},c=["user","project","workspace","execution","directory","repository","packages"];var l={ENDPOINT_WHITELIST:{login:"/r/user/login",logout:"/r/user/logout",projectCreate:"/r/project/create",projectClose:"/r/project/close",projectAboutUpdate:"/r/project/about/update",projectSave:"/r/project/save",projectSaveAs:"/r/project/saveas",clientProjectSave:"/r/client/project/save",clientProjectClose:"/r/client/project/close"},session:{},config:{},setUnloadConfig:function(e){e=e||{};this.config={disableautosave:e.disableautosave||true,dropworkspace:e.dropworkspace||true,dropdirectory:e.dropdirectory||true,drophistory:e.drophistory||true,flushhistory:e.flushhistory||true}},setSession:function(e){this.session=e},setProject:function(e){this.session.project=e},clearSession:function(){this.session={}},clearProject:function(){this.session.project=null},unloadHandler:function(){try{var e=this.session.project;if(e){var t=this._config;t.project=e.id;t.projectcookie=e.cookie;deployr.io("/r/project/close").data(t).sync().end()}}catch(r){throw new Error(r)}}};function f(e,t){var r=t||globalConfig.entity;if(r){var n=e.deployr.response,i=c;for(var o=0;o<i.length;o++){var s=i[o];if(n[s]&&r[s]){if(r[s].parser){var a=r[s].scope||this;n[s]=r[s].parser.call(a,n[s])}}}}return e}function h(e,t,r){var n=e.deployr.response,i=l.ENDPOINT_WHITELIST;switch(t){case i.login:l.setSession({httpcookie:n.httpcookie,user:n.user,limits:n.limits,project:null});break;case i.logout:l.clearSession();break;case i.projectClose:case i.clientProjectClose:l.clearProject();break;case i.projectCreate:case i.projectAboutUpdate:case i.projectSave:case i.projectSaveAs:case i.clientProjectSave:var o=n.project;l.setProject({id:o.project,cookie:o.cookie});break}s.Event.fire("DeployR:endpointChange",{response:e,endpoint:t,args:r})}function p(e){e=e.replace("/r/","");return e.toLowerCase().replace(/\/(.)/g,function(e,t){return t.toUpperCase()})}function d(e){var t=[];for(var r=0;r<e.length;r++){t.push(e[r].normalize())}return t}var y=i.extend({initialize:function(e,t,r){this.type=e;this.rclass=t;this.rinput=r},getType:function(){return this.type},getRClass:function(){return this.rclass},getName:function(){return this.rinput.name},getValue:function(){return this.rinput.value},getLevels:function(){return this.rinput.levels},getLabels:function(){return this.rinput.labels},getOrdered:function(){return this.rinput.ordered},normalize:function(){return this.rinput}});function m(e){}function v(e){}m.prototype={events:{},scope:null,on:function(e,t){if(e in this.events===false){this.events[e]=[]}this.events[e].push(t);v('Emitter.on("'+e+'")');return this},emit:function(e){if(e in this.events===false){return this}for(var t=0;t<this.events[e].length;t++){v('Fired event: "'+e+'"');this.events[e][t].apply(this.scope||this,Array.prototype.slice.call(arguments,1))}return this},removeAllListeners:function(e){if(!e){for(var t in this.events){delete this.events[t]}}else{if(e in this.events===false){return this}delete this.events[e]}return this},removeListenerAt:function(e,t){var r=this.events[e],n=r.slice(t+1);r.length=t;r.push.apply(r,n);this.events[e]=r},off:function(e,t){if(e in this.events===false){return this}if(!t){return this.removeAllListeners(e)}else{for(var r=0;r<this.events[e].length;r++){if(this.events[e][r]==t){this.removeListenerAt(e,r);return this}}}return this}};a=new m;s={version:e("../package").version,Event:{on:function(e,t,r){a.on(e,t,r)},detach:function(e,t,r){a.off(e,t)}},RDataFactory:{createNumeric:function(e,t){return y.new("primitive","numeric",o.new(e,t).numeric())},createInteger:function(e,t){return y.new("primitive","integer",o.new(e,t).integer())},createBoolean:function(e,t){return y.new("primitive","numeric",o.new(e,t).logical())},createString:function(e,t){return y.new("primitive","character",o.new(e,t).character())},createDate:function(e,t){return y.new("date","Date",o.new(e,t).date())},createPOSIXDate:function(e,t){return y.new("date","POSIXct",o.new(e,t).posixct())},createNumericVector:function(e,t){return y.new("vector","numeric",o.new(e,t).numericVector())},createIntegerVector:function(e,t){return y.new("vector","integer",o.new(e,t).integerVector())},createBooleanVector:function(e,t){return y.new("vector","logical",o.new(e,t).logicalVector())},createStringVector:function(e,t){return y.new("vector","character",o.new(e,t).characterVector())},createDateVector:function(e,t){return y.new("type","Date",o.new(e,t).dateVector())},createPOSIXDateVector:function(e,t){return y.new("vector","POSIXct",o.new(e,t).posixctVector())},createList:function(e,t){return y.new("list","list",o.new(e,t).list())},createDataframe:function(e,t){return y.new("dataframe","data.frame",o.new(e,t).dataframe())},createFactor:function(e,t,r,n,i){var s={levels:n,labels:i};if(r){return y.new("factor","factor",o.new(e,t,s).ordered())}else{return y.new("factor","factor",o.new(e,t,s).factor())}},createNumericMatrix:function(e,t){return y.new("matrix","matrix",o.new(e,t).numericMatrix())},createIntegerMatrix:function(e,t){return y.new("matrix","matrix",o.new(e,t).integerMatrix())},createBooleanMatrix:function(e,t){return y.new("matrix","matrix",o.new(e,t).logicalMatrix())},createStringMatrix:function(e,t){return y.new("matrix","matrix",o.new(e,t).characterMatrix())}},DeployR:{init:function(e){e=e||{};if(e.compatibility){}if(e.events){var t=e.events;if(t.unload){l.setUnloadConfig(t.unload);s.Event.on("deployR:unload",l.unloadHandler,l)}if(t.globalIO){var r=t.globalIO.scope||window,n=t.globalIO.lifecycle,i=t.globalIO.statusCode;if(n){for(var o in n){s.Event.on("deployR-io:"+o,n[o],r)}}if(i){for(var o in i){s.Event.on("deployR-io:"+o,i[o],r)}}}}deployr.configure({host:e.deployrURI,cors:e.deployrURI?true:false,logging:e.logging,sticky:true})},io:function(e,t,r){if(console){console.warn('"'+p(e)+'()" API is now deprecated.')}r=r||{};t=t||{};var n=t.transaction||{},i=n["arguments"],o=n.statusCode||{},s=r.scope||window,u=t.robjects,c=t.inputs;if(t.transaction){delete t.transaction}if(t.method){delete t.method}if(t.on){delete t.on}if(t.format){delete t.format}if(t.inputs){delete t.inputs}if(t.robjects){delete t.robjects}var l=deployr.io(e).data(t||{}).error(function(t){a.emit("deployR-io:failure",[t,e,i]);if(r.failure){r.failure.apply(s,[t,e,i])}a.emit("deployR-io:"+code,[t,e,i])});if(c){l.rinputs(d(c))}if(u){l.routputs(u)}if(n.sync){l.sync()}if(n.timeout){l.timeout(n.timeout)}if(o){for(var h in o){l.on("deployr-io:"+h,function(t){var r=o;var n=t.deployr.response.error;var a=t.deployr.response.errorCode;r[a].apply(s,[t,a,n,e,i])})}}a.emit("deployR-io:start");if(r.start){r.start.apply(s,[e,i])}l.end(function(t){a.emit("deployR-io:complete");if(r.complete){r.complete.apply(s,[t,e,i])}if(n.entity){t=f(t,n.entity)}a.emit("deployR-io:success",[t,e]);if(r.success){r.success.apply(s,[t,e,i])}a.emit("deployR-io:end",[t,e]);if(r.end){r.end.apply(s,[t,e,i])}});return l},parseInputs:function(e){return e},projectWorkspaceList:function(e,t){return this.io("/r/project/workspace/list",e,t)},projectWorkspaceGet:function(e,t){return this.io("/r/project/workspace/get",e,t)},projectWorkspaceUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/workspace/upload",e,t)},projectWorkspaceTransfer:function(e,t){return this.io("/r/project/workspace/transfer",e,t)},projectWorkspacePush:function(e,t){return this.io("/r/project/workspace/push",e,t)},projectWorkspaceSave:function(e,t){return this.io("/r/project/workspace/save",e,t)},projectWorkspaceStore:function(e,t){return this.io("/r/project/workspace/store",e,t)},projectWorkspaceLoad:function(e,t){return this.io("/r/project/workspace/load",e,t)},projectWorkspaceDelete:function(e,t){return this.io("/r/project/workspace/delete",e,t)},projectCreate:function(e,t){return this.io("/r/project/create",e,t)},projectPool:function(e,t){return this.io("/r/project/pool",e,t)},projectRecycle:function(e,t){return this.io("/r/project/recycle",e,t)},projectList:function(e,t){return this.io("/r/project/list",e,t)},projectPing:function(e,t){return this.io("/r/project/ping",e,t)},projectAbout:function(e,t){return this.io("/r/project/about",e,t)},projectAboutUpdate:function(e,t){return this.io("/r/project/about/update",e,t)},projectSave:function(e,t){return this.io("/r/project/save",e,t)},projectSaveas:function(e,t){return this.io("/r/project/saveas",e,t)},projectClose:function(e,t){return this.io("/r/project/close",e,t)},projectGrant:function(e,t){return this.io("/r/project/grant",e,t)},projectImport:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/import",e,t)},projectExport:function(e,t){return this.io("/r/project/export",e,t)},projectDelete:function(e,t){return this.io("/r/project/delete",e,t)},projectExecuteCode:function(e,t){return this.io("/r/project/execute/code",e,t)},projectExecuteScript:function(e,t){return this.io("/r/project/execute/script",e,t)},projectExecuteInterrupt:function(e,t){return this.io("/r/project/execute/interrupt",e,t)},projectExecuteConsole:function(e,t){return this.io("/r/project/execute/console",e,t)},projectExecuteHistory:function(e,t){return this.io("/r/project/execute/history",e,t)},projectExecuteFlush:function(e,t){return this.io("/r/project/execute/flush",e,t)},projectExecuteResultList:function(e,t){return this.io("/r/project/execute/result/list",e,t)},projectExecuteResultDownload:function(e,t){return this.io("/r/project/execute/result/download",e,t)},projectExecuteResultDelete:function(e,t){return this.io("/r/project/execute/result/delete",e,t)},projectDirectoryList:function(e,t){return this.io("/r/project/directory/list",e,t)},projectDirectoryUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/directory/upload",e,t)},projectDirectoryTransfer:function(e,t){return this.io("/r/project/directory/transfer",e,t)},projectDirectoryWrite:function(e,t){return this.io("/r/project/directory/write",e,t)},projectDirectoryUpdate:function(e,t){return this.io("/r/project/directory/update",e,t)},projectDirectoryStore:function(e,t){return this.io("/r/project/directory/store",e,t)},projectDirectoryLoad:function(e,t){return this.io("/r/project/directory/load",e,t)},projectDirectoryDownload:function(e,t){return this.io("/r/project/directory/download",e,t)},projectDirectoryDelete:function(e,t){return this.io("/r/project/directory/delete",e,t)},projectPackageList:function(e,t){return this.io("/r/project/package/list",e,t)},projectPackageAttach:function(e,t){return this.io("/r/project/package/attach",e,t)},projectPackageDetach:function(e,t){return this.io("/r/project/package/detach",e,t)},userLogin:function(e,t){return this.io("/r/user/login",e,t)},userLogout:function(e,t){return this.io("/r/user/logout",e,t)},userAbout:function(e){return this.io("/r/user/about",{},e)},userAutosave:function(e,t){return this.io("/r/user/autosave",e,t)},repositoryScriptList:function(e){return this.io("/r/repository/script/list",{},e)},repositoryScriptExecute:function(e,t){return this.io("/r/repository/script/execute",e,t)},repositoryScriptRender:function(e,t){return this.io("/r/repository/script/render",e,t)},repositoryScriptInterrupt:function(e){return this.io("/r/repository/script/interrupt",config,e)},repositoryFileList:function(e,t){return this.io("/r/repository/file/list",e,t)},repositoryFileUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/repository/file/upload",e,t)},repositoryFileTransfer:function(e,t){return this.io("/r/repository/file/transfer",e,t)},repositoryFileWrite:function(e,t){return this.io("/r/repository/file/write",e,t)},repositoryFileUpdate:function(e,t){return this.io("/r/repository/file/update",e,t)},repositoryFileRevert:function(e,t){return this.io("/r/repository/file/revert",e,t)},repositoryFileDiff:function(e,t){return this.io("/r/repository/file/diff",e,t)},repositoryFileGrant:function(e,t){return this.io("/r/repository/file/grant",e,t)},repositoryFileDownload:function(e,t){return this.io("/r/repository/file/download",e,t)},repositoryFileDelete:function(e,t){return this.io("/r/repository/file/delete",e,t)},repositoryFileFetch:function(e,t){return this.io("/r/repository/file/fetch",e,t)},repositoryFileCopy:function(e,t){return this.io("/r/repository/file/copy",e,t)},repositoryFileMove:function(e,t){return this.io("/r/repository/file/move",e,t)},repositoryDirectoryList:function(e,t){return this.io("/r/repository/directory/list",e,t)},repositoryDirectoryCreate:function(e,t){return this.io("/r/repository/directory/create",e,t)},repositoryDirectoryRename:function(e,t){return this.io("/r/repository/directory/rename",e,t)},repositoryDirectoryCopy:function(e,t){return this.io("/r/repository/directory/copy",e,t)},repositoryDirectoryMove:function(e,t){return this.io("/r/repository/directory/move",e,t)},repositoryDirectoryUpdate:function(e,t){return this.io("/r/repository/directory/update",e,t)},repositoryDirectoryArchive:function(e,t){return this.io("/r/repository/directory/archive",e,t)},repositoryDirectoryUpload:function(e,t){e=e||{};e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/repository/directory/upload",e,t)},repositoryDirectoryDownload:function(e,t){return this.io("/r/repository/directory/download",e,t)},repositoryDirectoryDelete:function(e,t){return this.io("/r/repository/directory/delete",e,t)},jobList:function(e,t){return this.io("/r/job/list",e,t)},jobSubmit:function(e,t){return this.io("/r/job/submit",e,t)},jobSchedule:function(e,t){return this.io("/r/job/schedule",e,t)},jobQuery:function(e,t){return this.io("/r/job/query",e,t)},jobCancel:function(e,t){return this.io("/r/job/list",e,t)},jobDelete:function(e,t){return this.io("/r/job/delete",e,t)}}};t.exports=s},{"../package":38,"./lang":26,"./rinput":30,"./selfish":33}],23:[function(e,t,r){var n=e("./selfish").Base;function i(e){}t.exports=n.extend({initialize:function(){this.events={};this.scope=null},on:function(e,t){if(e in this.events===false){this.events[e]=[]}this.events[e].push(t);i('Emitter.on("'+e+'")');return this},emit:function(e){if(e in this.events===false){return this}for(var t=0;t<this.events[e].length;t++){i('Fired event: "'+e+'"');this.events[e][t].apply(this.scope||this,Array.prototype.slice.call(arguments,1))}return this},offAll:function(e){if(!e){for(var t in this.events){delete this.events[t]}}else{if(e in this.events===false){return this}delete this.events[e]}return this},offAt:function(e,t){var r=this.events[e],n=r.slice(t+1);r.length=t;r.push.apply(r,n);this.events[e]=r},off:function(e,t){if(e in this.events===false){return this}if(!t){return this.offAll(e)}else{for(var r=0;r<this.events[e].length;r++){if(this.events[e][r]==t){this.offAt(e,r);return this}}}return this}})},{"./selfish":33}],24:[function(e,t,r){var n=e("./lang"),i=e("./rtypes"),o=i.r,s=i.deployr;function a(e,t){var r=[];for(var n=0;n<e.length;n++){r.push(u(e[n],t))}return r}function u(e,t){var r=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),o=e.getHours(),a=e.getMinutes(),u=e.getSeconds(),c=e.getTimezoneOffset(),l="";n=n<10?"0"+n:n;o=o<10?"0"+o:o;a=a<10?"0"+a:a;u=u<10?"0"+u:u;l=r+"-"+n+"-"+i;function f(e,t,r){var n=""+Math.abs(e),i=e>=0;while(n.length<t){n="0"+n}return(i?r?"+":"":"-")+n}if(t===s.RPOSIX_DATE||t===s.RPOSIX_DATE_VECTOR){var h=o+":"+a+":"+u,p=-c,d="+";if(p<0){p=-p;d="-"}c=d+f(p/60,2)+""+f(p%60,2);l+=" "+h+" "+c}return l}function c(e,t){var r=e.value;for(var o=0;o<r.length;o++){var l=r[o];if(l.type===s.RDATAFRAME){t=c(l,t)}else{if(i.isDate(l.type)){if(n.isArray(l.value)){l.value=a(l.value,l.type)}else{l.value=u(l.value,l.type)}}l.type=i.deployrToR(l.type);t.value.push(l)}}return t}function l(e){var t={type:o.DATAFRAME,value:[],name:e.name},r=e.value;for(var l=0;l<r.length;l++){var f=r[l];if(f.type===s.RDATAFRAME){t=c(f,t)}else{if(i.isDate(f.type)){if(n.isArray(f.value)){f.value=a(f.value,f.type)}else{f.value=u(f.value,f.type)}}f.type=i.deployrToR(f.type);t.value.push(f)}}return t}function f(e){var t={type:o.LIST,value:[],name:e.name},r=e.value,n;for(var i=0;i<r.length;i++){var c=r[i];switch(c.type){case s.RDATAFRAME:n=l(c);break;case s.RLIST:n=f(c);break;case s.RNUMERIC_MATRIX:case s.RINTEGER_MATRIX:case s.RBOOLEAN_MATRIX:case s.RSTRING_MATRIX:n={name:c.name,type:o.MATRIX,value:c.value};break;case s.RDATE:case s.RPOSIX_DATE:n={name:c.name,type:o.DATE,format:c.format,value:u(c.value,c.type)};break;case s.RFACTOR:case s.RORDERED:n={name:c.name,type:o.FACTOR,ordered:c.ordered,labels:c.labels,levels:c.levels,value:c.value};break;case s.RSTRING:case s.RBOOLEAN:case s.RNUMERIC:case s.RINTEGER:n={name:c.name,type:o.PRIMITIVE,value:c.value};break;case s.RNUMERIC_VECTOR:case s.RINTEGER_VECTOR:case s.RBOOLEAN_VECTOR:case s.RSTRING_VECTOR:n={name:c.name,type:o.VECTOR,value:c.value};break;case s.RDATE_VECTOR:case s.RPOSIX_DATE_VECTOR:n={name:c.name,type:o.VECTOR,value:a(c.value,c.type),format:c.format};break;default:throw new Error('No RDataType found for "'+c.type+'"');break}t.value.push(n)}return t}t.exports={encode:function(e){var t={};for(var r=0;r<e.length;r++){var n=e[r];switch(n.type){case s.RDATAFRAME:t[n.name]=l(n);break;case s.RLIST:t[n.name]=f(n);break;case s.RNUMERIC_MATRIX:case s.RINTEGER_MATRIX:case s.RBOOLEAN_MATRIX:case s.RSTRING_MATRIX:t[n.name]={type:o.MATRIX,value:n.value};break;case s.RDATE:case s.RPOSIX_DATE:t[n.name]={type:o.DATE,format:n.format,value:u(n.value,n.type)};break;case s.RFACTOR:case s.RORDERED:t[n.name]={type:o.FACTOR,ordered:n.ordered,labels:n.labels,levels:n.levels,value:n.value};break;case s.RSTRING:case s.RBOOLEAN:case s.RNUMERIC:case s.RINTEGER:t[n.name]={type:o.PRIMITIVE,value:n.value};break;case s.RNUMERIC_VECTOR:case s.RINTEGER_VECTOR:case s.RBOOLEAN_VECTOR:case s.RSTRING_VECTOR:t[n.name]={type:o.VECTOR,value:n.value};break;case s.RDATE_VECTOR:case s.RPOSIX_DATE_VECTOR:t[n.name]={type:o.VECTOR,value:a(n.value,n.type),format:n.format};break;default:throw new Error('No RDataType found for "'+n.type+'"');break}}return JSON.stringify(t)}}},{"./lang":26,"./rtypes":32}],25:[function(e,t,r){var n=e("./optional"),i=n("ws"),o=e("./queue"),s=e("./emitter"),a=e("./selfish").Base,u=e("./utils").merge;var c=a.extend(s,{initialize:function l(e,t){s.initialize.call(this,{});this.host=e;this.options=t||{};this.options.log=this.options.log||this.LOG.error;this.ws=null;this.q=new o;this.channel={}},LOG:{info:"info",debug:"debug",error:"error"},open:function(e){var t=this,r=(this.host||"")+"/deployr/r/event/stream?",n=[];e=e||{};e.headers=e.headers||{};e=this.options=u(e,this.channel);this.cookies=!this.cookies?e.headers.Cookie:this.cookies;if(e.project){n.push("project="+e.project)}else{if(e.job){n.push("job="+e.job)}}if(e.management){n.push("managementEventOnly=true")}else{if(e.httponly){n.push("httpEventOnly=true")}else{if(e.revoonly){n.push("revoEventOnly=true")}}}r+=n.join("&").substr(0);r=r.replace(/^http/,"ws");this.q.yield(true);this.q.add(function(){var e=this.cookies?{Cookie:this.cookies}:{};this.emit("es:connecting",{uri:r,headers:e});var n=new i(r,"http",{headers:e});n.onopen=function(e){t.emit("es:open",e)};var o="";n.onmessage=function(e){try{if(e.data.split("!|!")[1]){o=o+e.data.split("!|!")[1];e=JSON.parse(o);o="";var r=e.deployr.response.event.type;t.emit("es:"+r.replace("Event",""),e)}}catch(n){}};n.onerror=function(e){t.emit("es:error",e)};n.onclose=function(e){t.emit("es:disconnect",e)};this.ws=n},this);if(e.force){this.flush()}return this},close:function(){if(this.ws){this.ws.close()}return this},error:function(e){this.on("es:error",e);return this},all:function(){this.channel={revoonly:true};return this},session:function(){this.channel={httponly:true};return this},project:function(e){this.channel={project:e};return this},job:function(e){this.channel={job:e};return this},management:function(){this.channel={management:true};return this},flush:function(){this.q.yield(false);this.q.flush()},share:function(e){this.cookies=e}});t.exports=c},{"./emitter":23,"./optional":28,"./queue":29,"./selfish":33,"./utils":34}],26:[function(e,t,r){var n={},i=Object.prototype.toString,o={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},s=false;n.isNull=function(e){return e===null};n.isUndefined=function(e){return typeof e==="undefined"};n.isObject=function(e,t){var r=typeof e;return e&&(r==="object"||!t&&(r==="function"||n.isFunction(e)))||false};n.isArray=!s&&Array.isArray||function(e){return n.type(e)==="array"};n.isFunction=function a(e){return typeof e==="function"};n.isBoolean=function(e){return typeof e==="boolean"};n.isDate=function(e){return n.type(e)==="date"&&e.toString()!=="Invalid Date"&&!isNaN(e)};n.isNumber=function(e){return typeof e==="number"&&isFinite(e)};n.isString=function(e){return typeof e==="string"};n.type=function(e){return o[typeof e]||o[i.call(e)]||(e?"object":"null")};t.exports=n},{}],27:[function(e,t,r){var n={},i={},o;function s(e,t){if(!console){return}function r(e){var t="========================================================="+"=========================================================\n",r=0;if(e===n.DEBUG||e===n.ERROR)r=8;else if(e===n.INFO||e===n.WARN)r=8;else r=7;return{start:t.substring(r),end:t}}var i,o=Array.prototype.slice.call(e,0),s=t.name,a=t.level===n.ERROR,u=r(t.level);if(t.level===n.WARN&&console.warn){i="warn"}else if(t.level===n.ERROR&&console.error){i="error"}else if(t.level===n.INFO&&console.info){i="info"}else{i="log"}o.unshift("["+(a?n.ERROR.name:s)+"] "+u.start);o.push(u.end);console[i](o[0],[o[1]+" ---> "+o[2]["call"]]);for(var c=2;c<o.length;c++){console.log(o[c])}}function a(e,t,r){this.id=e;this.context=t||n.DEBUG}a.prototype={log:function(e,t){if(e.value>=this.context.value){s(t,{level:e,name:this.context.name,value:this.context.value})}},debug:function(){this.log(n.DEBUG,arguments)},error:function(){this.log(n.ERROR,arguments)},info:function(){this.log(n.INFO,arguments)},warn:function(){this.log(n.WARN,arguments)},setLevel:function(e){if(e&&"value"in e){this.context=e}}};n.DEBUG={value:1,name:"DEBUG"};n.INFO={value:2,name:"INFO"};n.WARN={value:4,name:"WARN"};n.ERROR={value:8,name:"ERROR"};n.OFF={value:99,name:"OFF"};n.setLevel=function(e){o.setLevel(e)};n.debug=function(){o.debug.apply(o,arguments)};n.info=function(){o.info.apply(o,arguments)};n.warn=function(){o.warn.apply(o,arguments)};n.error=function(){o.error.apply(o,arguments)};n.get=function(e,t,r){return i[e]||function(){i[e]=new a(e,t,r);return i[e]}()};o=n.get("global");t.exports=n},{}],28:[function(e,t,r){t.exports=function(t){try{return e(t)}catch(r){}}},{}],29:[function(e,t,r){function n(){this.emptyCallback=null;this.callbacks=[];this.yielded=false;this.response=null;this.responseChain=[]}n.prototype={add:function(e,t,r){if(!this.yielded&&!r){e.apply(t||this,[this.response])}else{this.callbacks.push({fn:e,ctx:t})}},size:function(){return this.callbacks.length},isEmpty:function(){return this.callbacks.length===0},empty:function(e,t){this.emptyCallback={fn:e,ctx:t}},"yield":function(e){this.yielded=e},take:function(e,t,r){var n;if(e){this.response=e;this.responseChain.push(e)}if(!this.yielded&&this.callbacks[0]){n=this.callbacks.shift();n.fn.apply(n.ctx||this,[this.responseChain,t,r]);if(this.callbacks[0]&&this.emptyCallback){this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}},flush:function(e,t,r){if(e){this.response=e;this.responseChain.push(e)}while(this.callbacks[0]){if(this.yielded){break}var n=this.callbacks.shift();n.fn.apply(n.ctx||this,[this.responseChain,t,r]);if(this.callbacks[0]&&this.emptyCallback){this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}}};t.exports=n},{}],30:[function(e,t,r){var n=e("./selfish").Base,i=e("./rtypes");t.exports=n.extend(i,{initialize:function o(e,t,r){this.name=e;this.value=t;this.options=r||{}},numeric:function(){return this.assert({type:this.deployr.RNUMERIC,name:this.name,value:this.value,toString:this.toString})},integer:function(){return this.assert({type:this.deployr.RINTEGER,name:this.name,value:this.value,toString:this.toString})},logical:function(){return this.assert({type:this.deployr.RBOOLEAN,name:this.name,value:this.value,toString:this.toString})},character:function(){return this.assert({type:this.deployr.RSTRING,name:this.name,value:this.value,toString:this.toString})},date:function(){return this.assert({type:this.deployr.RDATE,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixct:function(){return this.assert({type:this.deployr.RPOSIX_DATE,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},numericVector:function(){return this.assert({type:this.deployr.RNUMERIC_VECTOR,name:this.name,value:this.value,toString:this.toString})},integerVector:function(){return this.assert({type:this.deployr.RINTEGER_VECTOR,name:this.name,value:this.value,toString:this.toString})},logicalVector:function(){return this.assert({type:this.deployr.RBOOLEAN_VECTOR,name:this.name,value:this.value,toString:this.toString})},characterVector:function(){return this.assert({type:this.deployr.RSTRING_VECTOR,name:this.name,value:this.value,toString:this.toString})},dateVector:function(){return this.assert({type:this.deployr.RDATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixctVector:function(){return this.assert({type:this.deployr.RPOSIX_DATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},list:function(){return this.assert({type:this.deployr.RLIST,name:this.name,value:this.value,toString:this.toString})},dataframe:function(){return this.assert({type:this.deployr.RDATAFRAME,name:this.name,value:this.value,toString:this.toString})},factor:function(){var e=this.options;return this.assert({type:this.deployr.RFACTOR,name:this.name,value:this.value,ordered:false,levels:e.levels,labels:e.labels,toString:this.toString})},ordered:function(){var e=this.options;return this.assert({type:this.deployr.RORDERED,name:this.name,value:this.value,ordered:true,levels:e.levels,labels:e.labels,toString:this.toString})},numericMatrix:function(){return this.assert({type:this.deployr.RNUMERIC_MATRIX,name:this.name,value:this.value,toString:this.toString})},integerMatrix:function(){return this.assert({type:this.deployr.RINTEGER_MATRIX,name:this.name,value:this.value,toString:this.toString})},logicalMatrix:function(){return this.assert({type:this.deployr.RBOOLEAN_MATRIX,name:this.name,value:this.value,toString:this.toString})},characterMatrix:function(){return this.assert({type:this.deployr.RSTRING_MATRIX,name:this.name,value:this.value,toString:this.toString})},toString:function(){var e=this.options||{},t=e.levels?"[ levels = "+e.levels+"]":"",r=e.labels?"[ labels = "+e.labels+"]":"";return"[ name = "+this.name+" ] "+"[ value = "+this.value+" ] "+"[ type = "+this.type+" ] "+t+r}})},{"./rtypes":32,"./selfish":33}],31:[function(e,t,r){var n=e("./selfish").Base,i=e("./rtypes"),o=e("./lang"),s=e("./rinput");function a(e,t,r,n){var i;if(o.isObject(t)){i=t;if(!i.type!==e){throw new Error("IllegalArgumentError:"+'Expecting "'+e+'" but found "'+i.type+'"')}}else{i=s.new(t,r,n)[e]()}return i}t.exports=n.extend(i,{numeric:function(e,t){this.inputs.push(a(this.deployr.RNUMERIC,e,t));return this},integer:function(e,t){this.inputs.push(a(this.deployr.RINTEGER,e,t));return this},logical:function(e,t){this.inputs.push(a(this.deployr.RBOOLEAN,e,t));return this},character:function(e,t){this.inputs.push(a(this.deployr.RSTRING,e,t));return this},date:function(e,t){this.inputs.push(a(this.deployr.RDATE,e,t));return this},posixct:function(e,t){this.inputs.push(a(this.deployr.RPOSIX_DATE,e,t));return this},numericVector:function(e,t){this.inputs.push(a(this.deployr.RNUMERIC_VECTOR,e,t));return this},integerVector:function(e,t){this.inputs.push(a(this.deployr.RINTEGER_VECTOR,e,t));return this},logicalVector:function(e,t){this.inputs.push(a(this.deployr.RBOOLEAN_VECTOR,e,t));return this},characterVector:function(e,t){this.inputs.push(a(this.deployr.RSTRING_VECTOR,e,t));return this},dateVector:function(e,t){this.inputs.push(a(this.deployr.RDATE_VECTOR,e,t));return this},posixctVector:function(e,t){this.inputs.push(a(this.deployr.RPOSIX_DATE_VECTOR,e,t));return this},list:function(e,t){this.inputs.push(a(this.deployr.RLIST,e,t));return this},dataframe:function(e,t){this.inputs.push(a(this.deployr.RDATAFRAME,e,t));return this},factor:function(e,t,r,n){var i={levels:r,labels:n};this.inputs.push(a(this.deployr.RFACTOR,e,t,i));return this},ordered:function(e,t,r,n){var i={levels:r,labels:n};this.inputs.push(a(this.deployr.RORDERED,e,t,i));return this},numericMatrix:function(e,t){this.inputs.push(a(this.deployr.RNUMERIC_MATRIX,e,t));return this},integerMatrix:function(e,t){this.inputs.push(a(this.deployr.RINTEGER_MATRIX,e,t));return this},logicalMatrix:function(e,t){this.inputs.push(a(this.deployr.RBOOLEAN_MATRIX,e,t));return this},characterMatrix:function(e,t){this.inputs.push(a(this.deployr.RSTRING_MATRIX,e,t));return this}})},{"./lang":26,"./rinput":30,"./rtypes":32,"./selfish":33
}],32:[function(e,t,r){var n=e("./selfish").Base,i=e("./lang"),o={};t.exports=n.extend({r:{PRIMITIVE:"primitive",DATAFRAME:"dataframe",LIST:"list",MATRIX:"matrix",DATE:"date",FACTOR:"factor",VECTOR:"vector"},deployr:{RBOOLEAN:"logical",RNUMERIC:"numeric",RINTEGER:"integer",RSTRING:"character",RDATE:"date",RPOSIX_DATE:"posixct",RBOOLEAN_VECTOR:"logicalVector",RNUMERIC_VECTOR:"numericVector",RINTEGER_VECTOR:"integerVector",RSTRING_VECTOR:"characterVector",RDATE_VECTOR:"dateVector",RPOSIX_DATE_VECTOR:"posixctVector",RLIST:"list",RDATAFRAME:"dataframe",RFACTOR:"factor",RORDERED:"ordered",RBOOLEAN_MATRIX:"logicalMatrix",RNUMERIC_MATRIX:"numericMatrix",RINTEGER_MATRIX:"integerMatrix",RSTRING_MATRIX:"characterMatrix"},isDate:function(e){return e===this.deployr.RDATE||e===this.deployr.RPOSIX_DATE||e===this.deployr.RDATE_VECTOR||e===this.deployr.RPOSIX_DATE_VECTOR||e===this.r.DATE},deployrToR:function(e){var t=this.deployr,r=this.r;if(!o[e]){o[t.RBOOLEAN]=r.PRIMITIVE;o[t.RNUMERIC]=r.PRIMITIVE;o[t.RINTEGER]=r.PRIMITIVE;o[t.RSTRING]=r.PRIMITIVE;o[t.RDATE]=r.DATE;o[t.RPOSIX_DATE]=r.DATE;o[t.RBOOLEAN_VECTOR]=r.VECTOR;o[t.RNUMERIC_VECTOR]=r.VECTOR;o[t.RINTEGER_VECTOR]=r.VECTOR;o[t.RSTRING_VECTOR]=r.VECTOR;o[t.RDATE_VECTOR]=r.VECTOR;o[t.RPOSIX_DATE_VECTOR]=r.VECTOR;o[t.RLIST]=r.LIST;o[t.RDATAFRAME]=r.DATAFRAME;o[t.RFACTOR]=r.FACTOR;o[t.RORDERED]=r.FACTOR;o[t.RBOOLEAN_MATRIX]=r.MATRIX;o[t.RNUMERIC_MATRIX]=r.MATRIX;o[t.RINTEGER_MATRIX]=r.MATRIX;o[t.RSTRING_MATRIX]=r.MATRIX}return o[e]},assert:function(e){var t=this.deployr,r=null,n=e.value,o;n=!i.isArray(n)?[n]:n;for(var s=0;s<n.length;s++){var a=n[s];switch(e.type){case t.RNUMERIC:case t.RNUMERIC_VECTOR:case t.RNUMERIC_VECTOR:o=i.isNumber;var u=parseFloat(a);a=isNaN(u)?a:u;break;case t.RINTEGER:case t.RINTEGER_VECTOR:o=i.isNumber;var u=parseFloat(a);a=isNaN(u)?a:u;break;case t.RBOOLEAN:case t.RBOOLEAN_VECTOR:o=i.isBoolean;break;case t.RSTRING:case t.RSTRING_VECTOR:o=i.isString;break;case t.RDATE:case t.RPOSIX_DATE:case t.RDATE_VECTOR:case t.RPOSIX_DATE_VECTOR:o=i.isDate;break;case t.RFACTOR:case t.RORDERED:case t.RDATAFRAME:case t.RINTEGER_MATRIX:case t.RBOOLEAN_MATRIX:case t.RSTRING_MATRIX:o=r;break}if(o&&!o(a)){throw new Error("RInputFormatError: "+'"'+a+'" is not a valid "'+e.type+'" type.')}}return e}})},{"./lang":26,"./selfish":33}],33:[function(t,r,n){!(typeof e!=="function"?function(e){e(null,typeof n!=="undefined"?n:window)}:e)(function(e,t){"use strict";t.Base=Object.freeze(Object.create(Object.prototype,{"new":{value:function r(){var e=Object.create(this);e.initialize.apply(e,arguments);return e}},initialize:{value:function n(){}},merge:{value:function i(){var e={};Array.prototype.forEach.call(arguments,function(t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})});Object.defineProperties(this,e);return this}},extend:{value:function o(){return Object.freeze(this.merge.apply(Object.create(this),arguments))}}}))})},{}],34:[function(e,t,r){var n=e("./lang");var i=r.get=function(e,t){function r(e,t,n){for(var i in e){var o=t.apply(this,[i,e[i],n]);if(o){return o}else{if(e[i]instanceof Object&&!(e[i]instanceof Array)){r(e[i],t,i)}}}}function i(e,t){var n={};r(e,function(e,r,i){if(e===t){n=r;return n}else{return null}});return n}function o(e){for(var t in e){if(e.hasOwnProperty(t))return e}return!n.isObject(e)?e:null}return o(i(e,t))};var o=r.inArray=function(e,t,r){var n,i=e.length;for(n=0;n<i;n++){if(r){if(e[n][r]===t){return e[n]}}else{if(e[n]===t){return e[n]}}}return null};r.merge=function(e,t){if(!e||typeof e!=="object"){e={}}if(!t||typeof t!=="object"){t={}}for(var r in t){e[r]=t[r]}return e};r.workspace=function(e,t){var r=i(e,"workspace");return r?t?o(r.objects,t,"name"):r.objects||r.object:null};r.signature=function(){var e=Array.prototype.slice.call(arguments["0"],0),t=e.length,r=false,i={},o;if(t===1&&n.isObject(e[0])){i=e[0];o=i.project?"/r/project/execute/script":"/r/repository/script/execute"}else if(t===1&&n.isString(e[0])){e=e[0].split("/");o="/r/repository/script/execute";i={author:e[1],directory:e[2],filename:e[3]}}else if(t===2){var s=e[1];o=s?"/r/project/execute/script":"/r/repository/script/execute";e=e[0].split("/");i={project:s,author:e[1],directory:e[2],filename:e[3]}}else if(t>2){i={author:e[2],directory:e[1],filename:e[0]}}if(i.project&&n.isBoolean(i.project)){delete i["project"];r=true}return{api:o,opts:i,create:r}}},{"./lang":26}],35:[function(e,t,r){var n=e("emitter");var i=e("reduce");var o="undefined"==typeof window?this:window;function s(){}function a(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}function u(){if(o.XMLHttpRequest&&("file:"!=o.location.protocol||!o.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}return false}var c="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function l(e){return e===Object(e)}function f(e){if(!l(e))return e;var t=[];for(var r in e){if(null!=e[r]){t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}}return t.join("&")}g.serializeObject=f;function h(e){var t={};var r=e.split("&");var n;var i;for(var o=0,s=r.length;o<s;++o){i=r[o];n=i.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}g.parseString=h;g.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};g.serialize={"application/x-www-form-urlencoded":f,"application/json":JSON.stringify};g.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse};function p(e){var t=e.split(/\r?\n/);var r={};var n;var i;var o;var s;t.pop();for(var a=0,u=t.length;a<u;++a){i=t[a];n=i.indexOf(":");o=i.slice(0,n).toLowerCase();s=c(i.slice(n+1));r[o]=s}return r}function d(e){return e.split(/ *; */).shift()}function y(e){return i(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),n=r.shift(),i=r.shift();if(n&&i)e[n]=i;return e},{})}function m(e,t){t=t||{};this.req=e;this.xhr=this.req.xhr;this.text=this.req.method!="HEAD"?this.xhr.responseText:null;this.setStatusProperties(this.xhr.status);this.header=this.headers=p(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text):null}m.prototype.get=function(e){return this.header[e.toLowerCase()]};m.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=d(t);var r=y(t);for(var n in r)this[n]=r[n]};m.prototype.parseBody=function(e){var t=g.parse[this.type];return t&&e&&e.length?t(e):null};m.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e;this.statusType=t;this.info=1==t;this.ok=2==t;this.clientError=4==t;this.serverError=5==t;this.error=4==t||5==t?this.toError():false;this.accepted=202==e;this.noContent=204==e||1223==e;this.badRequest=400==e;this.unauthorized=401==e;this.notAcceptable=406==e;this.notFound=404==e;this.forbidden=403==e};m.prototype.toError=function(){var e=this.req;var t=e.method;var r=e.url;var n="cannot "+t+" "+r+" ("+this.status+")";var i=new Error(n);i.status=this.status;i.method=t;i.url=r;return i};g.Response=m;function v(e,t){var r=this;n.call(this);this._query=this._query||[];this.method=e;this.url=t;this.header={};this._header={};this.on("end",function(){var e=null;var t=null;try{t=new m(r)}catch(n){e=new Error("Parser is unable to parse the response");e.parse=true;e.original=n}r.callback(e,t)})}n(v.prototype);v.prototype.use=function(e){e(this);return this};v.prototype.timeout=function(e){this._timeout=e;return this};v.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};v.prototype.abort=function(){if(this.aborted)return;this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};v.prototype.set=function(e,t){if(l(e)){for(var r in e){this.set(r,e[r])}return this}this._header[e.toLowerCase()]=t;this.header[e]=t;return this};v.prototype.unset=function(e){delete this._header[e.toLowerCase()];delete this.header[e];return this};v.prototype.getHeader=function(e){return this._header[e.toLowerCase()]};v.prototype.type=function(e){this.set("Content-Type",g.types[e]||e);return this};v.prototype.accept=function(e){this.set("Accept",g.types[e]||e);return this};v.prototype.auth=function(e,t){var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);return this};v.prototype.query=function(e){if("string"!=typeof e)e=f(e);if(e)this._query.push(e);return this};v.prototype.field=function(e,t){if(!this._formData)this._formData=new FormData;this._formData.append(e,t);return this};v.prototype.attach=function(e,t,r){if(!this._formData)this._formData=new FormData;this._formData.append(e,t,r);return this};v.prototype.send=function(e){var t=l(e);var r=this.getHeader("Content-Type");if(t&&l(this._data)){for(var n in e){this._data[n]=e[n]}}else if("string"==typeof e){if(!r)this.type("form");r=this.getHeader("Content-Type");if("application/x-www-form-urlencoded"==r){this._data=this._data?this._data+"&"+e:e}else{this._data=(this._data||"")+e}}else{this._data=e}if(!t)return this;if(!r)this.type("json");return this};v.prototype.callback=function(e,t){var r=this._callback;this.clearTimeout();if(2==r.length)return r(e,t);if(e)return this.emit("error",e);r(t)};v.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=true;this.callback(e)};v.prototype.timeoutError=function(){var e=this._timeout;var t=new Error("timeout of "+e+"ms exceeded");t.timeout=e;this.callback(t)};v.prototype.withCredentials=function(){this._withCredentials=true;return this};v.prototype.end=function(e){var t=this;var r=this.xhr=u();var n=this._query.join("&");var i=this._timeout;var o=this._formData||this._data;this._callback=e||s;r.onreadystatechange=function(){if(4!=r.readyState)return;if(0==r.status){if(t.aborted)return t.timeoutError();return t.crossDomainError()}t.emit("end")};if(r.upload){r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100;t.emit("progress",e)}}if(i&&!this._timer){this._timer=setTimeout(function(){t.abort()},i)}if(n){n=g.serializeObject(n);this.url+=~this.url.indexOf("?")?"&"+n:"?"+n}r.open(this.method,this.url,true);if(this._withCredentials)r.withCredentials=true;if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!a(o)){var c=g.serialize[this.getHeader("Content-Type")];if(c)o=c(o)}for(var l in this.header){if(null==this.header[l])continue;r.setRequestHeader(l,this.header[l])}this.emit("request",this);r.send(o);return this};g.Request=v;function g(e,t){if("function"==typeof t){return new v("GET",e).end(t)}if(1==arguments.length){return new v("GET",e)}return new v(e,t)}g.get=function(e,t,r){var n=g("GET",e);if("function"==typeof t)r=t,t=null;if(t)n.query(t);if(r)n.end(r);return n};g.head=function(e,t,r){var n=g("HEAD",e);if("function"==typeof t)r=t,t=null;if(t)n.send(t);if(r)n.end(r);return n};g.del=function(e,t){var r=g("DELETE",e);if(t)r.end(t);return r};g.patch=function(e,t,r){var n=g("PATCH",e);if("function"==typeof t)r=t,t=null;if(t)n.send(t);if(r)n.end(r);return n};g.post=function(e,t,r){var n=g("POST",e);if("function"==typeof t)r=t,t=null;if(t)n.send(t);if(r)n.end(r);return n};g.put=function(e,t,r){var n=g("PUT",e);if("function"==typeof t)r=t,t=null;if(t)n.send(t);if(r)n.end(r);return n};t.exports=g},{emitter:36,reduce:37}],36:[function(e,t,r){t.exports=n;function n(e){if(e)return i(e)}function i(e){for(var t in n.prototype){e[t]=n.prototype[t]}return e}n.prototype.on=n.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks[e]=this._callbacks[e]||[]).push(t);return this};n.prototype.once=function(e,t){var r=this;this._callbacks=this._callbacks||{};function n(){r.off(e,n);t.apply(this,arguments)}n.fn=t;this.on(e,n);return this};n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var r=this._callbacks[e];if(!r)return this;if(1==arguments.length){delete this._callbacks[e];return this}var n;for(var i=0;i<r.length;i++){n=r[i];if(n===t||n.fn===t){r.splice(i,1);break}}return this};n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n){r[n].apply(this,t)}}return this};n.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks[e]||[]};n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],37:[function(e,t,r){t.exports=function(e,t,r){var n=0;var i=e.length;var o=arguments.length==3?r:e[n++];while(n<i){o=t.call(null,o,e[n],++n,e)}return o}},{}],38:[function(e,t,r){t.exports={name:"deployr",version:"7.4.1",description:"Simplified JavaScript client library for making requests to DeployR.",keywords:["deployr","deployr.io","ajax","R","api","simple"],author:{name:"DeployR - Revolution Analytics Inc."},contributors:[{name:"Sean Wells"}],repository:{type:"git",url:"git://github.com/deployr/js-client-library.git"},homepage:"http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc",scripts:{start:"gulp start",build:"gulp"},devDependencies:{browserify:"^9.0.3",gulp:"^3.8.11","gulp-connect":"^2.2.0","gulp-header":"^1.2.2","gulp-jshint":"^1.9.2","gulp-livereload":"^3.8.0","gulp-plumber":"^0.6.6","gulp-uglifyjs":"^0.6.0","gulp-util":"^3.0.4",tape:"^3.5.0","vinyl-source-stream":"^1.0.0"},dependencies:{"d.js":"^0.6.0",superagent:"^0.21.0",ws:"^0.4.32"},main:"deployr.js",engines:{node:">= 0.10.0"},license:"Apache 2.0 License",bugs:{url:"https://github.com/deployr/js-client-library/issues"},directories:{example:"examples",test:"test"},readme:'JavaScript Client Library for DeployR \n=====================================\n\nThe JavaScript client library is a light-weight fluent API used to communicate \nwith DeployR from both the browser and Node.js environments. It is crafted for \nflexibility, readability, and a low learning curve.\n\n#### Easy anonymous R script execution:\n\n```js\ndeployr.script(\'/sean/root/reducer.R\')\n  .end(function(res) {\n     var artifacts = res.get(\'artifacts\');\n  });\n```\n\n#### Easy authenticated R code execution:\n\n```js\nvar r = \'x<-rnorm(10)\';\n\nruser.code(r)\n  .end(function(res) {\n     var out = res.get(\'console\');\n  });\n```\n\n#### Easy I/O to and from R:\n\n```js\ndeployr.script(\'/sean/root/shift.R\')\n  .character(\'name\', \'DeployR\')\n  .numeric(\'x\', 5)\n  .logical(\'up\', true)\n  .routput(\'roboteer_dataframe\')\n  .end(function(res) {\n     var objs = res.workspace(\'roboteer_dataframe\');\n  });\n```\n\nAnd much more...\n\nLinks\n-----\n\n  * [Download](#downloading)\n  * [User Guide Documentation](http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc)\n  * [API Documentation](http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc/api)\n  * [DeployR Reference Documentation](http://deployr.revolutionanalytics.com/documents/dev/api-doc)  \n  * [Simple examples](#examples)\n  * [Gulp, for building](#building)\n  * [Tests](#tests)\n  * [License](#license)\n\nDownloading\n============\n\nThere are a few diffrent ways to obtain the library depending on your \nenvironment and intended usage:\n\n- `$ npm install deployr` dependent on [Node.js](http://nodejs.org/download/)\n- `$ git clone https://github.com/deployr/js-client-library.git`\n- [Download Zip](https://github.com/deployr/js-client-library/archive/master.zip)\n- Download specific [release](https://github.com/deployr/js-client-library/releases)\n\nEnvironments\n============\n\n- Browser and Node.js\n\nWe recommend you [download and install](http://nodejs.org/download/) Node.js.\nIt is __not__ a requirement for the browser however using the JavaScript client \nlibrary from within a server or from the command line in addition to the browser\ncan be powerful!\n\n### Browser\n\nIf your environment is the browser the JavaScript client library can be found\nhere:\n\n```\n./deployr/browser/deployr.js\n./deployr/browser/deployr.min.js\n```\n\n### Node.js\n\nIf your environment is Node then the entire root ```./deployr/``` directory \nrepresents the JavaScript client library as it uses the same source for both \nenvironments.\n\nInstalling\n==========\n\n### Browser\n\nUsing the browser version:\n\n```bash\n./deployr/browser/deployr.js\n./deployr/browser/deployr.min.js\n``` \n\nInclude either one on your page in the `<script>` tag:\n\n```html\n<!-- Latest compiled raw JavaScript variation -->\n<script src="./browser/deployr.js"></script>\n\nOr\n\n<!-- Latest compiled minified JavaScript variation -->\n<script src="./browser/deployr.min.js"></script>\n```\n\n### Node.js\n\n1. [Download and install](http://nodejs.org/download/) Node.js, which includes \nnpm. npm, which stands for _node packaged modules_, is a way to manage \ndevelopment dependencies through Node.js.\n\n2. `$npm install deployr`\n\n3. `require` the directory:\n\n```js\nvar deployr = require(\'deployr\');\n```\n\nExamples\n========\n\nThe DeployR JavaScript client library ships with a set of small examples under \nthe __./deployr/examples__ directory that run in both the browser and Node.js \nenvironments. The intention of the examples are to demonstrate the syntax and \ncore areas of the JavaScript API. They are not intended to be a tutorial on how \nto write web applications.\n\nWe encourage you to start here and customise these examples and adapt them to \nsuit your needs as you explore the API.\n\n- __./examples/js-api:__ Introduces the core areas of the JavaScript API.\n\n- __./examples/tutorial:__ Introduces the top-level R analytics services exposed \non the DeployR API.\n\n### Running\n\n__Browser:__\n\n- Copy the _.html_ files under `./examples` to your webserver\n- Copy the `./examples/config.json` file under `./examples` to your webserver\n- Set the DeployR endpoint and basic authentication credentials in \n`./examples/config.json`\n\n```json\n{\n	"endpoint": "http://dhost:port",\n	"credentials": {\n	   "username": "testuser",\n	   "password": "changeme"\n	}\n}	\n```\n\n- Open your browser and select an example `.html` file to run. All examples \nsimply print to stdout viewable from your browser debug console.\n\nAlternatively, you can run the examples as is without moving them via the \nembedded web server if you have [Node.js](http://nodejs.org/download/) installed:\n\n`$ npm install deployr`\n\n`$ cd ./deployr`\n\n`$ npm install`\n\n`$ npm start`\n\nOpen your browser to _http://localhost:8080_ and select a example \n`.html` file to run. All examples simply print to stdout viewable from your \nbrowser debug console.\n\n__Node.js:__\n\nSet the DeployR endpoint and basic authentication credentials in \n`./examples/config.json`\n\n```json\n{\n	"endpoint": "http://dhost:port",\n	"credentials": {\n	   "username": "testuser",\n	   "password": "changeme"\n	}\n}\n\n```\n\nFrom the command line run one of the Node.js examples:\n\n```$ node ./examples/PATH_TO_EXAMPLE_FILE.js```\n\nBuilding\n========\n\nThis section only pertains to the _Browser_ environment.  \n\nOur dev and release builds are handled by [gulp.js](http://gulpjs.com/).\n\n### Installation\n\n1. [Download and install](http://nodejs.org/download/) Node.js\n2. `$ npm install deployr`\n3. `$ cd ./deployr`\n4. `$ npm install` This will install the development tools needed to build locally.\n\n### Targets\n\n * `$ npm run build` - Runs a build.\n * `$ npm start` - Runs a build and starts a local webserver with LiveReload \n   on `http://localhost:8080` rebuilding on file changes.\n\n### Destination\nThe browser build destination is located in the __./browser__ directory.\n\nTests\n=====\n\nComing soon...\n\nLicense\n=======\n\nCopyright (C) 2010-2015 by Revolution Analytics Inc.\n\nThis program is licensed to you under the terms of Version 2.0 of the\nApache License. This program is distributed WITHOUT\nANY EXPRESS OR IMPLIED WARRANTY, INCLUDING THOSE OF NON-INFRINGEMENT,\nMERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Please refer to the\nApache License 2.0 (http://www.apache.org/licenses/LICENSE-2.0) for more \ndetails.\n',readmeFilename:"README.md",gitHead:"3c955e1898bedfaf562b0b751674c4ebf7d602f6",_id:"deployr@7.4.1",_shasum:"3cc53c6cea2366525e21898bb6005f42e979b4e3",_from:"deployr@>=7.4.1 <8.0.0"}},{}],39:[function(e,t,r){t.exports=e("./lib/enum")},{"./lib/enum":40}],40:[function(t,r,n){(function(t){(function(e,t,r,n){"use strict";function i(e,t){this.key=e;this.value=t}i.prototype={constructor:i,has:function(e){if(e instanceof i||typeof e==="object"&&e.key!==undefined&&e.value!==undefined){return(this.value&e.value)!==0}else if(typeof e==="string"){return this.key.indexOf(e)>=0}else{return(this.value&e)!==0}},is:function(e){if(e instanceof i||typeof e==="object"&&e.key!==undefined&&e.value!==undefined){return this.key===e.key}else if(typeof e==="string"){return this.key===e}else{return this.value===e}},toString:function(){return this.key},toJSON:function(){return this.key},valueOf:function(){return this.key}};function o(e,t){if(t&&typeof t==="string"){t={name:t}}this._options=t||{};this._options.separator=this._options.separator||" | ";this.enums=[];if(e.length){var r=e;e={};for(var n=0;n<r.length;n++){e[r[n]]=Math.pow(2,n)}}for(var o in e){if(this._options.name&&o==="name"||o==="_options"||o==="get"||o==="getKey"||o==="getValue"||o==="enums"||o==="isFlaggable"){throw new Error('Enum key "'+o+'" is a reserved word!')}this[o]=new i(o,e[o]);this.enums.push(this[o])}if(this._options.name){this.name=this._options.name}var s=this;function a(){for(var e=0,t=s.enums.length;e<t;e++){var r=s.enums[e];if(!(r.value!==0&&!(r.value&r.value-1))){return false}}return true}this.isFlaggable=a();this.freezeEnums()}o.prototype={constructor:o,getKey:function(e){var t=this.get(e);if(t){return t.key}else{return"Undefined"}},getValue:function(e){var t=this.get(e);if(t){return t.value}else{return null}},get:function(e){if(e===null||e===undefined)return null;if(e instanceof i||typeof e==="object"&&e.key!==undefined&&e.value!==undefined){var t=this.enums.indexOf(e);if(t>=0){return e}if(!this.isFlaggable||this.isFlaggable&&e.key.indexOf(this._options.separator)<0){return null}return this.get(e.key)}else if(typeof e==="string"){if(e.indexOf(this._options.separator)>0){var r=e.split(this._options.separator);var n=0;for(var o=0;o<r.length;o++){var s=r[o];n|=this[s].value}return new i(e,n)}else{return this[e]}}else{for(var a in this){if(this.hasOwnProperty(a)){if(this[a].value===e){return this[a]}}}var u=null;if(this.isFlaggable){for(var c in this){if(this.hasOwnProperty(c)){if((e&this[c].value)!==0){if(u){u+=this._options.separator}else{u=""}u+=c}}}}return this.get(u||null)}},freezeEnums:function(){function e(e){var t=Object.getOwnPropertyNames(e);t.forEach(function(t){if(!Object.getOwnPropertyDescriptor(e,t).configurable){return}Object.defineProperties(e,t,{writable:false,configurable:false})});return e}function t(e){return e}function r(n){if(typeof n!=="object"||n===null||Object.isFrozen(n)||Object.isSealed(n)){return}for(var i in n){if(n.hasOwnProperty(i)){n.__defineGetter__(i,t.bind(null,n[i]));n.__defineSetter__(i,function o(e){throw TypeError("Cannot redefine property; Enum Type is not extensible.")});r(n[i])}}if(Object.freeze){Object.freeze(n)}else{e(n)}}r(this);return this}};if(t&&t.exports){t.exports=o}else if(n){n(function(){return o})}else{e.Enum=o}if(t&&t.exports&&r){o.register=function(e){e=e||"Enum";if(!r[e]){r[e]=o}}}})(this,typeof r!=="undefined"?r:undefined,typeof t!=="undefined"?t:undefined,typeof e!=="undefined"?e:undefined)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],41:[function(e,t,r){(function(e){var r=function(e){return o(e===true,false,arguments)},n="merge";r.recursive=function(e){return o(e===true,true,arguments)};r.clone=function(e){var t=e,n=s(e),i,o;if(n==="array"){t=[];o=e.length;for(i=0;i<o;++i)t[i]=r.clone(e[i])}else if(n==="object"){t={};for(i in e)t[i]=r.clone(e[i])}return t};function i(e,t){if(s(e)!=="object")return t;for(var r in t){if(s(e[r])==="object"&&s(t[r])==="object"){e[r]=i(e[r],t[r])}else{e[r]=t[r]}}return e}function o(e,t,n){var o=n[0],a=n.length;if(e||s(o)!=="object")o={};for(var u=0;u<a;++u){var c=n[u],l=s(c);if(l!=="object")continue;for(var f in c){var h=e?r.clone(c[f]):c[f];if(t){o[f]=i(o[f],h)}else{o[f]=h}}}return o}function s(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}if(e){t.exports=r}else{window[n]=r}})(typeof t==="object"&&t&&typeof t.exports==="object"&&t.exports)},{}],42:[function(t,r,n){!(typeof e!=="function"?function(e,t){t(null,typeof n!=="undefined"?n:window)}:e)("selfish",function(e,t){"use strict";t.Base=Object.freeze(Object.create(Object.prototype,{"new":{value:function r(){var e=Object.create(this);e.initialize.apply(e,arguments);return e}},initialize:{value:function n(){}},merge:{value:function i(){var e={};Array.prototype.forEach.call(arguments,function(t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})});Object.defineProperties(this,e);return this}},extend:{value:function o(){return Object.freeze(this.merge.apply(Object.create(this),arguments))}}}))})},{}]},{},[1])(1)});