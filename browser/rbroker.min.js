/*!
 * `rbroker` The DeployR RBroker Library v7.3.0
 * http://deployr.revolutionanalytics.com/documents/dev/rbroker-jsdoc
 *
 * Copyright (C) 2010-2015 by Revolution Analytics Inc.
 * Released under the Apache License 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Includes:
 *   - when: https://www.npmjs.org/package/when
 *   - enum: https://www.npmjs.org/package/enum
 *   - merge: https://www.npmjs.org/package/merge
 *   - selfish: https://www.npmjs.org/package/selfish
 *
 * when
 *
 * Copyright (c) 2011 Brian Cavalier
 * Open Source Initiative OSI - The MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * enum
 *
 * Copyright (c) 2015 Adriano Raiano
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining 
 * a copy of this software and associated documentation files 
 * (the "Software"), to deal in the Software without restriction, 
 * including without limitation the rights to use, copy, modify, merge
 * publish, distribute, sublicense, and/or sell copies of the Software, 
 * and to permit persons to whom the Software is furnished to do so, 
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, 
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY 
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * merge
 *
 * Copyright (c) 2014 yeikos - http://www.yeikos.com
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * selfish
 *
 * Copyright 2011 Irakli Gozalishvili. All rights reserved
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Date: 2015-02-27
 */
(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.rbroker=e()}})(function(){var e,t,r;return function n(e,t,r){function i(s,u){if(!t[s]){if(!e[s]){var a=typeof require=="function"&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=t[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return i(r?r:t)},f,f.exports,n,e,t,r)}return t[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,r){var n=e("./lib/task/discreate-task"),i=e("./lib/task/pooled-task"),o=e("./lib/task/background-task"),s=e("./lib/engine/discrete-task-broker"),u=e("./lib/engine/pooled-task-broker"),a=e("./lib/engine/background-task-broker");if(typeof window!=="undefined"&&!window.deployr){window.deployr=e("deployr")}t.exports={discreteTaskBroker:function(e){return s.new(e)},pooledTaskBroker:function(e){return u.new(e)},backgroundTaskBroker:function(e){return a.new(e)},discreteTask:function(e){return n.new(e)},pooledTask:function(e){return i.new(e)},backgroundTask:function(e){return o.new(e)}}},{"./lib/engine/background-task-broker":2,"./lib/engine/discrete-task-broker":3,"./lib/engine/pooled-task-broker":4,"./lib/task/background-task":8,"./lib/task/discreate-task":9,"./lib/task/pooled-task":10,deployr:21}],2:[function(e,t,r){var n=e("merge"),i=e("when"),o=e("./rbroker-engine"),s=e("../worker/background-task-worker");t.exports=o.extend({initialize:function u(e){var t=10;o.initialize.call(this,n(e,{maxConcurrentTaskLimit:t}));for(var r=0;r<this.parallelTaskLimit;r++){this.resourceTokenPool.offer(r)}this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(e){this.emit("ready")})},refresh:function(e){throw new Error("BackgroundTaskBroker refresh not supported.")},shutdown:function(){var e=this,t=i.defer();this.flush();return this.ruser.release()},createWorker:function(e){return s.new(e,this.ruser)}})},{"../worker/background-task-worker":14,"./rbroker-engine":5,merge:42,when:61}],3:[function(e,t,r){var n=e("when"),i=e("./rbroker-engine"),o=e("../worker/discrete-task-worker");t.exports=i.extend({initialize:function s(e){i.initialize.call(this,e);for(var t=0;t<this.parallelTaskLimit;t++){this.resourceTokenPool.offer(t)}if(e.credentials){this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(e){this.emit("ready")})}else{this.validateEndpoint(function(){this.ruser=null;this.emit("ready")})}},refresh:function(e){throw new Error("DiscreteTaskBroker refresh not supported.")},createWorker:function(e){return o.new(e,this.ruser)},shutdown:function(){var e=this,t=n.defer();this.flush();if(this.ruser){this.ruser.release().then(function(){t.resolve(true)},function(r){e.emit("error",r);t.reject(false)})}else{t.resolve(true)}return t.promise}})},{"../worker/discrete-task-worker":15,"./rbroker-engine":5,when:61}],4:[function(e,t,r){var n=e("deployr");var i=e("when"),o=e("merge"),s=e("./rbroker-engine"),u=e("../worker/pooled-task-worker");t.exports=s.extend({initialize:function a(e){s.initialize.call(this,e);if(!e.credentials){throw new Error("Broker failed to initialize, user credentials required.")}var t=this,r=e.maxConcurrentTaskLimit,i=o({poolsize:r},e.pool||{});this.httpKeepAlive={id:null,PING_INTERVAL:6e4,start:function(e){this.stop();this.id=setInterval(function(){n.io("/r/user/about").share(e.getCookies()).end()},this.PING_INTERVAL)},stop:function(){clearInterval(this.id)}};function u(e){var r=e.get("projects");if(r.length>0){var n=e.get("error");if(n){t.emit("warning",n)}r.forEach(function(e){t.resourceTokenPool.offer(e.project)});t.parallelTaskLimit=t.resourceTokenPool.size();t.emit("ready");t.httpKeepAlive.start(t.ruser)}else{t.emit("error",e.get("error"))}}this.ruser=this.validateEndpoint().io("/r/user/login").data(e.credentials).ctx(this).end(function(){if(e.releaseGridResources){this.ruser.io("/r/user/release").end().io("/r/project/pool").data(i).end(u)}else{this.ruser.io("/r/project/pool").data(i).end(u)}})},refresh:function(e){var t=[],r={},s=this.ruser;if(!this.isIdle()){var u=i.defer();u.reject(new Error("RBroker is not idle,  refresh not permitted."));return u.promise}e=e||{};r={code:"# Refresh project on PooledTaskBroker.",preloadfilename:e.preloadfilename,preloaddirectory:e.preloaddirectory,preloadfileauthor:e.preloadfileauthor,preloadfileversion:e.preloadfileversion};this.resourceTokenPool.q.forEach(function(e){t.push(n.io("/r/project/recycle").share(s.getCookies()).delay().data({project:e}).end().io("/r/project/execute/code").share(s.getCookies()).delay().data(o(r,{project:e})).end())});return n.pipeline(t)},shutdown:function(){var e=this,t=i.defer();this.httpKeepAlive.stop();this.flush();this.ruser.release(this.resourceTokenPool.q).then(function(){t.resolve(true)},function(r){e.emit("error",r);t.reject(new Error(r))});this.resourceTokenPool.q=[];return t.promise},createWorker:function(e){return u.new(e,this.ruser)}})},{"../worker/pooled-task-worker":16,"./rbroker-engine":5,deployr:21,merge:42,when:61}],5:[function(e,t,r){var n=e("deployr"),i=e("when"),o=e("selfish").Base,s=e("deployr/lib/emitter"),u=e("../rtask-token"),a=e("../util/rtask-queue"),c=999;t.exports=o.extend(s,{initialize:function f(e){s.initialize.call(this);this.config=e;this.scope=this.config.ctx||this;this.engineStarted=false;this.parallelTaskLimit=this.config.maxConcurrentTaskLimit;this.pendingLow=a.new(c);this.pendingHigh=a.new(c);this.resourceTokenPool=a.new(c);n.configure({host:e.host,cors:e.cors,logging:e.logging,events:{error:function(e,t){this.emit("error",t.deployr?t.get("error"):t)}.bind(this)}});this.runtime={runningTasks:0,totals:{success:0,failure:0},buildStats:function(e,t){return{maxConcurrency:t,totalTasksRun:this.totals.success+this.totals.failure,totalTasksRunToSuccess:this.totals.success,totalTasksRunToFailure:this.totals.failure,totalTimeTasksOnCode:e.timeOnCode,totalTimeTasksOnServer:e.timeOnServer,totalTimeTasksOnCall:e.timeOnCall}},calibrate:function(e){this.runningTasks=this.runningTasks+e;if(this.runningTasks<0){this.runningTasks=0}return this.runningTasks}};this.on("ready",function(){this.engineStarted=true;for(var e=0;e<this.parallelTaskLimit;e++){if(!this.isIdle()){this.run()}else{break}}})},validateEndpoint:function(e){return n.io("/r/server/info").ctx(this).timeout(1e3*10).error(function(e){throw new Error("DeployR endpoint invalid.")}).end(e)},simulateApp:function(e){if(e){if(typeof e.simulateApp==="function"){e.simulateApp(this)}else{throw new Error('ReferenceError: "simulateApp" is not defined')}}},submit:function(e,t){var r=this.createWorker(e),n=u.new(r);if(t){this.pendingHigh.offer(r)}else{this.pendingLow.offer(r)}this.run();return n},maxConcurrency:function(){return this.parallelTaskLimit},flush:function(){this.pendingHigh.clear();this.pendingLow.clear();return this.status()},isConnected:function(){var e=i.defer(),t=this.ruser?this.ruser.io("/r/user/about"):n.io("/r/server/info");t.io(api).error(function(){e.reject(false)}).end(function(){e.resolve(true)});return e.promise},status:function(){var e=this.pendingHigh.size()+this.pendingLow.size(),t=this.parallelTaskLimit-this.runtime.runningTasks,r=this.isIdle();return{pending:e,executing:t,idle:r,toString:function(){return'\nRBrokerStatus: [ pending = "'+e+'" ] '+'[ executing = "'+t+'" ] '+'[ idle = "'+r+'" ]\n'}}},isIdle:function(){return this.runtime.runningTasks===0&&this.pendingLow.isEmpty()&&this.pendingHigh.isEmpty()},ready:function(e){this.on("ready",e);return this},error:function(e){this.on("error",e);return this},warning:function(e){this.on("warning",e);return this},complete:function(e){this.on("complete",e);return this},idle:function(e){this.on("idle",e);return this},progress:function(e){this.on("progress",e);return this},run:function(){var e=this,t,r;if(this.engineStarted&&!this.resourceTokenPool.isEmpty()&&(!this.pendingLow.isEmpty()||!this.pendingHigh.isEmpty())){t=this.pendingHigh.take()||this.pendingLow.take();this.runtime.calibrate(+1);t.complete(function(t){e.runtime.totals.success++;e.emit("progress",e.runtime.buildStats(t.result,e.maxConcurrency()));e.emit("complete",t.task,t.result)}).error(function(t){e.runtime.totals.failure++;e.emit("error",t)}).ensure(function(t){e.runtime.calibrate(-1);e.resourceTokenPool.offer(t);e.run();if(e.isIdle()){e.emit("idle")}}).work(this.resourceTokenPool.take())}}})},{"../rtask-token":6,"../util/rtask-queue":13,deployr:21,"deployr/lib/emitter":23,selfish:43,when:61}],6:[function(e,t,r){var n=e("selfish").Base,i=e("./util/rtask-promise");t.exports=n.extend(i,{initialize:function o(e){this.defer=e.defer;this.cancelled=false},cancel:function(e){this.cancelled=true;this.worker.terminate(e);return this},getTask:function(){return this.worker.getTask()},isDone:function(){return this.worker.isDone()},isCancelled:function(){return this.cancelled}})},{"./util/rtask-promise":12,selfish:43}],7:[function(e,t,r){var n=e("selfish").Base,i=e("enum"),o=new i(["DISCRETE","POOLED","BACKGROUND"],"RTaskType");t.exports=n.extend({DISCRETE:o.DISCRETE,POOLED:o.POOLED,BACKGROUND:o.BACKGROUND})},{"enum":40,selfish:43}],8:[function(e,t,r){var n=e("selfish").Base,i=e("./rtask");t.exports=n.extend(i,{initialize:function(e){i.initialize.call(this,e)},toString:function(){var e="BackgroundTask: ";for(var t in this.props){e+=" [ "+t+' = "'+this.props[t]+'" ]'}return e}})},{"./rtask":11,selfish:43}],9:[function(e,t,r){var n=e("selfish").Base,i=e("./rtask");t.exports=n.extend(i,{initialize:function(e){i.initialize.call(this,e)},toString:function(){var e="DiscreteTask: ";for(var t in this.props){e+=" [ "+t+' = "'+this.props[t]+'" ]'}return e}})},{"./rtask":11,selfish:43}],10:[function(e,t,r){var n=e("selfish").Base,i=e("./rtask");t.exports=n.extend(i,{initialize:function(e){i.initialize.call(this,e)},toString:function(){var e="PooledTask: ";for(var t in this.props){e+=" [ "+t+' = "'+this.props[t]+'" ]'}return e}})},{"./rtask":11,selfish:43}],11:[function(e,t,r){var n=e("selfish").Base;t.exports=n.extend({initialize:function i(e){this.props=e||{};this.token=null},toJSON:function(){var e={};for(var t=Object.keys(this.props),r=t.length;r;--r){e[t[r-1]]=this.props[t[r-1]]}return e}})},{selfish:43}],12:[function(e,t,r){var n=e("selfish").Base,i=e("when");t.exports=n.extend({ensure:function(e){var t=this;if(e){this.defer.promise.ensure(function(){e.call(t,t.resourceToken)})}return this},complete:function(e,t){this.defer.promise.done(e,t);return this},error:function(e){this.defer.promise.otherwise(e);return this},resolve:function(e){this.defer.resolve({task:this.task,result:e})},reject:function(e){this.defer.reject(e)}})},{selfish:43,when:61}],13:[function(e,t,r){var n=e("selfish").Base;var i=n.extend({initialize:function(e){this.capacity=e;this.q=[]},offer:function(e){var t=this.size()<this.capacity;if(t){this.q.push(e)}return t},take:function(){return this.q.shift()},peek:function(){return this.q[0]},size:function(){return this.q.length},isEmpty:function(){return this.size()===0},clear:function(){this.q.length=0},iter:function(e){this.q.forEach(e)}});t.exports=i},{selfish:43}],14:[function(e,t,r){var n=e("selfish").Base,i=e("deployr"),o=e("../rtask-type"),s=e("./rbroker-worker");t.exports=s.extend({initialize:function u(e,t){s.initialize.call(this,e);this.ruser=t;this.job=null},work:function(e){var t=this,r=(new Date).getTime(),n=this.task.toJSON(),s=n.rinputs||[],u=n.routputs||[];delete n.rinputs;delete n.routputs;this.resourceToken=e;i.io("/r/job/submit").share(this.ruser.getCookies()).data(n).rinputs(s).routputs(u).error(function(e){t.reject(new Error(e.get("error")))}).end(function(e){var n=e.deployr.response.job;if(n){t.job=n.job;t.resolve({id:n.job,type:o.BACKGROUND,timeOnCode:0,timeOnServer:0,timeOnCall:(new Date).getTime()-r,success:true,failure:null})}});return this},terminate:function(){i.io("/r/job/cancel").share(this.ruser.getCookies()).data({job:this.job}).end();this.reject(new Error("BackgroundTaskWorker task terminated "+this.task))}})},{"../rtask-type":7,"./rbroker-worker":17,deployr:21,selfish:43}],15:[function(e,t,r){var n=e("selfish").Base,i=e("deployr"),o=e("../rtask-type"),s=e("./rbroker-worker");t.exports=s.extend({initialize:function u(e,t){s.initialize.call(this,e);this.io=null;this.ruser=t},work:function(e){var t=this,r=(new Date).getTime(),n=this.task.toJSON(),s=n.rinputs||[],u=n.routputs||[];delete n.rinputs;delete n.routputs;this.resourceToken=e;this.io=i.io("/r/repository/script/execute").share(this.ruser?this.ruser.getCookies():null).data(n).rinputs(s).routputs(u).error(function(e){t.reject(new Error(e.get("error")))}).end(function(e){e=e.deployr.response;var n=e.execution.timeTotal,i=e.project.project,s=e.execution.console,u=e.execution.results,a=e.execution.artifacts,c=e.workspace.objects,f=e.repository.files;t.resolve({id:i,type:o.DISCRETE,success:true,timeOnServer:n,timeOnCall:(new Date).getTime()-r,failure:null,interrupted:false,generatedConsole:s,generatedPlots:u,generatedFiles:a,generatedObjects:c,storedFiles:f})});return this},terminate:function(){this.reject(new Error("Worker task terminated "+this.task));if(this.io){this.io.abort();this.io.destroy();this.io=null}}})},{"../rtask-type":7,"./rbroker-worker":17,deployr:21,selfish:43}],16:[function(e,t,r){var n=e("selfish").Base,i=e("merge"),o=e("deployr"),s=e("../rtask-type"),u=e("./rbroker-worker");t.exports=u.extend({initialize:function a(e,t){u.initialize.call(this,e);this.ruser=t},work:function(e){var t=this,r=i({project:e,phantom:true},this.task.toJSON()),n=r.rinputs||[],u=r.routputs||[],a=(new Date).getTime();delete r.rinputs;delete r.routputs;this.resourceToken=e;o.io("/r/project/execute/"+(r.code?"code":"script")).share(this.ruser.getCookies()).data(r).rinputs(n).routputs(u).error(function(e){t.reject(new Error(e.get("error")))}).end(function(e){e=e.deployr.response;var r=e.execution.console,n=e.execution.results,i=e.execution.artifacts,o=e.workspace.objects,u=e.repository.files;t.resolve({id:e.project.project,type:s.POOLED,success:true,timeOnCode:e.execution.timeCode,timeOnServer:e.execution.timeTotal,timeOnCall:(new Date).getTime()-a,failure:null,interrupted:false,generatedConsole:r,generatedPlots:n,generatedFiles:i,generatedObjects:o,storedFiles:u})});return this},terminate:function(){this.reject(new Error("PooledTaskWorker task terminated "+this.task));this.ruser.io("/r/project/execute/interrupt").data({project:this.resourceToken}).end()}})},{"../rtask-type":7,"./rbroker-worker":17,deployr:21,merge:42,selfish:43}],17:[function(e,t,r){var n=e("selfish").Base,i=e("when"),o=e("../util/rtask-promise");t.exports=n.extend(o,{initialize:function s(e){var t=this;this.task=e;this.defer=i.defer();this.done=false;this.defer.promise.done(function(){t.done=true})},isDone:function(){return this.done},getTask:function(){return this.task}})},{"../util/rtask-promise":12,selfish:43,when:61}],18:[function(e,t,r){},{}],19:[function(e,t,r){var n=t.exports={};var i=[];var o=false;function s(){if(o){return}o=true;var e;var t=i.length;while(t){e=i;i=[];var r=-1;while(++r<t){e[r]()}t=i.length}o=false}n.nextTick=function(e){i.push(e);if(!o){setTimeout(s,0)}};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";function u(){}n.on=u;n.addListener=u;n.once=u;n.off=u;n.removeListener=u;n.removeAllListeners=u;n.emit=u;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],20:[function(e,t,r){t.exports={"/r/user/login":{method:"POST",format:"json"},"/r/user/logout":{method:"POST",format:"json"},"/r/user/about":{method:"POST",format:"json"},"/r/user/autosave":{method:"POST",format:"json"},"/r/user/release":{method:"POST",format:"json"},"/r/project/create":{method:"POST",format:"json"},"/r/project/pool":{method:"POST",format:"json"},"/r/project/recycle":{method:"POST",format:"json"},"/r/project/list":{method:"POST",format:"json"},"/r/project/ping":{method:"POST",format:"json"},"/r/project/about":{method:"POST",format:"json"},"/r/project/about/update":{method:"POST",format:"json"},"/r/project/save":{method:"POST",format:"json"},"/r/project/saveas":{method:"POST",format:"json"},"/r/project/close":{method:"POST",format:"json"},"/r/project/grant":{method:"POST",format:"json"},"/r/project/import":{method:"POST",format:"json",upload:true},"/r/project/export":{method:"POST",format:"json"},"/r/project/delete":{method:"POST",format:"json"},"/r/project/execute/code":{method:"POST",format:"json"},"/r/project/execute/script":{method:"POST",format:"json"},"/r/project/execute/interrupt":{method:"POST",format:"json"},"/r/project/execute/console":{method:"POST",format:"json"},"/r/project/execute/history":{method:"POST",format:"json"},"/r/project/execute/flush":{method:"POST",format:"json"},"/r/project/execute/result/list":{method:"POST",format:"json"},"/r/project/execute/result/download":{method:"POST",format:"json"},"/r/project/execute/result/delete":{method:"POST",format:"json"},"/r/project/workspace/list":{method:"POST",format:"json"},"/r/project/workspace/get":{method:"POST",format:"json"},"/r/project/workspace/upload":{method:"POST",format:"json",upload:true},"/r/project/workspace/transfer":{method:"POST",format:"json"},"/r/project/workspace/push":{method:"POST",format:"json"},"/r/project/workspace/save":{method:"POST",format:"json"},"/r/project/workspace/store":{method:"POST",format:"json"},"/r/project/workspace/load":{method:"POST",format:"json"},"/r/project/workspace/delete":{method:"POST",format:"json"},"/r/project/directory/list":{method:"POST",format:"json"},"/r/project/directory/upload":{method:"POST",format:"json",upload:true},"/r/project/directory/transfer":{method:"POST",format:"json"},"/r/project/directory/write":{method:"POST",format:"json"},"/r/project/directory/update":{method:"POST",format:"json"},"/r/project/directory/store":{method:"POST",format:"json"},"/r/project/directory/load":{method:"POST",format:"json"},"/r/project/directory/download":{method:"POST",format:"json"},"/r/project/directory/delete":{method:"POST",format:"json"},"/r/project/package/list":{method:"POST",format:"json"},"/r/project/package/attach":{method:"POST",format:"json"},"/r/project/package/detach":{method:"POST",format:"json"},"/r/job/list":{method:"POST",format:"json"},"/r/job/submit":{method:"POST",format:"json"},"/r/job/schedule":{method:"POST",format:"json"},"/r/job/query":{method:"POST",format:"json"},"/r/job/cancel":{method:"POST",format:"json"},"/r/job/delete":{method:"POST",format:"json"},"/r/repository/directory/list":{method:"POST",format:"json"},"/r/repository/directory/create":{method:"POST",format:"json"},"/r/repository/directory/rename":{method:"POST",format:"json"},"/r/repository/directory/copy":{method:"POST",format:"json"},"/r/repository/directory/move":{method:"POST",format:"json"},"/r/repository/directory/update":{method:"POST",format:"json"},"/r/repository/script/list":{method:"POST",format:"json"},"/r/repository/script/execute":{method:"POST",format:"json"},"/r/repository/script/render":{method:"POST",format:"json"},"/r/repository/script/interrupt":{method:"POST",format:"json"},"/r/repository/directory/archive":{method:"POST",format:"json"},"/r/repository/directory/upload":{method:"POST",format:"json",upload:true},"/r/repository/directory/download":{method:"POST",format:"json"},"/r/repository/directory/delete":{method:"POST",format:"json"},"/r/repository/file/list":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/upload":{method:"POST",format:"json",upload:true},"/r/repository/file/transfer":{method:"POST",format:"json"},"/r/repository/file/write":{method:"POST",format:"json"},"/r/repository/file/update":{method:"POST",format:"json"},"/r/repository/file/diff":{method:"POST",format:"json"},"/r/repository/file/revert":{method:"POST",format:"json"},"/r/repository/file/grant":{method:"POST",format:"json"},"/r/repository/file/download":{method:"POST",format:"json"},"/r/repository/file/delete":{method:"POST",format:"json"},"/r/repository/file/copy":{method:"POST",format:"json"},"/r/repository/file/move":{method:"POST",format:"json"},"/r/server/info":{method:"GET",format:"json"}}},{}],21:[function(e,t,r){var n=typeof window!=="undefined",i=e("superagent"),o=e("d.js"),s=e("fs"),u=e("./apis.json"),a=e("./lib/es"),c=e("./lib/utils"),f=e("./lib/lang"),l=e("./lib/logger"),h=e("./lib/queue"),p=e("./lib/emitter"),d=e("./lib/encoder"),y=e("./lib/selfish").Base,v=e("./lib/rinput"),m=e("./lib/rinputs"),g=c.merge;l.setLevel(l.OFF);var j={cors:false,logging:false,sticky:false,cookies:null,host:"",maxRequests:null,events:{},set:function(e,t){if(e!=="set"){this[e]=t}}};var R=["user","project","workspace","execution","directory","repository","packages"];function T(e,t){var r=t.deployr?t.deployr.response.errorCode:t.status,n=this;if(j.events){if(!t.deployr){t=t.text}n=j.events.ctx||n;if(j.events.error){j.events.error.apply(n,[e,t])}if(j.events[r]){j.events[r].apply(n,[e,t])}}}var w=y.extend(p,m,{initialize:function b(e,t){p.initialize.call(this,{});var r=j;if(!u[e]){throw new Error('Invalid API "'+e+'"')}this.api=g({call:e},u[e]);this.link=t||{};this.q=this.link.queue||new h;this.deferred=this.link.deferred||o();this.cookies=this.link.cookies;this.logger=l.get(e,l.OFF);this.params={};this.inputs=[];this.outputs=[];this.rstream=false;this.delayed=false;this.file=null;this.filter=null;this.data({format:this.api.format});this.req=i[this.api.method.toLowerCase()](r.host+"/deployr"+e);this.req.timeout(20*60*1e3);if(n&&j.cors){this.req.withCredentials()}if(this.api.upload){if(!n){this.req.type("multipart/form-data")}}else{this.req.type("form")}},ctx:function(e){this.scope=e||this;return this},share:function(e){if(j.sticky){if(j.cookies){this.cookies=j.cookies.slice(0)}else{if(e){this.cookies=e.slice(0);j.set("cookies",this.cookies)}}}else{this.cookies=e?e.slice(0):this.cookies}return this},getCookies:function(){return this.cookies},delay:function(e){this.delayed=!isNaN(parseFloat(e))&&isFinite(e)?e:true;return this},drain:function(){this.delayed=false;this.q.flush();return this.deferred.promise},promise:function(){this.end();return this.deferred.promise},abort:function(){this.req.abort();this.emit("abort");return this},timeout:function(e){this.req.timeout(e);return this},log:function(e){this.logger.setLevel(e||l.DEBUG);return this},entity:function(e){this.filter=c.inArray(R,e);return this},data:function(e){e=e||{};if(e.rinput||e.rinputs){this.rinput(e.rinput);this.rinputs(e.rinputs)}var t=["rinput","rinputs","__cookies__"];t.forEach(function(t){delete e[t]});this.params=g(this.params,e);return this},attach:function(e,t){if(this.api.upload){this.file=e;if(t){this.data({filename:t})}}return this},stream:function(){this.rstream=!n&&this.api.upload;return this},ensure:function(e){this.deferred.promise.ensure(e);return this.deferred.promise},error:function(e){var t=this;this.on("error",e);this.req.on("error",function(e){t.emit("error",e)});return this},pipe:function(e){var t=this.q,r=this.api;t.add(function(n,i,o){if(i){this.deferred.reject(i);t.flush(n,i,o);this._clear();return}this._prepRequest(n,o);l.info("pipe()",r,this.req);this.logger.info("pipe()",r,this.req);var s=this.req.pipe(e);t.yield(true);s.on("error",function(){});s.on("end",function(){});s.on("data",function(){})},this);if(t.size()<=1){t.flush()}return e},end:function(e){var t=this,r=this.q,n=this.api,i=null,o=this.filter;r.add(function(s,u,a){if(u){this.deferred.reject(u);r.flush(s,u,a);this._clear();return}this._prepRequest(s,a);l.info("io()",n,this.req);this.logger.info("io()",n,this.req);this.req.end(function(a){t.share(t.cookies||a.headers["set-cookie"]);if(t.cookies){l.info("cookies",n,t.cookies);t.logger.info("cookies",n,t.cookies)}u=t._handleError(a);var f=a.body&&a.body.deployr?a.body:a;t.inputs=[];t.outputs=[];if(!u){l.info("end()",n,f,a);t.logger.info("end()",n,f,a);if(o){f=f.deployr.response[o]||f}f.get=function(e){return c.get(f.deployr.response,e)};f.workspace=function(e){return c.workspace(f.deployr.response,e)};if(e){i=e.apply(t.scope,[f,s])}if(r.size()===0){t._clear();t.deferred.resolve(s||f)}i=g(i,{__cookies__:t.cookies})}r.yield(false);r.flush(f,u,i)});r.yield(true)},this,this.delayed);if(!this.delayed&&r.size()<=1){r.flush()}return this},io:function(e){return w.new(e,{cookies:this.cookies,queue:this.q,deferred:this.deferred})},script:function(){var e=c.signature(arguments),t=e.opts,r=e.api,n={cookies:this.cookies,queue:this.q,deferred:this.deferred};if(t.project&&f.isBoolean(t.project)){delete t["project"];return w.new("/r/project/create",n).end(function(e){return{project:e.get("project").project}}).io(r).data(t)}else{return w.new(r,n).data(t)}},release:function(e,t){e=f.isArray(e)?e:[e];var r=this,n=o(),i=!e||!e[0],s=0,u=!i?e.length-1:s,a=this.getCookies();function c(e){if(e===u){if(!t){w.new("/r/user/logout").share(a).error(function(){n.reject(false)}).end(function(){n.resolve(true)}).ensure(function(){r.destroy()})}else{n.resolve(true);r.destroy()}}}if(!i){e.forEach(function(e){w.new("/r/project/close").data({project:e}).share(a).end().ensure(function(){c(s);s++})})}else{c(s)}return n.promise},routputs:function(e){if(e){this.outputs=this.outputs.concat(e)}return this},routput:function(e){if(e){this.routputs([e])}return this},rinputs:function(e){if(e){this.inputs=this.inputs.concat(e)}return this},rinput:function(e){if(e){this.inputs.push(e)}return this},destroy:function(){try{this.emit("destroy");this.offAll();for(var e in this){if(this.hasOwnProperty(e)){this[e]=null;delete this[e]}}}catch(t){}},_clear:function(){this.api=null;this.params={};this.inputs=[];this.outputs=[];this.rstream=false;this.delayed=false;this.file=null;this.filter=null},_prepRequest:function(e,t){var r=this.req,n=this.file;this.share(t?t.__cookies__:null);if(t){this.data(t)}if(this.inputs.length>0){this.data({inputs:d.encode(this.inputs)})}if(this.outputs.length>0){this.data({robjects:this.outputs.join()})}if(this.cookies){this.cookies.forEach(function(e){r.set("Cookie",e)})}if(this.api.upload){for(var i in this.params){r.field(i,this.params[i]?this.params[i]+"":"")}r.attach("file",this.rstream?s.createReadStream(n):n)}else{r[this.api.method==="GET"?"query":"send"](this.params)}},_handleError:function(e){var t=e.status,r=e.body&&e.body.deployr?e.body:e,n=t!==200||r.deployr&&!r.deployr.response.success;if(n){r={get:function(e){return c.get(this.deployr.response,e)},deployr:{response:{success:false,call:this.api["call"],errorCode:r.deployr?r.deployr.response.errorCode:t,error:r.deployr?r.deployr.response.error:r.text}}};l.error("error()",this.api,r,e);this.logger.error("error()",this.api,r,e);T(this.api["call"],r);this.emit("error",r);this.emit("deployr-io:"+r.deployr.response.errorCode,r);this.deferred.reject(r)}return n}});if(n){window.Revolution=window.Revolution||e("./lib/deprecated")}t.exports={configure:function(e){e=e||{};for(var t in e){j.set(t,e[t])}if(!j.sticky){j.set("cookies",null)}l.setLevel(j.logging?l.DEBUG:l.OFF);return this},io:function(e){return w.new(e)},auth:function(e,t){var r={username:e,password:t};return w.new("/r/user/login").data(r).end()},script:function(){var e=c.signature(arguments),t=e.opts,r=e.api;if(t.project&&f.isBoolean(t.project)){delete t["project"];return w.new("/r/project/create").end(function(e){return{project:e.get("project").project}}).io(r).data(t)}else{return w.new(r).data(t)}},pipeline:function(e){var t=this,r=o(),n=new h,i=[],s=[],u=null,a={sticky:j.sticky,cookies:j.cookies};e=e.slice(0);t.configure({sticky:true});function c(){n.add(function(){e.shift().drain().then(function(e){i.push(e);s.push(u);if(n.isEmpty()){t.configure(a);r.resolve({results:i,errors:s})}n.take()},function(e){i.push(u);s.push(e);if(n.isEmpty()&&i.length===0){t.configure(a);r.reject(s)}n.take()})},null,true)}for(var f=0;f<e.length;f++){c()}n.take();return r.promise},es:function(e){var t=a.new(j.host,e);if(e&&e.username&&e.password){var r=this.auth(e.username,e.password);r.ensure(function(){t.share(r.getCookies());t.flush()})}return t},RInput:{numeric:function(e,t){return v.new(e,t).numeric()},integer:function(e,t){return v.new(e,t).integer()},logical:function(e,t){return v.new(e,t).logical()},character:function(e,t){return v.new(e,t).character()},date:function(e,t){return v.new(e,t).date()},posixct:function(e,t){return v.new(e,t).posixct()},numericVector:function(e,t){return v.new(e,t).numericVector()},integerVector:function(e,t){return v.new(e,t).integerVector()},logicalVector:function(e,t){return v.new(e,t).logicalVector()},characterVector:function(e,t){return v.new(e,t).characterVector()},dateVector:function(e,t){return v.new(e,t).dateVector()},posixctVector:function(e,t){return v.new(e,t).posixctVector()},list:function(e,t){return v.new(e,t).list()},dataframe:function(e,t){return v.new(e,t).dataframe()},factor:function(e,t,r,n){var i={levels:r,labels:n};return v.new(e,t,i).factor()},ordered:function(e,t,r,n){var i={levels:r,labels:n};return v.new(e,t,i).ordered()},numericMatrix:function(e,t){return v.new(e,t).numericMatrix()},integerMatrix:function(e,t){return v.new(e,t).integerMatrix()},logicalMatrix:function(e,t){return v.new(e,t).logicalMatrix()},characterMatrix:function(e,t){return v.new(e,t).characterMatrix()}}}},{"./apis.json":20,"./lib/deprecated":22,"./lib/emitter":23,"./lib/encoder":24,"./lib/es":25,"./lib/lang":26,"./lib/logger":27,"./lib/queue":29,"./lib/rinput":30,"./lib/rinputs":31,"./lib/selfish":33,"./lib/utils":34,"d.js":35,fs:18,superagent:36}],22:[function(e,t,r){var n=e("./lang"),i=e("./selfish").Base,o=e("./rinput");var s,u,a={},c=["user","project","workspace","execution","directory","repository","packages"];var f={ENDPOINT_WHITELIST:{login:"/r/user/login",logout:"/r/user/logout",projectCreate:"/r/project/create",projectClose:"/r/project/close",projectAboutUpdate:"/r/project/about/update",projectSave:"/r/project/save",projectSaveAs:"/r/project/saveas",clientProjectSave:"/r/client/project/save",clientProjectClose:"/r/client/project/close"},session:{},config:{},setUnloadConfig:function(e){e=e||{};this.config={disableautosave:e.disableautosave||true,dropworkspace:e.dropworkspace||true,dropdirectory:e.dropdirectory||true,drophistory:e.drophistory||true,flushhistory:e.flushhistory||true}},setSession:function(e){this.session=e},setProject:function(e){this.session.project=e},clearSession:function(){this.session={}},clearProject:function(){this.session.project=null},unloadHandler:function(){try{var e=this.session.project;if(e){var t=this._config;t.project=e.id;t.projectcookie=e.cookie;deployr.io("/r/project/close").data(t).sync().end()}}catch(r){throw new Error(r)}}};function l(e,t){var r=t||globalConfig.entity;if(r){var n=e.deployr.response,i=c;for(var o=0;o<i.length;o++){var s=i[o];if(n[s]&&r[s]){if(r[s].parser){var u=r[s].scope||this;n[s]=r[s].parser.call(u,n[s])}}}}return e}function h(e,t,r){var n=e.deployr.response,i=f.ENDPOINT_WHITELIST;switch(t){case i.login:f.setSession({httpcookie:n.httpcookie,user:n.user,limits:n.limits,project:null});break;case i.logout:f.clearSession();break;case i.projectClose:case i.clientProjectClose:f.clearProject();break;case i.projectCreate:case i.projectAboutUpdate:case i.projectSave:case i.projectSaveAs:case i.clientProjectSave:var o=n.project;f.setProject({id:o.project,cookie:o.cookie});break}s.Event.fire("DeployR:endpointChange",{response:e,endpoint:t,args:r})}function p(e){e=e.replace("/r/","");return e.toLowerCase().replace(/\/(.)/g,function(e,t){return t.toUpperCase()})}function d(e){var t=[];for(var r=0;r<e.length;r++){t.push(e[r].normalize())
}return t}var y=i.extend({initialize:function(e,t,r){this.type=e;this.rclass=t;this.rinput=r},getType:function(){return this.type},getRClass:function(){return this.rclass},getName:function(){return this.rinput.name},getValue:function(){return this.rinput.value},getLevels:function(){return this.rinput.levels},getLabels:function(){return this.rinput.labels},getOrdered:function(){return this.rinput.ordered},normalize:function(){return this.rinput}});function v(e){}function m(e){}v.prototype={events:{},scope:null,on:function(e,t){if(e in this.events===false){this.events[e]=[]}this.events[e].push(t);m('Emitter.on("'+e+'")');return this},emit:function(e){if(e in this.events===false){return this}for(var t=0;t<this.events[e].length;t++){m('Fired event: "'+e+'"');this.events[e][t].apply(this.scope||this,Array.prototype.slice.call(arguments,1))}return this},removeAllListeners:function(e){if(!e){for(var t in this.events){delete this.events[t]}}else{if(e in this.events===false){return this}delete this.events[e]}return this},removeListenerAt:function(e,t){var r=this.events[e],n=r.slice(t+1);r.length=t;r.push.apply(r,n);this.events[e]=r},off:function(e,t){if(e in this.events===false){return this}if(!t){return this.removeAllListeners(e)}else{for(var r=0;r<this.events[e].length;r++){if(this.events[e][r]==t){this.removeListenerAt(e,r);return this}}}return this}};u=new v;s={version:e("../package").version,Event:{on:function(e,t,r){u.on(e,t,r)},detach:function(e,t,r){u.off(e,t)}},RDataFactory:{createNumeric:function(e,t){return y.new("primitive","numeric",o.new(e,t).numeric())},createInteger:function(e,t){return y.new("primitive","integer",o.new(e,t).integer())},createBoolean:function(e,t){return y.new("primitive","numeric",o.new(e,t).logical())},createString:function(e,t){return y.new("primitive","character",o.new(e,t).character())},createDate:function(e,t){return y.new("date","Date",o.new(e,t).date())},createPOSIXDate:function(e,t){return y.new("date","POSIXct",o.new(e,t).posixct())},createNumericVector:function(e,t){return y.new("vector","numeric",o.new(e,t).numericVector())},createIntegerVector:function(e,t){return y.new("vector","integer",o.new(e,t).integerVector())},createBooleanVector:function(e,t){return y.new("vector","logical",o.new(e,t).logicalVector())},createStringVector:function(e,t){return y.new("vector","character",o.new(e,t).characterVector())},createDateVector:function(e,t){return y.new("type","Date",o.new(e,t).dateVector())},createPOSIXDateVector:function(e,t){return y.new("vector","POSIXct",o.new(e,t).posixctVector())},createList:function(e,t){return y.new("list","list",o.new(e,t).list())},createDataframe:function(e,t){return y.new("dataframe","data.frame",o.new(e,t).dataframe())},createFactor:function(e,t,r,n,i){var s={levels:n,labels:i};if(r){return y.new("factor","factor",o.new(e,t,s).ordered())}else{return y.new("factor","factor",o.new(e,t,s).factor())}},createNumericMatrix:function(e,t){return y.new("matrix","matrix",o.new(e,t).numericMatrix())},createIntegerMatrix:function(e,t){return y.new("matrix","matrix",o.new(e,t).integerMatrix())},createBooleanMatrix:function(e,t){return y.new("matrix","matrix",o.new(e,t).logicalMatrix())},createStringMatrix:function(e,t){return y.new("matrix","matrix",o.new(e,t).characterMatrix())}},DeployR:{init:function(e){e=e||{};if(e.compatibility){}if(e.events){var t=e.events;if(t.unload){f.setUnloadConfig(t.unload);s.Event.on("deployR:unload",f.unloadHandler,f)}if(t.globalIO){var r=t.globalIO.scope||window,n=t.globalIO.lifecycle,i=t.globalIO.statusCode;if(n){for(var o in n){s.Event.on("deployR-io:"+o,n[o],r)}}if(i){for(var o in i){s.Event.on("deployR-io:"+o,i[o],r)}}}}deployr.configure({host:e.deployrURI,cors:e.deployrURI?true:false,logging:e.logging,sticky:true})},io:function(e,t,r){if(console){console.warn('"'+p(e)+'()" API is now deprecated.')}r=r||{};t=t||{};var n=t.transaction||{},i=n["arguments"],o=n.statusCode||{},s=r.scope||window,a=t.robjects,c=t.inputs;if(t.transaction){delete t.transaction}if(t.method){delete t.method}if(t.on){delete t.on}if(t.format){delete t.format}if(t.inputs){delete t.inputs}if(t.robjects){delete t.robjects}var f=deployr.io(e).data(t||{}).error(function(t){u.emit("deployR-io:failure",[t,e,i]);if(r.failure){r.failure.apply(s,[t,e,i])}u.emit("deployR-io:"+code,[t,e,i])});if(c){f.rinputs(d(c))}if(a){f.routputs(a)}if(n.sync){f.sync()}if(n.timeout){f.timeout(n.timeout)}if(o){for(var h in o){f.on("deployr-io:"+h,function(t){var r=o;var n=t.deployr.response.error;var u=t.deployr.response.errorCode;r[u].apply(s,[t,u,n,e,i])})}}u.emit("deployR-io:start");if(r.start){r.start.apply(s,[e,i])}f.end(function(t){u.emit("deployR-io:complete");if(r.complete){r.complete.apply(s,[t,e,i])}if(n.entity){t=l(t,n.entity)}u.emit("deployR-io:success",[t,e]);if(r.success){r.success.apply(s,[t,e,i])}u.emit("deployR-io:end",[t,e]);if(r.end){r.end.apply(s,[t,e,i])}});return f},parseInputs:function(e){return e},projectWorkspaceList:function(e,t){return this.io("/r/project/workspace/list",e,t)},projectWorkspaceGet:function(e,t){return this.io("/r/project/workspace/get",e,t)},projectWorkspaceUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/workspace/upload",e,t)},projectWorkspaceTransfer:function(e,t){return this.io("/r/project/workspace/transfer",e,t)},projectWorkspacePush:function(e,t){return this.io("/r/project/workspace/push",e,t)},projectWorkspaceSave:function(e,t){return this.io("/r/project/workspace/save",e,t)},projectWorkspaceStore:function(e,t){return this.io("/r/project/workspace/store",e,t)},projectWorkspaceLoad:function(e,t){return this.io("/r/project/workspace/load",e,t)},projectWorkspaceDelete:function(e,t){return this.io("/r/project/workspace/delete",e,t)},projectCreate:function(e,t){return this.io("/r/project/create",e,t)},projectPool:function(e,t){return this.io("/r/project/pool",e,t)},projectRecycle:function(e,t){return this.io("/r/project/recycle",e,t)},projectList:function(e,t){return this.io("/r/project/list",e,t)},projectPing:function(e,t){return this.io("/r/project/ping",e,t)},projectAbout:function(e,t){return this.io("/r/project/about",e,t)},projectAboutUpdate:function(e,t){return this.io("/r/project/about/update",e,t)},projectSave:function(e,t){return this.io("/r/project/save",e,t)},projectSaveas:function(e,t){return this.io("/r/project/saveas",e,t)},projectClose:function(e,t){return this.io("/r/project/close",e,t)},projectGrant:function(e,t){return this.io("/r/project/grant",e,t)},projectImport:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/import",e,t)},projectExport:function(e,t){return this.io("/r/project/export",e,t)},projectDelete:function(e,t){return this.io("/r/project/delete",e,t)},projectExecuteCode:function(e,t){return this.io("/r/project/execute/code",e,t)},projectExecuteScript:function(e,t){return this.io("/r/project/execute/script",e,t)},projectExecuteInterrupt:function(e,t){return this.io("/r/project/execute/interrupt",e,t)},projectExecuteConsole:function(e,t){return this.io("/r/project/execute/console",e,t)},projectExecuteHistory:function(e,t){return this.io("/r/project/execute/history",e,t)},projectExecuteFlush:function(e,t){return this.io("/r/project/execute/flush",e,t)},projectExecuteResultList:function(e,t){return this.io("/r/project/execute/result/list",e,t)},projectExecuteResultDownload:function(e,t){return this.io("/r/project/execute/result/download",e,t)},projectExecuteResultDelete:function(e,t){return this.io("/r/project/execute/result/delete",e,t)},projectDirectoryList:function(e,t){return this.io("/r/project/directory/list",e,t)},projectDirectoryUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/directory/upload",e,t)},projectDirectoryTransfer:function(e,t){return this.io("/r/project/directory/transfer",e,t)},projectDirectoryWrite:function(e,t){return this.io("/r/project/directory/write",e,t)},projectDirectoryUpdate:function(e,t){return this.io("/r/project/directory/update",e,t)},projectDirectoryStore:function(e,t){return this.io("/r/project/directory/store",e,t)},projectDirectoryLoad:function(e,t){return this.io("/r/project/directory/load",e,t)},projectDirectoryDownload:function(e,t){return this.io("/r/project/directory/download",e,t)},projectDirectoryDelete:function(e,t){return this.io("/r/project/directory/delete",e,t)},projectPackageList:function(e,t){return this.io("/r/project/package/list",e,t)},projectPackageAttach:function(e,t){return this.io("/r/project/package/attach",e,t)},projectPackageDetach:function(e,t){return this.io("/r/project/package/detach",e,t)},userLogin:function(e,t){return this.io("/r/user/login",e,t)},userLogout:function(e,t){return this.io("/r/user/logout",e,t)},userAbout:function(e){return this.io("/r/user/about",{},e)},userAutosave:function(e,t){return this.io("/r/user/autosave",e,t)},repositoryScriptList:function(e){return this.io("/r/repository/script/list",{},e)},repositoryScriptExecute:function(e,t){return this.io("/r/repository/script/execute",e,t)},repositoryScriptRender:function(e,t){return this.io("/r/repository/script/render",e,t)},repositoryScriptInterrupt:function(e){return this.io("/r/repository/script/interrupt",config,e)},repositoryFileList:function(e,t){return this.io("/r/repository/file/list",e,t)},repositoryFileUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/repository/file/upload",e,t)},repositoryFileTransfer:function(e,t){return this.io("/r/repository/file/transfer",e,t)},repositoryFileWrite:function(e,t){return this.io("/r/repository/file/write",e,t)},repositoryFileUpdate:function(e,t){return this.io("/r/repository/file/update",e,t)},repositoryFileRevert:function(e,t){return this.io("/r/repository/file/revert",e,t)},repositoryFileDiff:function(e,t){return this.io("/r/repository/file/diff",e,t)},repositoryFileGrant:function(e,t){return this.io("/r/repository/file/grant",e,t)},repositoryFileDownload:function(e,t){return this.io("/r/repository/file/download",e,t)},repositoryFileDelete:function(e,t){return this.io("/r/repository/file/delete",e,t)},repositoryFileFetch:function(e,t){return this.io("/r/repository/file/fetch",e,t)},repositoryFileCopy:function(e,t){return this.io("/r/repository/file/copy",e,t)},repositoryFileMove:function(e,t){return this.io("/r/repository/file/move",e,t)},repositoryDirectoryList:function(e,t){return this.io("/r/repository/directory/list",e,t)},repositoryDirectoryCreate:function(e,t){return this.io("/r/repository/directory/create",e,t)},repositoryDirectoryRename:function(e,t){return this.io("/r/repository/directory/rename",e,t)},repositoryDirectoryCopy:function(e,t){return this.io("/r/repository/directory/copy",e,t)},repositoryDirectoryMove:function(e,t){return this.io("/r/repository/directory/move",e,t)},repositoryDirectoryUpdate:function(e,t){return this.io("/r/repository/directory/update",e,t)},repositoryDirectoryArchive:function(e,t){return this.io("/r/repository/directory/archive",e,t)},repositoryDirectoryUpload:function(e,t){e=e||{};e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/repository/directory/upload",e,t)},repositoryDirectoryDownload:function(e,t){return this.io("/r/repository/directory/download",e,t)},repositoryDirectoryDelete:function(e,t){return this.io("/r/repository/directory/delete",e,t)},jobList:function(e,t){return this.io("/r/job/list",e,t)},jobSubmit:function(e,t){return this.io("/r/job/submit",e,t)},jobSchedule:function(e,t){return this.io("/r/job/schedule",e,t)},jobQuery:function(e,t){return this.io("/r/job/query",e,t)},jobCancel:function(e,t){return this.io("/r/job/list",e,t)},jobDelete:function(e,t){return this.io("/r/job/delete",e,t)}}};t.exports=s},{"../package":39,"./lang":26,"./rinput":30,"./selfish":33}],23:[function(e,t,r){var n=e("./selfish").Base;function i(e){}t.exports=n.extend({initialize:function(){this.events={};this.scope=null},on:function(e,t){if(e in this.events===false){this.events[e]=[]}this.events[e].push(t);i('Emitter.on("'+e+'")');return this},emit:function(e){if(e in this.events===false){return this}for(var t=0;t<this.events[e].length;t++){i('Fired event: "'+e+'"');this.events[e][t].apply(this.scope||this,Array.prototype.slice.call(arguments,1))}return this},offAll:function(e){if(!e){for(var t in this.events){delete this.events[t]}}else{if(e in this.events===false){return this}delete this.events[e]}return this},offAt:function(e,t){var r=this.events[e],n=r.slice(t+1);r.length=t;r.push.apply(r,n);this.events[e]=r},off:function(e,t){if(e in this.events===false){return this}if(!t){return this.offAll(e)}else{for(var r=0;r<this.events[e].length;r++){if(this.events[e][r]==t){this.offAt(e,r);return this}}}return this}})},{"./selfish":33}],24:[function(e,t,r){var n=e("./lang"),i=e("./rtypes"),o=i.r,s=i.deployr;function u(e,t){var r=[];for(var n=0;n<e.length;n++){r.push(a(e[n],t))}return r}function a(e,t){var r=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),o=e.getHours(),u=e.getMinutes(),a=e.getSeconds(),c=e.getTimezoneOffset(),f="";n=n<10?"0"+n:n;o=o<10?"0"+o:o;u=u<10?"0"+u:u;a=a<10?"0"+a:a;f=r+"-"+n+"-"+i;function l(e,t,r){var n=""+Math.abs(e),i=e>=0;while(n.length<t){n="0"+n}return(i?r?"+":"":"-")+n}if(t===s.RPOSIX_DATE||t===s.RPOSIX_DATE_VECTOR){var h=o+":"+u+":"+a,p=-c,d="+";if(p<0){p=-p;d="-"}c=d+l(p/60,2)+""+l(p%60,2);f+=" "+h+" "+c}return f}function c(e,t){var r=e.value;for(var o=0;o<r.length;o++){var f=r[o];if(f.type===s.RDATAFRAME){t=c(f,t)}else{if(i.isDate(f.type)){if(n.isArray(f.value)){f.value=u(f.value,f.type)}else{f.value=a(f.value,f.type)}}f.type=i.deployrToR(f.type);t.value.push(f)}}return t}function f(e){var t={type:o.DATAFRAME,value:[],name:e.name},r=e.value;for(var f=0;f<r.length;f++){var l=r[f];if(l.type===s.RDATAFRAME){t=c(l,t)}else{if(i.isDate(l.type)){if(n.isArray(l.value)){l.value=u(l.value,l.type)}else{l.value=a(l.value,l.type)}}l.type=i.deployrToR(l.type);t.value.push(l)}}return t}function l(e){var t={type:o.LIST,value:[],name:e.name},r=e.value,n;for(var i=0;i<r.length;i++){var c=r[i];switch(c.type){case s.RDATAFRAME:n=f(c);break;case s.RLIST:n=l(c);break;case s.RNUMERIC_MATRIX:case s.RINTEGER_MATRIX:case s.RBOOLEAN_MATRIX:case s.RSTRING_MATRIX:n={name:c.name,type:o.MATRIX,value:c.value};break;case s.RDATE:case s.RPOSIX_DATE:n={name:c.name,type:o.DATE,format:c.format,value:a(c.value,c.type)};break;case s.RFACTOR:case s.RORDERED:n={name:c.name,type:o.FACTOR,ordered:c.ordered,labels:c.labels,levels:c.levels,value:c.value};break;case s.RSTRING:case s.RBOOLEAN:case s.RNUMERIC:case s.RINTEGER:n={name:c.name,type:o.PRIMITIVE,value:c.value};break;case s.RNUMERIC_VECTOR:case s.RINTEGER_VECTOR:case s.RBOOLEAN_VECTOR:case s.RSTRING_VECTOR:n={name:c.name,type:o.VECTOR,value:c.value};break;case s.RDATE_VECTOR:case s.RPOSIX_DATE_VECTOR:n={name:c.name,type:o.VECTOR,value:u(c.value,c.type),format:c.format};break;default:throw new Error('No RDataType found for "'+c.type+'"');break}t.value.push(n)}return t}t.exports={encode:function(e){var t={};for(var r=0;r<e.length;r++){var n=e[r];switch(n.type){case s.RDATAFRAME:t[n.name]=f(n);break;case s.RLIST:t[n.name]=l(n);break;case s.RNUMERIC_MATRIX:case s.RINTEGER_MATRIX:case s.RBOOLEAN_MATRIX:case s.RSTRING_MATRIX:t[n.name]={type:o.MATRIX,value:n.value};break;case s.RDATE:case s.RPOSIX_DATE:t[n.name]={type:o.DATE,format:n.format,value:a(n.value,n.type)};break;case s.RFACTOR:case s.RORDERED:t[n.name]={type:o.FACTOR,ordered:n.ordered,labels:n.labels,levels:n.levels,value:n.value};break;case s.RSTRING:case s.RBOOLEAN:case s.RNUMERIC:case s.RINTEGER:t[n.name]={type:o.PRIMITIVE,value:n.value};break;case s.RNUMERIC_VECTOR:case s.RINTEGER_VECTOR:case s.RBOOLEAN_VECTOR:case s.RSTRING_VECTOR:t[n.name]={type:o.VECTOR,value:n.value};break;case s.RDATE_VECTOR:case s.RPOSIX_DATE_VECTOR:t[n.name]={type:o.VECTOR,value:u(n.value,n.type),format:n.format};break;default:throw new Error('No RDataType found for "'+n.type+'"');break}}return JSON.stringify(t)}}},{"./lang":26,"./rtypes":32}],25:[function(e,t,r){var n=e("./optional"),i=n("ws"),o=e("./queue"),s=e("./emitter"),u=e("./selfish").Base,a=e("./utils").merge;var c=u.extend(s,{initialize:function f(e,t){s.initialize.call(this,{});this.host=e;this.options=t||{};this.options.log=this.options.log||this.LOG.error;this.ws=null;this.q=new o;this.channel={}},LOG:{info:"info",debug:"debug",error:"error"},open:function(e){var t=this,r=(this.host||"")+"/deployr/r/event/stream?",n=[];e=e||{};e.headers=e.headers||{};e=this.options=a(e,this.channel);this.cookies=!this.cookies?e.headers.Cookie:this.cookies;if(e.project){n.push("project="+e.project)}else{if(e.job){n.push("job="+e.job)}}if(e.management){n.push("managementEventOnly=true")}else{if(e.httponly){n.push("httpEventOnly=true")}else{if(e.revoonly){n.push("revoEventOnly=true")}}}r+=n.join("&").substr(0);r=r.replace(/^http/,"ws");this.q.yield(true);this.q.add(function(){var e=this.cookies?{Cookie:this.cookies}:{};this.emit("es:connecting",{uri:r,headers:e});var n=new i(r,"http",{headers:e});n.onopen=function(e){t.emit("es:open",e)};var o="";n.onmessage=function(e){try{if(e.data.split("!|!")[1]){o=o+e.data.split("!|!")[1];e=JSON.parse(o);o="";var r=e.deployr.response.event.type;t.emit("es:"+r.replace("Event",""),e)}}catch(n){}};n.onerror=function(e){t.emit("es:error",e)};n.onclose=function(e){t.emit("es:disconnect",e)};this.ws=n},this);if(e.force){this.flush()}return this},close:function(){if(this.ws){this.ws.close()}return this},error:function(e){this.on("es:error",e);return this},all:function(){this.channel={revoonly:true};return this},session:function(){this.channel={httponly:true};return this},project:function(e){this.channel={project:e};return this},job:function(e){this.channel={job:e};return this},management:function(){this.channel={management:true};return this},flush:function(){this.q.yield(false);this.q.flush()},share:function(e){this.cookies=e}});t.exports=c},{"./emitter":23,"./optional":28,"./queue":29,"./selfish":33,"./utils":34}],26:[function(e,t,r){var n={},i=Object.prototype.toString,o={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},s=false;n.isNull=function(e){return e===null};n.isUndefined=function(e){return typeof e==="undefined"};n.isObject=function(e,t){var r=typeof e;return e&&(r==="object"||!t&&(r==="function"||n.isFunction(e)))||false};n.isArray=!s&&Array.isArray||function(e){return n.type(e)==="array"};n.isFunction=function u(e){return typeof e==="function"};n.isBoolean=function(e){return typeof e==="boolean"};n.isDate=function(e){return n.type(e)==="date"&&e.toString()!=="Invalid Date"&&!isNaN(e)};n.isNumber=function(e){return typeof e==="number"&&isFinite(e)};n.isString=function(e){return typeof e==="string"};n.type=function(e){return o[typeof e]||o[i.call(e)]||(e?"object":"null")};t.exports=n},{}],27:[function(e,t,r){var n={},i={},o;function s(e,t){if(!console){return}function r(e){var t="========================================================="+"=========================================================\n",r=0;if(e===n.DEBUG||e===n.ERROR)r=8;else if(e===n.INFO||e===n.WARN)r=8;else r=7;return{start:t.substring(r),end:t}}var i,o=Array.prototype.slice.call(e,0),s=t.name,u=t.level===n.ERROR,a=r(t.level);if(t.level===n.WARN&&console.warn){i="warn"}else if(t.level===n.ERROR&&console.error){i="error"}else if(t.level===n.INFO&&console.info){i="info"}else{i="log"}o.unshift("["+(u?n.ERROR.name:s)+"] "+a.start);o.push(a.end);console[i](o[0],[o[1]+" ---> "+o[2]["call"]]);for(var c=2;c<o.length;c++){console.log(o[c])}}function u(e,t,r){this.id=e;this.context=t||n.DEBUG}u.prototype={log:function(e,t){if(e.value>=this.context.value){s(t,{level:e,name:this.context.name,value:this.context.value})}},debug:function(){this.log(n.DEBUG,arguments)},error:function(){this.log(n.ERROR,arguments)},info:function(){this.log(n.INFO,arguments)},warn:function(){this.log(n.WARN,arguments)},setLevel:function(e){if(e&&"value"in e){this.context=e}}};n.DEBUG={value:1,name:"DEBUG"};n.INFO={value:2,name:"INFO"};n.WARN={value:4,name:"WARN"};n.ERROR={value:8,name:"ERROR"};n.OFF={value:99,name:"OFF"};n.setLevel=function(e){o.setLevel(e)};n.debug=function(){o.debug.apply(o,arguments)};n.info=function(){o.info.apply(o,arguments)};n.warn=function(){o.warn.apply(o,arguments)};n.error=function(){o.error.apply(o,arguments)};n.get=function(e,t,r){return i[e]||function(){i[e]=new u(e,t,r);return i[e]}()};o=n.get("global");t.exports=n},{}],28:[function(e,t,r){t.exports=function(t){try{return e(t)}catch(r){}}},{}],29:[function(e,t,r){function n(){this.emptyCallback=null;this.callbacks=[];this.yielded=false;this.response=null;this.responseChain=[]}n.prototype={add:function(e,t,r){if(!this.yielded&&!r){e.apply(t||this,[this.response])}else{this.callbacks.push({fn:e,ctx:t})}},size:function(){return this.callbacks.length},isEmpty:function(){return this.callbacks.length===0},empty:function(e,t){this.emptyCallback={fn:e,ctx:t}},"yield":function(e){this.yielded=e},take:function(e,t,r){var n;if(e){this.response=e;this.responseChain.push(e)}if(!this.yielded&&this.callbacks[0]){n=this.callbacks.shift();n.fn.apply(n.ctx||this,[this.responseChain,t,r]);if(this.callbacks[0]&&this.emptyCallback){this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}},flush:function(e,t,r){if(e){this.response=e;this.responseChain.push(e)}while(this.callbacks[0]){if(this.yielded){break}var n=this.callbacks.shift();n.fn.apply(n.ctx||this,[this.responseChain,t,r]);if(this.callbacks[0]&&this.emptyCallback){this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}}};t.exports=n},{}],30:[function(e,t,r){var n=e("./selfish").Base,i=e("./rtypes");t.exports=n.extend(i,{initialize:function o(e,t,r){this.name=e;this.value=t;this.options=r||{}},numeric:function(){return this.assert({type:this.deployr.RNUMERIC,name:this.name,value:this.value,toString:this.toString})},integer:function(){return this.assert({type:this.deployr.RINTEGER,name:this.name,value:this.value,toString:this.toString})},logical:function(){return this.assert({type:this.deployr.RBOOLEAN,name:this.name,value:this.value,toString:this.toString})},character:function(){return this.assert({type:this.deployr.RSTRING,name:this.name,value:this.value,toString:this.toString})},date:function(){return this.assert({type:this.deployr.RDATE,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixct:function(){return this.assert({type:this.deployr.RPOSIX_DATE,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},numericVector:function(){return this.assert({type:this.deployr.RNUMERIC_VECTOR,name:this.name,value:this.value,toString:this.toString})},integerVector:function(){return this.assert({type:this.deployr.RINTEGER_VECTOR,name:this.name,value:this.value,toString:this.toString})},logicalVector:function(){return this.assert({type:this.deployr.RBOOLEAN_VECTOR,name:this.name,value:this.value,toString:this.toString})},characterVector:function(){return this.assert({type:this.deployr.RSTRING_VECTOR,name:this.name,value:this.value,toString:this.toString})},dateVector:function(){return this.assert({type:this.deployr.RDATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixctVector:function(){return this.assert({type:this.deployr.RPOSIX_DATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},list:function(){return this.assert({type:this.deployr.RLIST,name:this.name,value:this.value,toString:this.toString})},dataframe:function(){return this.assert({type:this.deployr.RDATAFRAME,name:this.name,value:this.value,toString:this.toString})},factor:function(){var e=this.options;return this.assert({type:this.deployr.RFACTOR,name:this.name,value:this.value,ordered:false,levels:e.levels,labels:e.labels,toString:this.toString})},ordered:function(){var e=this.options;return this.assert({type:this.deployr.RORDERED,name:this.name,value:this.value,ordered:true,levels:e.levels,labels:e.labels,toString:this.toString})},numericMatrix:function(){return this.assert({type:this.deployr.RNUMERIC_MATRIX,name:this.name,value:this.value,toString:this.toString})},integerMatrix:function(){return this.assert({type:this.deployr.RINTEGER_MATRIX,name:this.name,value:this.value,toString:this.toString})},logicalMatrix:function(){return this.assert({type:this.deployr.RBOOLEAN_MATRIX,name:this.name,value:this.value,toString:this.toString})},characterMatrix:function(){return this.assert({type:this.deployr.RSTRING_MATRIX,name:this.name,value:this.value,toString:this.toString})},toString:function(){var e=this.options||{},t=e.levels?"[ levels = "+e.levels+"]":"",r=e.labels?"[ labels = "+e.labels+"]":"";return"[ name = "+this.name+" ] "+"[ value = "+this.value+" ] "+"[ type = "+this.type+" ] "+t+r}})},{"./rtypes":32,"./selfish":33}],31:[function(e,t,r){var n=e("./selfish").Base,i=e("./rtypes"),o=e("./lang"),s=e("./rinput");function u(e,t,r,n){var i;if(o.isObject(t)){i=t;if(!i.type!==e){throw new Error("IllegalArgumentError:"+'Expecting "'+e+'" but found "'+i.type+'"')}}else{i=s.new(t,r,n)[e]()}return i}t.exports=n.extend(i,{numeric:function(e,t){this.inputs.push(u(this.deployr.RNUMERIC,e,t));return this},integer:function(e,t){this.inputs.push(u(this.deployr.RINTEGER,e,t));return this},logical:function(e,t){this.inputs.push(u(this.deployr.RBOOLEAN,e,t));return this},character:function(e,t){this.inputs.push(u(this.deployr.RSTRING,e,t));return this},date:function(e,t){this.inputs.push(u(this.deployr.RDATE,e,t));return this},posixct:function(e,t){this.inputs.push(u(this.deployr.RPOSIX_DATE,e,t));return this},numericVector:function(e,t){this.inputs.push(u(this.deployr.RNUMERIC_VECTOR,e,t));return this},integerVector:function(e,t){this.inputs.push(u(this.deployr.RINTEGER_VECTOR,e,t));return this},logicalVector:function(e,t){this.inputs.push(u(this.deployr.RBOOLEAN_VECTOR,e,t));return this},characterVector:function(e,t){this.inputs.push(u(this.deployr.RSTRING_VECTOR,e,t));return this},dateVector:function(e,t){this.inputs.push(u(this.deployr.RDATE_VECTOR,e,t));return this},posixctVector:function(e,t){this.inputs.push(u(this.deployr.RPOSIX_DATE_VECTOR,e,t));return this},list:function(e,t){this.inputs.push(u(this.deployr.RLIST,e,t));return this},dataframe:function(e,t){this.inputs.push(u(this.deployr.RDATAFRAME,e,t));return this},factor:function(e,t,r,n){var i={levels:r,labels:n};this.inputs.push(u(this.deployr.RFACTOR,e,t,i));return this},ordered:function(e,t,r,n){var i={levels:r,labels:n};this.inputs.push(u(this.deployr.RORDERED,e,t,i));return this},numericMatrix:function(e,t){this.inputs.push(u(this.deployr.RNUMERIC_MATRIX,e,t));return this},integerMatrix:function(e,t){this.inputs.push(u(this.deployr.RINTEGER_MATRIX,e,t));return this},logicalMatrix:function(e,t){this.inputs.push(u(this.deployr.RBOOLEAN_MATRIX,e,t));return this},characterMatrix:function(e,t){this.inputs.push(u(this.deployr.RSTRING_MATRIX,e,t));return this}})},{"./lang":26,"./rinput":30,"./rtypes":32,"./selfish":33}],32:[function(e,t,r){var n=e("./selfish").Base,i=e("./lang"),o={};t.exports=n.extend({r:{PRIMITIVE:"primitive",DATAFRAME:"dataframe",LIST:"list",MATRIX:"matrix",DATE:"date",FACTOR:"factor",VECTOR:"vector"},deployr:{RBOOLEAN:"logical",RNUMERIC:"numeric",RINTEGER:"integer",RSTRING:"character",RDATE:"date",RPOSIX_DATE:"posixct",RBOOLEAN_VECTOR:"logicalVector",RNUMERIC_VECTOR:"numericVector",RINTEGER_VECTOR:"integerVector",RSTRING_VECTOR:"characterVector",RDATE_VECTOR:"dateVector",RPOSIX_DATE_VECTOR:"posixctVector",RLIST:"list",RDATAFRAME:"dataframe",RFACTOR:"factor",RORDERED:"ordered",RBOOLEAN_MATRIX:"logicalMatrix",RNUMERIC_MATRIX:"numericMatrix",RINTEGER_MATRIX:"integerMatrix",RSTRING_MATRIX:"characterMatrix"},isDate:function(e){return e===this.deployr.RDATE||e===this.deployr.RPOSIX_DATE||e===this.deployr.RDATE_VECTOR||e===this.deployr.RPOSIX_DATE_VECTOR||e===this.r.DATE},deployrToR:function(e){var t=this.deployr,r=this.r;if(!o[e]){o[t.RBOOLEAN]=r.PRIMITIVE;o[t.RNUMERIC]=r.PRIMITIVE;o[t.RINTEGER]=r.PRIMITIVE;o[t.RSTRING]=r.PRIMITIVE;o[t.RDATE]=r.DATE;o[t.RPOSIX_DATE]=r.DATE;o[t.RBOOLEAN_VECTOR]=r.VECTOR;o[t.RNUMERIC_VECTOR]=r.VECTOR;o[t.RINTEGER_VECTOR]=r.VECTOR;o[t.RSTRING_VECTOR]=r.VECTOR;o[t.RDATE_VECTOR]=r.VECTOR;o[t.RPOSIX_DATE_VECTOR]=r.VECTOR;o[t.RLIST]=r.LIST;o[t.RDATAFRAME]=r.DATAFRAME;o[t.RFACTOR]=r.FACTOR;o[t.RORDERED]=r.FACTOR;o[t.RBOOLEAN_MATRIX]=r.MATRIX;o[t.RNUMERIC_MATRIX]=r.MATRIX;o[t.RINTEGER_MATRIX]=r.MATRIX;o[t.RSTRING_MATRIX]=r.MATRIX}return o[e]},assert:function(e){var t=this.deployr,r=null,n=e.value,o;n=!i.isArray(n)?[n]:n;for(var s=0;s<n.length;s++){var u=n[s];switch(e.type){case t.RNUMERIC:case t.RNUMERIC_VECTOR:case t.RNUMERIC_VECTOR:o=i.isNumber;var a=parseFloat(u);u=isNaN(a)?u:a;break;case t.RINTEGER:case t.RINTEGER_VECTOR:o=i.isNumber;var a=parseFloat(u);u=isNaN(a)?u:a;break;case t.RBOOLEAN:case t.RBOOLEAN_VECTOR:o=i.isBoolean;break;case t.RSTRING:case t.RSTRING_VECTOR:o=i.isString;break;case t.RDATE:case t.RPOSIX_DATE:case t.RDATE_VECTOR:case t.RPOSIX_DATE_VECTOR:o=i.isDate;break;case t.RFACTOR:case t.RORDERED:case t.RDATAFRAME:case t.RINTEGER_MATRIX:case t.RBOOLEAN_MATRIX:case t.RSTRING_MATRIX:o=r;break}if(o&&!o(u)){throw new Error("RInputFormatError: "+'"'+u+'" is not a valid "'+e.type+'" type.')}}return e}})},{"./lang":26,"./selfish":33}],33:[function(t,r,n){!(typeof e!=="function"?function(e){e(null,typeof n!=="undefined"?n:window)}:e)(function(e,t){"use strict";t.Base=Object.freeze(Object.create(Object.prototype,{"new":{value:function r(){var e=Object.create(this);e.initialize.apply(e,arguments);return e}},initialize:{value:function n(){}},merge:{value:function i(){var e={};Array.prototype.forEach.call(arguments,function(t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})});Object.defineProperties(this,e);return this}},extend:{value:function o(){return Object.freeze(this.merge.apply(Object.create(this),arguments))}}}))})},{}],34:[function(e,t,r){var n=e("./lang");var i=r.get=function(e,t){function r(e,t,n){for(var i in e){var o=t.apply(this,[i,e[i],n]);if(o){return o}else{if(e[i]instanceof Object&&!(e[i]instanceof Array)){r(e[i],t,i)}}}}function i(e,t){var n={};r(e,function(e,r,i){if(e===t){n=r;return n}else{return null}});return n}function o(e){for(var t in e){if(e.hasOwnProperty(t))return e}return!n.isObject(e)?e:null}return o(i(e,t))};var o=r.inArray=function(e,t,r){var n,i=e.length;for(n=0;n<i;n++){if(r){if(e[n][r]===t){return e[n]}}else{if(e[n]===t){return e[n]}}}return null};r.merge=function(e,t){if(!e||typeof e!=="object"){e={}}if(!t||typeof t!=="object"){t={}}for(var r in t){e[r]=t[r]}return e};r.workspace=function(e,t){var r=i(e,"workspace");return r?t?o(r.objects,t,"name"):r.objects||r.object:null};r.signature=function(){var e=Array.prototype.slice.call(arguments["0"],0),t=e.length,r,i={};if(t===1&&n.isObject(e[0])){i=e[0];r=i.project?"/r/project/execute/script":"/r/repository/script/execute"}else if(t===1&&n.isString(e[0])){e=e[0].split("/");r="/r/repository/script/execute";i={author:e[1],directory:e[2],filename:e[3]}}else if(t===2){var o=e[1];r=o?"/r/project/execute/script":"/r/repository/script/execute";e=e[0].split("/");i={project:o,author:e[1],directory:e[2],filename:e[3]}}else if(t>2){i={author:e[2],directory:e[1],filename:e[0]}}return{api:r,opts:i}}},{"./lang":26}],35:[function(e,t,r){(function(e){(function(r){"use strict";var n,i=function(e){return typeof e==="function"},o=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},s=function(e){return!!(e&&(typeof e).match(/function|object/))},u=function(e){return e===false||e===r||e===null},a=function(e,t){return[].slice.call(e,t)},c="undefined",f=typeof TypeError===c?Error:TypeError;if(typeof e!==c&&e.nextTick){n=e.nextTick
}else if(typeof MessageChannel!==c){var l=new MessageChannel,h=[];l.port1.onmessage=function(){h.length&&h.shift()()};n=function(e){h.push(e);l.port2.postMessage(0)}}else{n=function(e){setTimeout(e,0)}}function p(e){n(function(){throw e})}function d(e){return this.then(e,r)}function y(e){return this.then(r,e)}function v(e,t){return this.then(function(t){return i(e)?e.apply(null,o(t)?t:[t]):R.onlyFuncs?t:e},t||r)}function m(e){function t(){e()}this.then(t,t);return this}function g(e){return this.then(function(t){return i(e)?e.apply(null,o(t)?t.splice(0,0,undefined)&&t:[undefined,t]):R.onlyFuncs?t:e},function(t){return e(t)})}function j(e){return this.then(r,e?function(t){e(t);throw t}:p)}var R=function(e){var t=(r!==e?e:R.alwaysAsync)?n:function(e){e()},o=0,a=[],c,l={then:function(e,r){var n=R();a.push([function(t){try{if(u(e)){n.resolve(t)}else{n.resolve(i(e)?e(t):R.onlyFuncs?t:e)}}catch(r){n.reject(r)}},function(e){if(u(r)||!i(r)&&R.onlyFuncs){n.reject(e)}if(r){try{n.resolve(i(r)?r(e):r)}catch(t){n.reject(t)}}}]);o!==0&&t(h);return n.promise},success:d,error:y,otherwise:y,apply:v,spread:v,ensure:m,nodify:g,rethrow:j,isPending:function(){return!!(o===0)},getStatus:function(){return o}};l.toSource=l.toString=l.valueOf=function(){return c===r?this:c};function h(){if(o===0){return}var e=a,t=0,r=e.length,n=~o?0:1,i;a=[];for(;t<r;t++){(i=e[t][n])&&i(c)}}function p(e){var r=false;function n(e){return function(t){if(r){return undefined}else{r=true;return e(t)}}}if(o){return this}try{var u=s(e)&&e.then;if(i(u)){if(e===l){throw new f("Promise can't resolve itself")}u.call(e,n(p),n(T));return this}}catch(a){n(T)(a);return this}t(function(){c=e;o=1;h()});return this}function T(e){o||t(function(){try{throw e}catch(t){c=t}o=-1;h()});return this}return{promise:l,resolve:p,fulfill:p,reject:T}};R.deferred=R.defer=R;R.nextTick=n;R.alwaysAsync=true;R.onlyFuncs=true;R.resolved=R.fulfilled=function(e){return R(true).resolve(e).promise};R.rejected=function(e){return R(true).reject(e).promise};R.wait=function(e){var t=R();setTimeout(t.resolve,e||0);return t.promise};R.delay=function(e,t){var r=R();setTimeout(function(){try{r.resolve(e.apply(null))}catch(t){r.reject(t)}},t||0);return r.promise};R.promisify=function(e){if(e&&i(e.then)){return e}return R.resolved(e)};function T(e,t){var r=a(e);if(r.length===1&&o(r[0])){if(!r[0].length){return R.fulfilled([])}r=r[0]}var n=[],i=R(),s=r.length;if(!s){i.resolve(n)}else{var u=function(e){r[e]=R.promisify(r[e]);r[e].then(function(o){if(!(e in n)){n[e]=t?r[e]:o;--s||i.resolve(n)}},function(o){if(!(e in n)){if(!t){i.reject(o)}else{n[e]=r[e];--s||i.resolve(n)}}})};for(var c=0,f=s;c<f;c++){u(c)}}return i.promise}R.all=function(){return T(arguments,false)};R.resolveAll=function(){return T(arguments,true)};R.nodeCapsule=function(e,t){if(!t){t=e;e=void 0}return function(){var r=R(),n=a(arguments);n.push(function(e,t){e?r.reject(e):r.resolve(arguments.length>2?a(arguments,1):t)});try{t.apply(e,n)}catch(i){r.reject(i)}return r.promise}};typeof window!==c&&(window.D=R);typeof t!==c&&t.exports&&(t.exports=R)})()}).call(this,e("_process"))},{_process:19}],36:[function(e,t,r){var n=e("emitter");var i=e("reduce");var o="undefined"==typeof window?this:window;function s(){}function u(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}function a(){if(o.XMLHttpRequest&&("file:"!=o.location.protocol||!o.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}return false}var c="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function f(e){return e===Object(e)}function l(e){if(!f(e))return e;var t=[];for(var r in e){if(null!=e[r]){t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}}return t.join("&")}g.serializeObject=l;function h(e){var t={};var r=e.split("&");var n;var i;for(var o=0,s=r.length;o<s;++o){i=r[o];n=i.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}g.parseString=h;g.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};g.serialize={"application/x-www-form-urlencoded":l,"application/json":JSON.stringify};g.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse};function p(e){var t=e.split(/\r?\n/);var r={};var n;var i;var o;var s;t.pop();for(var u=0,a=t.length;u<a;++u){i=t[u];n=i.indexOf(":");o=i.slice(0,n).toLowerCase();s=c(i.slice(n+1));r[o]=s}return r}function d(e){return e.split(/ *; */).shift()}function y(e){return i(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),n=r.shift(),i=r.shift();if(n&&i)e[n]=i;return e},{})}function v(e,t){t=t||{};this.req=e;this.xhr=this.req.xhr;this.text=this.xhr.responseText;this.setStatusProperties(this.xhr.status);this.header=this.headers=p(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text):null}v.prototype.get=function(e){return this.header[e.toLowerCase()]};v.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=d(t);var r=y(t);for(var n in r)this[n]=r[n]};v.prototype.parseBody=function(e){var t=g.parse[this.type];return t?t(e):null};v.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e;this.statusType=t;this.info=1==t;this.ok=2==t;this.clientError=4==t;this.serverError=5==t;this.error=4==t||5==t?this.toError():false;this.accepted=202==e;this.noContent=204==e||1223==e;this.badRequest=400==e;this.unauthorized=401==e;this.notAcceptable=406==e;this.notFound=404==e;this.forbidden=403==e};v.prototype.toError=function(){var e=this.req;var t=e.method;var r=e.url;var n="cannot "+t+" "+r+" ("+this.status+")";var i=new Error(n);i.status=this.status;i.method=t;i.url=r;return i};g.Response=v;function m(e,t){var r=this;n.call(this);this._query=this._query||[];this.method=e;this.url=t;this.header={};this._header={};this.on("end",function(){var t=new v(r);if("HEAD"==e)t.text=null;r.callback(null,t)})}n(m.prototype);m.prototype.use=function(e){e(this);return this};m.prototype.timeout=function(e){this._timeout=e;return this};m.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};m.prototype.abort=function(){if(this.aborted)return;this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};m.prototype.set=function(e,t){if(f(e)){for(var r in e){this.set(r,e[r])}return this}this._header[e.toLowerCase()]=t;this.header[e]=t;return this};m.prototype.getHeader=function(e){return this._header[e.toLowerCase()]};m.prototype.type=function(e){this.set("Content-Type",g.types[e]||e);return this};m.prototype.accept=function(e){this.set("Accept",g.types[e]||e);return this};m.prototype.auth=function(e,t){var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);return this};m.prototype.query=function(e){if("string"!=typeof e)e=l(e);if(e)this._query.push(e);return this};m.prototype.field=function(e,t){if(!this._formData)this._formData=new FormData;this._formData.append(e,t);return this};m.prototype.attach=function(e,t,r){if(!this._formData)this._formData=new FormData;this._formData.append(e,t,r);return this};m.prototype.send=function(e){var t=f(e);var r=this.getHeader("Content-Type");if(t&&f(this._data)){for(var n in e){this._data[n]=e[n]}}else if("string"==typeof e){if(!r)this.type("form");r=this.getHeader("Content-Type");if("application/x-www-form-urlencoded"==r){this._data=this._data?this._data+"&"+e:e}else{this._data=(this._data||"")+e}}else{this._data=e}if(!t)return this;if(!r)this.type("json");return this};m.prototype.callback=function(e,t){var r=this._callback;if(2==r.length)return r(e,t);if(e)return this.emit("error",e);r(t)};m.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=true;this.callback(e)};m.prototype.timeoutError=function(){var e=this._timeout;var t=new Error("timeout of "+e+"ms exceeded");t.timeout=e;this.callback(t)};m.prototype.withCredentials=function(){this._withCredentials=true;return this};m.prototype.end=function(e){var t=this;var r=this.xhr=a();var n=this._query.join("&");var i=this._timeout;var o=this._formData||this._data;this._callback=e||s;r.onreadystatechange=function(){if(4!=r.readyState)return;if(0==r.status){if(t.aborted)return t.timeoutError();return t.crossDomainError()}t.emit("end")};if(r.upload){r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100;t.emit("progress",e)}}if(i&&!this._timer){this._timer=setTimeout(function(){t.abort()},i)}if(n){n=g.serializeObject(n);this.url+=~this.url.indexOf("?")?"&"+n:"?"+n}r.open(this.method,this.url,true);if(this._withCredentials)r.withCredentials=true;if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!u(o)){var c=g.serialize[this.getHeader("Content-Type")];if(c)o=c(o)}for(var f in this.header){if(null==this.header[f])continue;r.setRequestHeader(f,this.header[f])}this.emit("request",this);r.send(o);return this};g.Request=m;function g(e,t){if("function"==typeof t){return new m("GET",e).end(t)}if(1==arguments.length){return new m("GET",e)}return new m(e,t)}g.get=function(e,t,r){var n=g("GET",e);if("function"==typeof t)r=t,t=null;if(t)n.query(t);if(r)n.end(r);return n};g.head=function(e,t,r){var n=g("HEAD",e);if("function"==typeof t)r=t,t=null;if(t)n.send(t);if(r)n.end(r);return n};g.del=function(e,t){var r=g("DELETE",e);if(t)r.end(t);return r};g.patch=function(e,t,r){var n=g("PATCH",e);if("function"==typeof t)r=t,t=null;if(t)n.send(t);if(r)n.end(r);return n};g.post=function(e,t,r){var n=g("POST",e);if("function"==typeof t)r=t,t=null;if(t)n.send(t);if(r)n.end(r);return n};g.put=function(e,t,r){var n=g("PUT",e);if("function"==typeof t)r=t,t=null;if(t)n.send(t);if(r)n.end(r);return n};t.exports=g},{emitter:37,reduce:38}],37:[function(e,t,r){t.exports=n;function n(e){if(e)return i(e)}function i(e){for(var t in n.prototype){e[t]=n.prototype[t]}return e}n.prototype.on=n.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks[e]=this._callbacks[e]||[]).push(t);return this};n.prototype.once=function(e,t){var r=this;this._callbacks=this._callbacks||{};function n(){r.off(e,n);t.apply(this,arguments)}n.fn=t;this.on(e,n);return this};n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var r=this._callbacks[e];if(!r)return this;if(1==arguments.length){delete this._callbacks[e];return this}var n;for(var i=0;i<r.length;i++){n=r[i];if(n===t||n.fn===t){r.splice(i,1);break}}return this};n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n){r[n].apply(this,t)}}return this};n.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks[e]||[]};n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],38:[function(e,t,r){t.exports=function(e,t,r){var n=0;var i=e.length;var o=arguments.length==3?r:e[n++];while(n<i){o=t.call(null,o,e[n],++n,e)}return o}},{}],39:[function(e,t,r){t.exports={name:"deployr",version:"7.3.0",description:"Simplified JavaScript client library for making requests to DeployR.","private":false,keywords:["deployr","deployr.io","ajax","R","api","simple"],author:{name:"DeployR - Revolution Analytics Inc."},contributors:[{name:"Sean Wells"}],repository:{type:"git",url:"git://github.com/deployr/js-client-library.git"},homepage:"http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc",scripts:{start:"gulp start"},devDependencies:{"browserify-shim":"~3.4.1",browserify:"~3.36.0","vinyl-source-stream":"~0.1.1",connect:"~2.14.3",gulp:"^3.8.8","gulp-uglifyjs":"~0.4.2","gulp-plumber":"~0.6.4","gulp-util":"~2.2.20","gulp-livereload":"~2.1.0","gulp-jshint":"^1.7.1","gulp-header":"^1.1.1"},dependencies:{superagent:"^0.18.0","d.js":"^0.6.0",ws:"^0.4.32"},main:"deployr.js",engines:{node:">= 0.10.0"},license:"Apache 2.0 License",bugs:{url:"https://github.com/deployr/js-client-library/issues"},directories:{example:"examples",test:"test"},_id:"deployr@7.3.0",dist:{shasum:"bc3a40fe9c74db00c4c40ba315579c91d6628611",tarball:"http://registry.npmjs.org/deployr/-/deployr-7.3.0.tgz"},_from:"deployr@^7.3.0",_npmVersion:"1.4.3",_npmUser:{name:"swells",email:"sean.wells.sc@gmail.com"},maintainers:[{name:"swells",email:"sean.wells.sc@gmail.com"}],_shasum:"bc3a40fe9c74db00c4c40ba315579c91d6628611",_resolved:"https://registry.npmjs.org/deployr/-/deployr-7.3.0.tgz",readme:"ERROR: No README data found!"}},{}],40:[function(e,t,r){t.exports=e("./lib/enum")},{"./lib/enum":41}],41:[function(t,r,n){(function(t){(function(e,t,r,n){"use strict";function i(e,t){this.key=e;this.value=t}i.prototype={constructor:i,has:function(e){if(e instanceof i||typeof e==="object"&&e.key!==undefined&&e.value!==undefined){return(this.value&e.value)!==0}else if(typeof e==="string"){return this.key.indexOf(e)>=0}else{return(this.value&e)!==0}},is:function(e){if(e instanceof i||typeof e==="object"&&e.key!==undefined&&e.value!==undefined){return this.key===e.key}else if(typeof e==="string"){return this.key===e}else{return this.value===e}},toString:function(){return this.key},toJSON:function(){return this.key},valueOf:function(){return this.key}};function o(e,t){if(t&&typeof t==="string"){t={name:t}}this._options=t||{};this._options.separator=this._options.separator||" | ";this.enums=[];if(e.length){var r=e;e={};for(var n=0;n<r.length;n++){e[r[n]]=Math.pow(2,n)}}for(var o in e){if(this._options.name&&o==="name"||o==="_options"||o==="get"||o==="getKey"||o==="getValue"||o==="enums"||o==="isFlaggable"){throw new Error('Enum key "'+o+'" is a reserved word!')}this[o]=new i(o,e[o]);this.enums.push(this[o])}if(this._options.name){this.name=this._options.name}var s=this;function u(){for(var e=0,t=s.enums.length;e<t;e++){var r=s.enums[e];if(!(r.value!==0&&!(r.value&r.value-1))){return false}}return true}this.isFlaggable=u();this.freezeEnums()}o.prototype={constructor:o,getKey:function(e){var t=this.get(e);if(t){return t.key}else{return"Undefined"}},getValue:function(e){var t=this.get(e);if(t){return t.value}else{return null}},get:function(e){if(e===null||e===undefined)return null;if(e instanceof i||typeof e==="object"&&e.key!==undefined&&e.value!==undefined){var t=this.enums.indexOf(e);if(t>=0){return e}if(!this.isFlaggable||this.isFlaggable&&e.key.indexOf(this._options.separator)<0){return null}return this.get(e.key)}else if(typeof e==="string"){if(e.indexOf(this._options.separator)>0){var r=e.split(this._options.separator);var n=0;for(var o=0;o<r.length;o++){var s=r[o];n|=this[s].value}return new i(e,n)}else{return this[e]}}else{for(var u in this){if(this.hasOwnProperty(u)){if(this[u].value===e){return this[u]}}}var a=null;if(this.isFlaggable){for(var c in this){if(this.hasOwnProperty(c)){if((e&this[c].value)!==0){if(a){a+=this._options.separator}else{a=""}a+=c}}}}return this.get(a||null)}},freezeEnums:function(){function e(e){var t=Object.getOwnPropertyNames(e);t.forEach(function(t){if(!Object.getOwnPropertyDescriptor(e,t).configurable){return}Object.defineProperties(e,t,{writable:false,configurable:false})});return e}function t(e){return e}function r(n){if(typeof n!=="object"||n===null||Object.isFrozen(n)||Object.isSealed(n)){return}for(var i in n){if(n.hasOwnProperty(i)){n.__defineGetter__(i,t.bind(null,n[i]));n.__defineSetter__(i,function o(e){throw TypeError("Cannot redefine property; Enum Type is not extensible.")});r(n[i])}}if(Object.freeze){Object.freeze(n)}else{e(n)}}r(this);return this}};if(t&&t.exports){t.exports=o}else if(n){n(function(){return o})}else{e.Enum=o}if(t&&t.exports&&r){o.register=function(e){e=e||"Enum";if(!r[e]){r[e]=o}}}})(this,typeof r!=="undefined"?r:undefined,typeof t!=="undefined"?t:undefined,typeof e!=="undefined"?e:undefined)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],42:[function(e,t,r){(function(e){var r=function(e){return o(e===true,false,arguments)},n="merge";r.recursive=function(e){return o(e===true,true,arguments)};r.clone=function(e){var t=e,n=s(e),i,o;if(n==="array"){t=[];o=e.length;for(i=0;i<o;++i)t[i]=r.clone(e[i])}else if(n==="object"){t={};for(i in e)t[i]=r.clone(e[i])}return t};function i(e,t){if(s(e)!=="object")return t;for(var r in t){if(s(e[r])==="object"&&s(t[r])==="object"){e[r]=i(e[r],t[r])}else{e[r]=t[r]}}return e}function o(e,t,n){var o=n[0],u=n.length;if(e||s(o)!=="object")o={};for(var a=0;a<u;++a){var c=n[a],f=s(c);if(f!=="object")continue;for(var l in c){var h=e?r.clone(c[l]):c[l];if(t){o[l]=i(o[l],h)}else{o[l]=h}}}return o}function s(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}if(e){t.exports=r}else{window[n]=r}})(typeof t==="object"&&t&&typeof t.exports==="object"&&t.exports)},{}],43:[function(t,r,n){!(typeof e!=="function"?function(e,t){t(null,typeof n!=="undefined"?n:window)}:e)("selfish",function(e,t){"use strict";t.Base=Object.freeze(Object.create(Object.prototype,{"new":{value:function r(){var e=Object.create(this);e.initialize.apply(e,arguments);return e}},initialize:{value:function n(){}},merge:{value:function i(){var e={};Array.prototype.forEach.call(arguments,function(t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})});Object.defineProperties(this,e);return this}},extend:{value:function o(){return Object.freeze(this.merge.apply(Object.create(this),arguments))}}}))})},{}],44:[function(t,r,n){(function(e){"use strict";e(function(e){var t=e("./makePromise");var r=e("./Scheduler");var n=e("./env").asap;return t({scheduler:new r(n)})})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e(t)})},{"./Scheduler":45,"./env":57,"./makePromise":59}],45:[function(t,r,n){(function(e){"use strict";e(function(){function e(e){this._async=e;this._running=false;this._queue=this;this._queueLen=0;this._afterQueue={};this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e;this.run()};e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e;this.run()};e.prototype.run=function(){if(!this._running){this._running=true;this._async(this.drain)}};e.prototype._drain=function(){var e=0;for(;e<this._queueLen;++e){this._queue[e].run();this._queue[e]=void 0}this._queueLen=0;this._running=false;for(e=0;e<this._afterQueueLen;++e){this._afterQueue[e].run();this._afterQueue[e]=void 0}this._afterQueueLen=0};return e})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],46:[function(t,r,n){(function(e){"use strict";e(function(){function e(t){Error.call(this);this.message=t;this.name=e.name;if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,e)}}e.prototype=Object.create(Error.prototype);e.prototype.constructor=e;return e})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],47:[function(t,r,n){(function(e){"use strict";e(function(){e.tryCatchResolve=t;return e;function e(e,r){if(arguments.length<2){r=t}return n;function n(t,n,o){var s=e._defer();var u=o.length;var a=new Array(u);i({f:t,thisArg:n,args:o,params:a,i:u-1,call:r},s._handler);return s}function i(t,n){if(t.i<0){return r(t.f,t.thisArg,t.params,n)}var i=e._handler(t.args[t.i]);i.fold(o,t,void 0,n)}function o(e,t,r){e.params[e.i]=t;e.i-=1;i(e,r)}}function t(e,t,r,n){try{n.resolve(e.apply(t,r))}catch(i){n.reject(i)}}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],48:[function(t,r,n){(function(e){"use strict";e(function(e){var t=e("../state");var r=e("../apply");return function n(e){var n=r(e);var i=e.resolve;var o=e.all;var s=Array.prototype.reduce;var u=Array.prototype.reduceRight;var a=Array.prototype.slice;e.any=c;e.some=f;e.settle=d;e.map=l;e.filter=h;e.reduce=v;e.reduceRight=m;e.prototype.spread=function(e){return this.then(o).then(function(t){return e.apply(this,t)})};return e;function c(t){var r=e._defer();var n=r._handler;var i=t.length>>>0;var o=i;var s=[];for(var u,a,c=0;c<i;++c){a=t[c];if(a===void 0&&!(c in t)){--o;continue}u=e._handler(a);if(u.state()>0){n.become(u);e._visitRemaining(t,c,u);break}else{u.visit(n,f,l)}}if(o===0){n.reject(new RangeError("any(): array must not be empty"))}return r;function f(e){s=null;this.resolve(e)}function l(e){if(this.resolved){return}s.push(e);if(--o===0){this.reject(s)}}}function f(t,r){var n=e._defer();var i=n._handler;var o=[];var s=[];var u=t.length>>>0;var a=0;var c;var f,l;for(l=0;l<u;++l){f=t[l];if(f===void 0&&!(l in t)){continue}++a}r=Math.max(r,0);c=a-r+1;a=Math.min(r,a);if(r>a){i.reject(new RangeError("some(): array must contain at least "+r+" item(s), but had "+a))}else if(a===0){i.resolve(o)}for(l=0;l<u;++l){f=t[l];if(f===void 0&&!(l in t)){continue}e._handler(f).visit(i,h,p,i.notify)}return n;function h(e){if(this.resolved){return}o.push(e);if(--a===0){s=null;this.resolve(o)}}function p(e){if(this.resolved){return}s.push(e);if(--c===0){o=null;this.reject(s)}}}function l(t,r){return e._traverse(r,t)}function h(t,r){var n=a.call(t);return e._traverse(r,n).then(function(e){return p(n,e)})}function p(t,r){var n=r.length;var i=new Array(n);for(var o=0,s=0;o<n;++o){if(r[o]){i[s++]=e._handler(t[o]).value}}i.length=s;return i}function d(e){return o(e.map(y))}function y(r){var n=e._handler(r);if(n.state()===0){return i(r).then(t.fulfilled,t.rejected)}n._unreport();return t.inspect(n)}function v(e,t){return arguments.length>2?s.call(e,g(t),arguments[2]):s.call(e,g(t))}function m(e,t){return arguments.length>2?u.call(e,g(t),arguments[2]):u.call(e,g(t))}function g(e){return function(t,r,i){return n(e,void 0,[t,r,i])}}}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e(t)})},{"../apply":47,"../state":60}],49:[function(t,r,n){(function(e){"use strict";e(function(){return function o(r){var o=r.resolve;var s=r.reject;var u=r.prototype["catch"];r.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)};r.prototype["catch"]=r.prototype.otherwise=function(t){if(arguments.length<2){return u.call(this,t)}if(typeof t!=="function"){return this.ensure(e)}return u.call(this,a(arguments[1],t))};function a(e,r){return function(n){return t(n,r)?e.call(this,n):s(n)}}r.prototype["finally"]=r.prototype.ensure=function(e){if(typeof e!=="function"){return this}return this.then(function(t){return c(e,this,i,t)},function(t){return c(e,this,s,t)})};function c(e,t,r,i){var o=e.call(t);return n(o)?f(o,r,i):r(i)}function f(e,t,r){return o(e).then(function(){return t(r)})}r.prototype["else"]=r.prototype.orElse=function(e){return this.then(void 0,function(){return e})};r.prototype["yield"]=function(e){return this.then(function(){return e})};r.prototype.tap=function(e){return this.then(e)["yield"](this)};return r};function e(){throw new TypeError("catch predicate must be a function")}function t(e,t){return r(t)?e instanceof t:t(e)}function r(e){return e===Error||e!=null&&e.prototype instanceof Error}function n(e){return(typeof e==="object"||typeof e==="function")&&e!==null}function i(e){return e}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],50:[function(t,r,n){(function(e){"use strict";e(function(){return function e(t){t.prototype.fold=function(e,r){var n=this._beget();this._handler.fold(function(r,n,i){t._handler(r).fold(function(t,r,n){n.resolve(e.call(this,r,t))},n,this,i)},r,n._handler.receiver,n._handler);return n};return t}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],51:[function(t,r,n){(function(e){"use strict";e(function(e){var t=e("../state").inspect;return function r(e){e.prototype.inspect=function(){return t(e._handler(this))};return e}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e(t)})},{"../state":60}],52:[function(t,r,n){(function(e){"use strict";e(function(){return function e(t){var r=t.resolve;t.iterate=n;t.unfold=i;return t;function n(e,t,r,n){return i(function(t){return[t,e(t)]},t,r,n)}function i(e,t,n,o){return r(o).then(function(n){return r(t(n)).then(function(t){return t?n:r(e(n)).spread(s)})});function s(o,s){return r(n(o)).then(function(){return i(e,t,n,s)})}}}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],53:[function(t,r,n){(function(e){"use strict";e(function(){return function e(t){t.prototype.progress=function(e){return this.then(void 0,void 0,e)};return t}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],54:[function(t,r,n){(function(e){"use strict";e(function(e){var t=e("../env");var r=e("../TimeoutError");function n(e,r,n,i){return t.setTimer(function(){e(n,i,r)},r)}return function i(e){e.prototype.delay=function(e){var t=this._beget();this._handler.fold(i,e,void 0,t._handler);return t};function i(e,t,r){n(o,e,t,r)}function o(e,t){t.resolve(e)}e.prototype.timeout=function(e,r){var i=this._beget();var o=i._handler;var u=n(s,e,r,i._handler);this._handler.visit(o,function a(e){t.clearTimer(u);this.resolve(e)},function c(e){t.clearTimer(u);this.reject(e)},o.notify);return i};function s(e,t,n){var i=typeof e==="undefined"?new r("timed out after "+n+"ms"):e;t.reject(i)}return e}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e(t)})},{"../TimeoutError":46,"../env":57}],55:[function(t,r,n){(function(e){"use strict";e(function(e){var t=e("../env").setTimer;var r=e("../format");return function o(e){var o=i;var s=i;var u;if(typeof console!=="undefined"){u=console;o=typeof u.error!=="undefined"?function(e){u.error(e)}:function(e){u.log(e)};s=typeof u.info!=="undefined"?function(e){u.info(e)}:function(e){u.log(e)}}e.onPotentiallyUnhandledRejection=function(e){p(l,e)};e.onPotentiallyUnhandledRejectionHandled=function(e){p(h,e)};e.onFatalRejection=function(e){p(n,e.value)};var a=[];var c=[];var f=null;function l(e){if(!e.handled){c.push(e);o("Potentially unhandled rejection ["+e.id+"] "+r.formatError(e.value))}}function h(e){var t=c.indexOf(e);if(t>=0){c.splice(t,1);s("Handled previous rejection ["+e.id+"] "+r.formatObject(e.value))}}function p(e,r){a.push(e,r);if(f===null){f=t(d,0)}}function d(){f=null;while(a.length>0){a.shift()(a.shift())}}return e};function n(e){throw e}function i(){}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e(t)})},{"../env":57,"../format":58}],56:[function(t,r,n){(function(e){"use strict";e(function(){return function e(t){t.prototype["with"]=t.prototype.withThis=function(e){var t=this._beget();var r=t._handler;r.receiver=e;this._handler.chain(r,e);return t};return t}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],57:[function(t,r,n){(function(n){(function(e){"use strict";e(function(e){var t;var r=typeof setTimeout!=="undefined"&&setTimeout;var i=function(e,t){return setTimeout(e,t)};var o=function(e){return clearTimeout(e)};var s=function(e){return r(e,0)};if(c()){s=function(e){return n.nextTick(e)}}else if(t=f()){s=l(t)}else if(!r){var u=e;var a=u("vertx");i=function(e,t){return a.setTimer(t,e)};o=a.cancelTimer;s=a.runOnLoop||a.runOnContext}return{setTimer:i,clearTimer:o,asap:s};function c(){return typeof n!=="undefined"&&n!==null&&typeof n.nextTick==="function"}function f(){return typeof MutationObserver==="function"&&MutationObserver||typeof WebKitMutationObserver==="function"&&WebKitMutationObserver}function l(e){var t;var r=document.createTextNode("");var n=new e(i);n.observe(r,{characterData:true});function i(){var e=t;t=void 0;e()}var o=0;return function(e){t=e;r.data=o^=1}}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e(t)})}).call(this,t("_process"))},{_process:19}],58:[function(t,r,n){(function(e){"use strict";e(function(){return{formatError:e,formatObject:t,tryStringify:r};function e(e){var r=typeof e==="object"&&e!==null&&e.stack?e.stack:t(e);return e instanceof Error?r:r+" (WARNING: non-Error used)"}function t(e){var t=String(e);if(t==="[object Object]"&&typeof JSON!=="undefined"){t=r(e,t)}return t}function r(e,t){try{return JSON.stringify(e)}catch(r){return t}}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],59:[function(t,r,n){(function(t){(function(e){"use strict";e(function(){return function e(r){var n=r.scheduler;var i=tt();var o=Object.create||function(e){function t(){}t.prototype=e;return new t};function s(e,t){this._handler=e===k?t:u(e)}function u(e){var t=new x;try{e(n,i,o)}catch(r){i(r)}return t;function n(e){t.resolve(e)}function i(e){t.reject(e)}function o(e){t.notify(e)}}s.resolve=a;s.reject=c;s.never=f;s._defer=l;s._handler=T;function a(e){return G(e)?e:new s(k,new _(T(e)))}function c(e){return new s(k,new _(new I(e)))}function f(){return M}function l(){return new s(k,new x)}s.prototype.then=function(e,t,r){var n=this._handler;var i=n.join().state();if(typeof e!=="function"&&i>0||typeof t!=="function"&&i<0){return new this.constructor(k,n)}var o=this._beget();var s=o._handler;n.chain(s,n.receiver,e,t,r);return o};s.prototype["catch"]=function(e){return this.then(void 0,e)};s.prototype._beget=function(){return h(this._handler,this.constructor)};function h(e,t){var r=new x(e.receiver,e.join().context);return new t(k,r)}s.all=p;s.race=j;s._traverse=d;function p(e){return y($,null,e)}function d(e,t){return y(J,e,t)}function y(e,t,r){var n=typeof t==="function"?f:l;var i=new x;var o=r.length>>>0;var u=new Array(o);for(var a=0,c;a<r.length&&!i.resolved;++a){c=r[a];if(c===void 0&&!(a in r)){--o;continue}v(r,n,a,c,i)}if(o===0){i.become(new A(u))}return new s(k,i);function f(n,i,o){if(!o.resolved){v(r,l,n,e(t,i,n),o)}}function l(e,t,r){u[e]=t;if(--o===0){r.become(new A(u))}}}function v(e,t,r,n,i){if(X(n)){var o=w(n);var s=o.state();if(s===0){o.fold(t,r,void 0,i)}else if(s>0){t(r,o.value,i)}else{i.become(o);m(e,r+1,o)}}else{t(r,n,i)}}s._visitRemaining=m;function m(e,t,r){for(var n=t;n<e.length;++n){g(T(e[n]),r)}}function g(e,t){if(e===t){return}var r=e.state();if(r===0){e.visit(e,void 0,e._unreport)}else if(r<0){e._unreport()}}function j(e){if(typeof e!=="object"||e===null){return c(new TypeError("non-iterable passed to race()"))}return e.length===0?f():e.length===1?a(e[0]):R(e)}function R(e){var t=new x;var r,n,i;for(r=0;r<e.length;++r){n=e[r];if(n===void 0&&!(r in e)){continue}i=T(n);if(i.state()!==0){t.become(i);m(e,r+1,i);break}else{i.visit(t,t.resolve,t.reject)}}return new s(k,t)}function T(e){if(G(e)){return e._handler.join()}return X(e)?b(e):new A(e)}function w(e){return G(e)?e._handler.join():b(e)}function b(e){try{var t=e.then;return typeof t==="function"?new S(t,e):new A(e)}catch(r){return new I(r)}}function k(){}k.prototype.when=k.prototype.become=k.prototype.notify=k.prototype.fail=k.prototype._unreport=k.prototype._report=et;k.prototype._state=0;k.prototype.state=function(){return this._state};k.prototype.join=function(){var e=this;while(e.handler!==void 0){e=e.handler}return e};k.prototype.chain=function(e,t,r,n,i){this.when({resolver:e,receiver:t,fulfilled:r,rejected:n,progress:i})};k.prototype.visit=function(e,t,r,n){this.chain(O,e,t,r,n)};k.prototype.fold=function(e,t,r,n){this.when(new z(e,t,r,n))};function E(){}Y(k,E);E.prototype.become=function(e){e.fail()};var O=new E;function x(e,t){s.createContext(this,t);this.consumers=void 0;this.receiver=e;this.handler=void 0;this.resolved=false}Y(k,x);x.prototype._state=0;x.prototype.resolve=function(e){this.become(T(e))};x.prototype.reject=function(e){if(this.resolved){return}this.become(new I(e))};x.prototype.join=function(){if(!this.resolved){return this}var e=this;while(e.handler!==void 0){e=e.handler;if(e===this){return this.handler=L()}}return e};x.prototype.run=function(){var e=this.consumers;
var t=this.handler;this.handler=this.handler.join();this.consumers=void 0;for(var r=0;r<e.length;++r){t.when(e[r])}};x.prototype.become=function(e){if(this.resolved){return}this.resolved=true;this.handler=e;if(this.consumers!==void 0){n.enqueue(this)}if(this.context!==void 0){e._report(this.context)}};x.prototype.when=function(e){if(this.resolved){n.enqueue(new V(e,this.handler))}else{if(this.consumers===void 0){this.consumers=[e]}else{this.consumers.push(e)}}};x.prototype.notify=function(e){if(!this.resolved){n.enqueue(new F(e,this))}};x.prototype.fail=function(e){var t=typeof e==="undefined"?this.context:e;this.resolved&&this.handler.join().fail(t)};x.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)};x.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()};function _(e){this.handler=e}Y(k,_);_.prototype.when=function(e){n.enqueue(new V(e,this))};_.prototype._report=function(e){this.join()._report(e)};_.prototype._unreport=function(){this.join()._unreport()};function S(e,t){x.call(this);n.enqueue(new q(e,t,this))}Y(x,S);function A(e){s.createContext(this);this.value=e}Y(k,A);A.prototype._state=1;A.prototype.fold=function(e,t,r,n){H(e,t,this,r,n)};A.prototype.when=function(e){U(e.fulfilled,this,e.receiver,e.resolver)};var C=0;function I(e){s.createContext(this);this.id=++C;this.value=e;this.handled=false;this.reported=false;this._report()}Y(k,I);I.prototype._state=-1;I.prototype.fold=function(e,t,r,n){n.become(this)};I.prototype.when=function(e){if(typeof e.rejected==="function"){this._unreport()}U(e.rejected,this,e.receiver,e.resolver)};I.prototype._report=function(e){n.afterQueue(new P(this,e))};I.prototype._unreport=function(){if(this.handled){return}this.handled=true;n.afterQueue(new D(this))};I.prototype.fail=function(e){this.reported=true;i("unhandledRejection",this);s.onFatalRejection(this,e===void 0?this.context:e)};function P(e,t){this.rejection=e;this.context=t}P.prototype.run=function(){if(!this.rejection.handled&&!this.rejection.reported){this.rejection.reported=true;i("unhandledRejection",this.rejection)||s.onPotentiallyUnhandledRejection(this.rejection,this.context)}};function D(e){this.rejection=e}D.prototype.run=function(){if(this.rejection.reported){i("rejectionHandled",this.rejection)||s.onPotentiallyUnhandledRejectionHandled(this.rejection)}};s.createContext=s.enterContext=s.exitContext=s.onPotentiallyUnhandledRejection=s.onPotentiallyUnhandledRejectionHandled=s.onFatalRejection=et;var N=new k;var M=new s(k,N);function L(){return new I(new TypeError("Promise cycle"))}function V(e,t){this.continuation=e;this.handler=t}V.prototype.run=function(){this.handler.join().when(this.continuation)};function F(e,t){this.handler=t;this.value=e}F.prototype.run=function(){var e=this.handler.consumers;if(e===void 0){return}for(var t,r=0;r<e.length;++r){t=e[r];W(t.progress,this.value,this.handler,t.receiver,t.resolver)}};function q(e,t,r){this._then=e;this.thenable=t;this.resolver=r}q.prototype.run=function(){var e=this.resolver;B(this._then,this.thenable,t,r,n);function t(t){e.resolve(t)}function r(t){e.reject(t)}function n(t){e.notify(t)}};function B(e,t,r,n,i){try{e.call(t,r,n,i)}catch(o){n(o)}}function z(e,t,r,n){this.f=e;this.z=t;this.c=r;this.to=n;this.resolver=O;this.receiver=this}z.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)};z.prototype.rejected=function(e){this.to.reject(e)};z.prototype.progress=function(e){this.to.notify(e)};function G(e){return e instanceof s}function X(e){return(typeof e==="object"||typeof e==="function")&&e!==null}function U(e,t,r,n){if(typeof e!=="function"){return n.become(t)}s.enterContext(t);Q(e,t.value,r,n);s.exitContext()}function H(e,t,r,n,i){if(typeof e!=="function"){return i.become(r)}s.enterContext(r);K(e,t,r.value,n,i);s.exitContext()}function W(e,t,r,n,i){if(typeof e!=="function"){return i.notify(t)}s.enterContext(r);Z(e,t,n,i);s.exitContext()}function J(e,t,r){try{return e(t,r)}catch(n){return c(n)}}function Q(e,t,r,n){try{n.become(T(e.call(r,t)))}catch(i){n.become(new I(i))}}function K(e,t,r,n,i){try{e.call(n,t,r,i)}catch(o){i.become(new I(o))}}function Z(e,t,r,n){try{n.notify(e.call(r,t))}catch(i){n.notify(i)}}function Y(e,t){t.prototype=o(e.prototype);t.prototype.constructor=t}function $(e,t){return t}function et(){}function tt(){if(typeof t!=="undefined"&&t!==null&&typeof t.emit==="function"){return function(e,r){return e==="unhandledRejection"?t.emit(e,r.value,r):t.emit(e,r)}}else if(typeof self!=="undefined"&&typeof CustomEvent==="function"){return function(e,t,r){var n=false;try{var i=new r("unhandledRejection");n=i instanceof r}catch(o){}return!n?e:function(e,n){var i=new r(e,{detail:{reason:n.value,key:n},bubbles:false,cancelable:true});return!t.dispatchEvent(i)}}(et,self,CustomEvent)}return et}return s}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})}).call(this,t("_process"))},{_process:19}],60:[function(t,r,n){(function(e){"use strict";e(function(){return{pending:e,fulfilled:r,rejected:t,inspect:n};function e(){return{state:"pending"}}function t(e){return{state:"rejected",reason:e}}function r(e){return{state:"fulfilled",value:e}}function n(n){var i=n.state();return i===0?e():i>0?r(n.value):t(n.value)}})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e()})},{}],61:[function(t,r,n){(function(e){"use strict";e(function(e){var t=e("./lib/decorators/timed");var r=e("./lib/decorators/array");var n=e("./lib/decorators/flow");var i=e("./lib/decorators/fold");var o=e("./lib/decorators/inspect");var s=e("./lib/decorators/iterate");var u=e("./lib/decorators/progress");var a=e("./lib/decorators/with");var c=e("./lib/decorators/unhandledRejection");var f=e("./lib/TimeoutError");var l=[r,n,i,s,u,o,a,t,c].reduce(function(e,t){return t(e)},e("./lib/Promise"));var h=e("./lib/apply")(l);p.promise=d;p.resolve=l.resolve;p.reject=l.reject;p.lift=y;p["try"]=v;p.attempt=v;p.iterate=l.iterate;p.unfold=l.unfold;p.join=R;p.all=T;p.settle=w;p.any=y(l.any);p.some=y(l.some);p.race=y(l.race);p.map=b;p.filter=k;p.reduce=y(l.reduce);p.reduceRight=y(l.reduceRight);p.isPromiseLike=j;p.Promise=l;p.defer=m;p.TimeoutError=f;function p(e,t,r,n){var i=l.resolve(e);if(arguments.length<2){return i}return i.then(t,r,n)}function d(e){return new l(e)}function y(e){return function(){for(var t=0,r=arguments.length,n=new Array(r);t<r;++t){n[t]=arguments[t]}return h(e,this,n)}}function v(e){for(var t=0,r=arguments.length-1,n=new Array(r);t<r;++t){n[t]=arguments[t+1]}return h(e,this,n)}function m(){return new g}function g(){var e=l._defer();function t(t){e._handler.resolve(t)}function r(t){e._handler.reject(t)}function n(t){e._handler.notify(t)}this.promise=e;this.resolve=t;this.reject=r;this.notify=n;this.resolver={resolve:t,reject:r,notify:n}}function j(e){return e&&typeof e.then==="function"}function R(){return l.all(arguments)}function T(e){return p(e,l.all)}function w(e){return p(e,l.settle)}function b(e,t){return p(e,function(e){return l.map(e,t)})}function k(e,t){return p(e,function(e){return l.filter(e,t)})}return p})})(typeof e==="function"&&e.amd?e:function(e){r.exports=e(t)})},{"./lib/Promise":44,"./lib/TimeoutError":46,"./lib/apply":47,"./lib/decorators/array":48,"./lib/decorators/flow":49,"./lib/decorators/fold":50,"./lib/decorators/inspect":51,"./lib/decorators/iterate":52,"./lib/decorators/progress":53,"./lib/decorators/timed":54,"./lib/decorators/unhandledRejection":55,"./lib/decorators/with":56}]},{},[1])(1)});